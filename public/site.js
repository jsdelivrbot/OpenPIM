function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=ae.type(e);return"function"!==n&&!ae.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e,t,n){if(ae.isFunction(t))return ae.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return ae.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ge.test(t))return ae.filter(t,e,n);t=ae.filter(t,e)}return ae.grep(e,function(e){return J.call(t,e)>-1!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t={};return ae.each(e.match(Ee)||[],function(e,n){t[n]=!0}),t}function s(){W.removeEventListener("DOMContentLoaded",s),e.removeEventListener("load",s),ae.ready()}function o(){this.expando=ae.expando+o.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Be,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Ie.test(n)?ae.parseJSON(n):n)}catch(r){}ke.set(e,t,n)}else n=void 0;return n}function u(e,t,n,i){var r,a=1,s=20,o=i?function(){return i.cur()}:function(){return ae.css(e,t,"")},l=o(),u=n&&n[3]||(ae.cssNumber[t]?"":"px"),c=(ae.cssNumber[t]||"px"!==u&&+l)&&Ne.exec(ae.css(e,t));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do a=a||".5",c/=a,ae.style(e,t,c+u);while(a!==(a=o()/l)&&1!==a&&--s)}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}function c(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&ae.nodeName(e,t)?ae.merge([e],n):n}function f(e,t){for(var n=0,i=e.length;n<i;n++)Ae.set(e[n],"globalEval",!t||Ae.get(t[n],"globalEval"))}function d(e,t,n,i,r){for(var a,s,o,l,u,d,p=t.createDocumentFragment(),h=[],g=0,y=e.length;g<y;g++)if(a=e[g],a||0===a)if("object"===ae.type(a))ae.merge(h,a.nodeType?[a]:a);else if(Fe.test(a)){for(s=s||p.appendChild(t.createElement("div")),o=(Le.exec(a)||["",""])[1].toLowerCase(),l=Pe[o]||Pe._default,s.innerHTML=l[1]+ae.htmlPrefilter(a)+l[2],d=l[0];d--;)s=s.lastChild;ae.merge(h,s.childNodes),s=p.firstChild,s.textContent=""}else h.push(t.createTextNode(a));for(p.textContent="",g=0;a=h[g++];)if(i&&ae.inArray(a,i)>-1)r&&r.push(a);else if(u=ae.contains(a.ownerDocument,a),s=c(p.appendChild(a),"script"),u&&f(s),n)for(d=0;a=s[d++];)Oe.test(a.type||"")&&n.push(a);return p}function p(){return!0}function h(){return!1}function g(){try{return W.activeElement}catch(e){}}function y(e,t,n,i,r,a){var s,o;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(o in t)y(e,o,n,i,t[o],a);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=h;else if(!r)return e;return 1===a&&(s=r,r=function(e){return ae().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=ae.guid++)),e.each(function(){ae.event.add(this,t,r,i,n)})}function m(e,t){return ae.nodeName(e,"table")&&ae.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function v(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function C(e){var t=qe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function b(e,t){var n,i,r,a,s,o,l,u;if(1===t.nodeType){if(Ae.hasData(e)&&(a=Ae.access(e),s=Ae.set(t,a),u=a.events)){delete s.handle,s.events={};for(r in u)for(n=0,i=u[r].length;n<i;n++)ae.event.add(t,r,u[r][n])}ke.hasData(e)&&(o=ke.access(e),l=ae.extend({},o),ke.set(t,l))}}function E(e,t){var n=t.nodeName.toLowerCase();"input"===n&&De.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function S(e,t,n,i){t=Y.apply([],t);var r,a,s,o,l,u,f=0,p=e.length,h=p-1,g=t[0],y=ae.isFunction(g);if(y||p>1&&"string"==typeof g&&!ie.checkClone&&je.test(g))return e.each(function(r){var a=e.eq(r);y&&(t[0]=g.call(this,r,a.html())),S(a,t,n,i)});if(p&&(r=d(t,e[0].ownerDocument,!1,e,i),a=r.firstChild,1===r.childNodes.length&&(r=a),a||i)){for(s=ae.map(c(r,"script"),v),o=s.length;f<p;f++)l=r,f!==h&&(l=ae.clone(l,!0,!0),o&&ae.merge(s,c(l,"script"))),n.call(e[f],l,f);if(o)for(u=s[s.length-1].ownerDocument,ae.map(s,C),f=0;f<o;f++)l=s[f],Oe.test(l.type||"")&&!Ae.access(l,"globalEval")&&ae.contains(u,l)&&(l.src?ae._evalUrl&&ae._evalUrl(l.src):ae.globalEval(l.textContent.replace(He,"")))}return e}function T(e,t,n){for(var i,r=t?ae.filter(t,e):e,a=0;null!=(i=r[a]);a++)n||1!==i.nodeType||ae.cleanData(c(i)),i.parentNode&&(n&&ae.contains(i.ownerDocument,i)&&f(c(i,"script")),i.parentNode.removeChild(i));return e}function w(e,t){var n=ae(t.createElement(e)).appendTo(t.body),i=ae.css(n[0],"display");return n.detach(),i}function A(e){var t=W,n=Qe[e];return n||(n=w(e,t),"none"!==n&&n||(Ke=(Ke||ae("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ke[0].contentDocument,t.write(),t.close(),n=w(e,t),Ke.detach()),Qe[e]=n),n}function k(e,t,n){var i,r,a,s,o=e.style;return n=n||Xe(e),s=n?n.getPropertyValue(t)||n[t]:void 0,""!==s&&void 0!==s||ae.contains(e.ownerDocument,e)||(s=ae.style(e,t)),n&&!ie.pixelMarginRight()&&We.test(s)&&Ge.test(t)&&(i=o.width,r=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=i,o.minWidth=r,o.maxWidth=a),void 0!==s?s+"":s}function I(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function B(e){if(e in it)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if(e=nt[n]+t,e in it)return e}function _(e,t,n){var i=Ne.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function N(e,t,n,i,r){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,s=0;a<4;a+=2)"margin"===n&&(s+=ae.css(e,n+Re[a],!0,r)),i?("content"===n&&(s-=ae.css(e,"padding"+Re[a],!0,r)),"margin"!==n&&(s-=ae.css(e,"border"+Re[a]+"Width",!0,r))):(s+=ae.css(e,"padding"+Re[a],!0,r),"padding"!==n&&(s+=ae.css(e,"border"+Re[a]+"Width",!0,r)));return s}function R(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=Xe(e),s="border-box"===ae.css(e,"boxSizing",!1,a);if(r<=0||null==r){if(r=k(e,t,a),(r<0||null==r)&&(r=e.style[t]),We.test(r))return r;i=s&&(ie.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+N(e,t,n||(s?"border":"content"),i,a)+"px"}function x(e,t){for(var n,i,r,a=[],s=0,o=e.length;s<o;s++)i=e[s],i.style&&(a[s]=Ae.get(i,"olddisplay"),n=i.style.display,t?(a[s]||"none"!==n||(i.style.display=""),""===i.style.display&&xe(i)&&(a[s]=Ae.access(i,"olddisplay",A(i.nodeName)))):(r=xe(i),"none"===n&&r||Ae.set(i,"olddisplay",r?n:ae.css(i,"display"))));for(s=0;s<o;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[s]||"":"none"));return e}function D(e,t,n,i,r){return new D.prototype.init(e,t,n,i,r)}function L(){return e.setTimeout(function(){rt=void 0}),rt=ae.now()}function O(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)n=Re[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function P(e,t,n){for(var i,r=($.tweeners[t]||[]).concat($.tweeners["*"]),a=0,s=r.length;a<s;a++)if(i=r[a].call(n,t,e))return i}function F(e,t,n){var i,r,a,s,o,l,u,c,f=this,d={},p=e.style,h=e.nodeType&&xe(e),g=Ae.get(e,"fxshow");n.queue||(o=ae._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,ae.queue(e,"fx").length||o.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=ae.css(e,"display"),c="none"===u?Ae.get(e,"olddisplay")||A(e.nodeName):u,"inline"===c&&"none"===ae.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],st.exec(r)){if(delete t[i],a=a||"toggle"===r,r===(h?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;h=!0}d[i]=g&&g[i]||ae.style(e,i)}else u=void 0;if(ae.isEmptyObject(d))"inline"===("none"===u?A(e.nodeName):u)&&(p.display=u);else{g?"hidden"in g&&(h=g.hidden):g=Ae.access(e,"fxshow",{}),a&&(g.hidden=!h),h?ae(e).show():f.done(function(){ae(e).hide()}),f.done(function(){var t;Ae.remove(e,"fxshow");for(t in d)ae.style(e,t,d[t])});for(i in d)s=P(h?g[i]:0,i,f),i in g||(g[i]=s.start,h&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function U(e,t){var n,i,r,a,s;for(n in e)if(i=ae.camelCase(n),r=t[i],a=e[n],ae.isArray(a)&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),s=ae.cssHooks[i],s&&"expand"in s){a=s.expand(a),delete e[i];for(n in a)n in e||(e[n]=a[n],t[n]=r)}else t[i]=r}function $(e,t,n){var i,r,a=0,s=$.prefilters.length,o=ae.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=rt||L(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,a=1-i,s=0,l=u.tweens.length;s<l;s++)u.tweens[s].run(a);return o.notifyWith(e,[u,a,n]),a<1&&l?n:(o.resolveWith(e,[u]),!1)},u=o.promise({elem:e,props:ae.extend({},t),opts:ae.extend(!0,{specialEasing:{},easing:ae.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||L(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ae.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return t?(o.notifyWith(e,[u,1,0]),o.resolveWith(e,[u,t])):o.rejectWith(e,[u,t]),this}}),c=u.props;for(U(c,u.opts.specialEasing);a<s;a++)if(i=$.prefilters[a].call(u,e,c,u.opts))return ae.isFunction(i.stop)&&(ae._queueHooks(u.elem,u.opts.queue).stop=ae.proxy(i.stop,i)),i;return ae.map(c,P,u),ae.isFunction(u.opts.start)&&u.opts.start.call(e,u),ae.fx.timer(ae.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function z(e){return e.getAttribute&&e.getAttribute("class")||""}function V(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,a=t.toLowerCase().match(Ee)||[];if(ae.isFunction(n))for(;i=a[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function M(e,t,n,i){function r(o){var l;return a[o]=!0,ae.each(e[o]||[],function(e,o){var u=o(t,n,i);return"string"!=typeof u||s||a[u]?s?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),l}var a={},s=e===kt;return r(t.dataTypes[0])||!a["*"]&&r("*")}function j(e,t){var n,i,r=ae.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&ae.extend(!0,e,i),e}function q(e,t,n){for(var i,r,a,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){l.unshift(r);break}if(l[0]in n)a=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}s||(s=r)}a=a||s}if(a)return a!==l[0]&&l.unshift(a),n[a]}function H(e,t,n,i){var r,a,s,o,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(s=u[l+" "+a]||u["* "+a],!s)for(r in u)if(o=r.split(" "),o[1]===a&&(s=u[l+" "+o[0]]||u["* "+o[0]])){s===!0?s=u[r]:u[r]!==!0&&(a=o[0],c.unshift(o[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(f){return{state:"parsererror",error:s?f:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}function K(e,t,n,i){var r;if(ae.isArray(t))ae.each(t,function(t,r){n||Nt.test(e)?i(e,r):K(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==ae.type(t))i(e,t);else for(r in t)K(e+"["+r+"]",t[r],n,i)}function Q(e){return ae.isWindow(e)?e:9===e.nodeType&&e.defaultView}var G=[],W=e.document,X=G.slice,Y=G.concat,Z=G.push,J=G.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,ie={},re="2.2.4",ae=function(e,t){return new ae.fn.init(e,t)},se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oe=/^-ms-/,le=/-([\da-z])/gi,ue=function(e,t){return t.toUpperCase()};ae.fn=ae.prototype={jquery:re,constructor:ae,selector:"",length:0,toArray:function(){return X.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:X.call(this)},pushStack:function(e){var t=ae.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return ae.each(this,e)},map:function(e){return this.pushStack(ae.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Z,sort:G.sort,splice:G.splice},ae.extend=ae.fn.extend=function(){var e,t,n,i,r,a,s=arguments[0]||{},o=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[o]||{},o++),"object"==typeof s||ae.isFunction(s)||(s={}),o===l&&(s=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(t in e)n=s[t],i=e[t],s!==i&&(u&&i&&(ae.isPlainObject(i)||(r=ae.isArray(i)))?(r?(r=!1,a=n&&ae.isArray(n)?n:[]):a=n&&ae.isPlainObject(n)?n:{},s[t]=ae.extend(u,a,i)):void 0!==i&&(s[t]=i));return s},ae.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ae.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!ae.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==ae.type(e)||e.nodeType||ae.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=ae.trim(e),e&&(1===e.indexOf("use strict")?(t=W.createElement("script"),t.text=e,W.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(oe,"ms-").replace(le,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,r=0;if(n(e))for(i=e.length;r<i&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(se,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?ae.merge(i,"string"==typeof e?[e]:e):Z.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:J.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],a=0,s=e.length,o=!n;a<s;a++)i=!t(e[a],a),i!==o&&r.push(e[a]);return r},map:function(e,t,i){var r,a,s=0,o=[];if(n(e))for(r=e.length;s<r;s++)a=t(e[s],s,i),null!=a&&o.push(a);else for(s in e)a=t(e[s],s,i),null!=a&&o.push(a);return Y.apply([],o)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),ae.isFunction(e))return i=X.call(arguments,2),r=function(){return e.apply(t||this,i.concat(X.call(arguments)))},r.guid=e.guid=e.guid||ae.guid++,r},now:Date.now,support:ie}),"function"==typeof Symbol&&(ae.fn[Symbol.iterator]=G[Symbol.iterator]),ae.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,i){var r,a,s,o,l,u,f,p,h=t&&t.ownerDocument,g=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return n;if(!i&&((t?t.ownerDocument||t:z)!==x&&R(t),t=t||x,L)){if(11!==g&&(u=me.exec(e)))if(r=u[1]){if(9===g){if(!(s=t.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(h&&(s=h.getElementById(r))&&U(t,s)&&s.id===r)return n.push(s),n}else{if(u[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((r=u[3])&&E.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(r)),n}if(E.qsa&&!H[e+" "]&&(!O||!O.test(e))){if(1!==g)h=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((o=t.getAttribute("id"))?o=o.replace(Ce,"\\$&"):t.setAttribute("id",o=$),f=A(e),a=f.length,l=de.test(o)?"#"+o:"[id='"+o+"']";a--;)f[a]=l+" "+d(f[a]);p=f.join(","),h=ve.test(e)&&c(t.parentNode)||t}if(p)try{return Z.apply(n,h.querySelectorAll(p)),n}catch(y){}finally{o===$&&t.removeAttribute("id")}}}return I(e.replace(oe,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>S.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[$]=!0,e}function r(e){var t=x.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),i=n.length;i--;)S.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Q)-(~e.sourceIndex||Q);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function o(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,i){for(var r,a=e([],n.length,t),s=a.length;s--;)n[r=a[s]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function d(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,r=n&&"parentNode"===i,a=M++;return t.first?function(t,n,a){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,a)}:function(t,n,s){var o,l,u,c=[V,a];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(u=t[$]||(t[$]={}),l=u[t.uniqueID]||(u[t.uniqueID]={}),(o=l[i])&&o[0]===V&&o[1]===a)return c[2]=o[2];if(l[i]=c,c[2]=e(t,n,s))return!0}}}function h(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function g(e,n,i){for(var r=0,a=n.length;r<a;r++)t(e,n[r],i);return i}function y(e,t,n,i,r){for(var a,s=[],o=0,l=e.length,u=null!=t;o<l;o++)(a=e[o])&&(n&&!n(a,i,r)||(s.push(a),u&&t.push(o)));return s}function m(e,t,n,r,a,s){return r&&!r[$]&&(r=m(r)),a&&!a[$]&&(a=m(a,s)),i(function(i,s,o,l){var u,c,f,d=[],p=[],h=s.length,m=i||g(t||"*",o.nodeType?[o]:o,[]),v=!e||!i&&t?m:y(m,d,e,o,l),C=n?a||(i?e:h||r)?[]:s:v;if(n&&n(v,C,o,l),r)for(u=y(C,p),r(u,[],o,l),c=u.length;c--;)(f=u[c])&&(C[p[c]]=!(v[p[c]]=f));if(i){if(a||e){if(a){for(u=[],c=C.length;c--;)(f=C[c])&&u.push(v[c]=f);a(null,C=[],u,l)}for(c=C.length;c--;)(f=C[c])&&(u=a?ee(i,f):d[c])>-1&&(i[u]=!(s[u]=f))}}else C=y(C===s?C.splice(h,C.length):C),a?a(null,s,C,l):Z.apply(s,C)})}function v(e){for(var t,n,i,r=e.length,a=S.relative[e[0].type],s=a||S.relative[" "],o=a?1:0,l=p(function(e){return e===t},s,!0),u=p(function(e){return ee(t,e)>-1},s,!0),c=[function(e,n,i){var r=!a&&(i||n!==B)||((t=n).nodeType?l(e,n,i):u(e,n,i));return t=null,r}];o<r;o++)if(n=S.relative[e[o].type])c=[p(h(c),n)];else{if(n=S.filter[e[o].type].apply(null,e[o].matches),n[$]){for(i=++o;i<r&&!S.relative[e[i].type];i++);return m(o>1&&h(c),o>1&&d(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(oe,"$1"),n,o<i&&v(e.slice(o,i)),i<r&&v(e=e.slice(i)),i<r&&d(e))}c.push(n)}return h(c)}function C(e,n){var r=n.length>0,a=e.length>0,s=function(i,s,o,l,u){var c,f,d,p=0,h="0",g=i&&[],m=[],v=B,C=i||a&&S.find.TAG("*",u),b=V+=null==v?1:Math.random()||.1,E=C.length;for(u&&(B=s===x||s||u);h!==E&&null!=(c=C[h]);h++){if(a&&c){for(f=0,s||c.ownerDocument===x||(R(c),o=!L);d=e[f++];)if(d(c,s||x,o)){l.push(c);break}u&&(V=b)}r&&((c=!d&&c)&&p--,i&&g.push(c))}if(p+=h,r&&h!==p){for(f=0;d=n[f++];)d(g,m,s,o);if(i){if(p>0)for(;h--;)g[h]||m[h]||(m[h]=X.call(l));m=y(m)}Z.apply(l,m),u&&!i&&m.length>0&&p+n.length>1&&t.uniqueSort(l)}return u&&(V=b,B=v),g};return r?i(s):s}var b,E,S,T,w,A,k,I,B,_,N,R,x,D,L,O,P,F,U,$="sizzle"+1*new Date,z=e.document,V=0,M=0,j=n(),q=n(),H=n(),K=function(e,t){return e===t&&(N=!0),0},Q=1<<31,G={}.hasOwnProperty,W=[],X=W.pop,Y=W.push,Z=W.push,J=W.slice,ee=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",ae=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),oe=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(ae),de=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ye=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,Ce=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Ee=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Se=function(){R()};try{Z.apply(W=J.call(z.childNodes),z.childNodes),W[z.childNodes.length].nodeType}catch(Te){Z={apply:W.length?function(e,t){Y.apply(e,J.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}E=t.support={},w=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},R=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:z;return i!==x&&9===i.nodeType&&i.documentElement?(x=i,D=x.documentElement,L=!w(x),(n=x.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Se,!1):n.attachEvent&&n.attachEvent("onunload",Se)),E.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),E.getElementsByTagName=r(function(e){return e.appendChild(x.createComment("")),!e.getElementsByTagName("*").length}),E.getElementsByClassName=ye.test(x.getElementsByClassName),E.getById=r(function(e){return D.appendChild(e).id=$,!x.getElementsByName||!x.getElementsByName($).length}),E.getById?(S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var n=t.getElementById(e);return n?[n]:[]}},S.filter.ID=function(e){var t=e.replace(be,Ee);return function(e){return e.getAttribute("id")===t}}):(delete S.find.ID,S.filter.ID=function(e){var t=e.replace(be,Ee);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),S.find.TAG=E.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):E.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},S.find.CLASS=E.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&L)return t.getElementsByClassName(e)},P=[],O=[],(E.qsa=ye.test(x.querySelectorAll))&&(r(function(e){D.appendChild(e).innerHTML="<a id='"+$+"'></a><select id='"+$+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+$+"-]").length||O.push("~="),e.querySelectorAll(":checked").length||O.push(":checked"),e.querySelectorAll("a#"+$+"+*").length||O.push(".#.+[+~]")}),r(function(e){var t=x.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(E.matchesSelector=ye.test(F=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&r(function(e){E.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),P.push("!=",ae)}),O=O.length&&new RegExp(O.join("|")),P=P.length&&new RegExp(P.join("|")),t=ye.test(D.compareDocumentPosition),U=t||ye.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},K=t?function(e,t){if(e===t)return N=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!E.sortDetached&&t.compareDocumentPosition(e)===n?e===x||e.ownerDocument===z&&U(z,e)?-1:t===x||t.ownerDocument===z&&U(z,t)?1:_?ee(_,e)-ee(_,t):0:4&n?-1:1)}:function(e,t){if(e===t)return N=!0,0;var n,i=0,r=e.parentNode,a=t.parentNode,o=[e],l=[t];if(!r||!a)return e===x?-1:t===x?1:r?-1:a?1:_?ee(_,e)-ee(_,t):0;if(r===a)return s(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;o[i]===l[i];)i++;return i?s(o[i],l[i]):o[i]===z?-1:l[i]===z?1:0},x):x},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==x&&R(e),n=n.replace(ce,"='$1']"),E.matchesSelector&&L&&!H[n+" "]&&(!P||!P.test(n))&&(!O||!O.test(n)))try{var i=F.call(e,n);if(i||E.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,x,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==x&&R(e),U(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==x&&R(e);var n=S.attrHandle[t.toLowerCase()],i=n&&G.call(S.attrHandle,t.toLowerCase())?n(e,t,!L):void 0;return void 0!==i?i:E.attributes||!L?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(N=!E.detectDuplicates,_=!E.sortStable&&e.slice(0),e.sort(K),N){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return _=null,e},T=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=T(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=T(t);return n},S=t.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,Ee),e[3]=(e[3]||e[4]||e[5]||"").replace(be,Ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=A(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,Ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var a=t.attr(r,e);return null==a?"!="===n:!n||(a+="","="===n?a===i:"!="===n?a!==i:"^="===n?i&&0===a.indexOf(i):"*="===n?i&&a.indexOf(i)>-1:"$="===n?i&&a.slice(-i.length)===i:"~="===n?(" "+a.replace(se," ")+" ").indexOf(i)>-1:"|="===n&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,f,d,p,h,g=a!==s?"nextSibling":"previousSibling",y=t.parentNode,m=o&&t.nodeName.toLowerCase(),v=!l&&!o,C=!1;if(y){if(a){for(;g;){for(d=t;d=d[g];)if(o?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?y.firstChild:y.lastChild],s&&v){for(d=y,f=d[$]||(d[$]={}),c=f[d.uniqueID]||(f[d.uniqueID]={}),u=c[e]||[],p=u[0]===V&&u[1],C=p&&u[2],d=p&&y.childNodes[p];d=++p&&d&&d[g]||(C=p=0)||h.pop();)if(1===d.nodeType&&++C&&d===t){c[e]=[V,p,C];break}}else if(v&&(d=t,f=d[$]||(d[$]={}),c=f[d.uniqueID]||(f[d.uniqueID]={}),u=c[e]||[],p=u[0]===V&&u[1],C=p),C===!1)for(;(d=++p&&d&&d[g]||(C=p=0)||h.pop())&&((o?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++C||(v&&(f=d[$]||(d[$]={}),c=f[d.uniqueID]||(f[d.uniqueID]={}),c[e]=[V,C]),d!==t)););return C-=r,C===i||C%i===0&&C/i>=0}}},PSEUDO:function(e,n){var r,a=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);
return a[$]?a(n):a.length>1?(r=[e,e,"",n],S.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=a(e,n),s=r.length;s--;)i=ee(e,r[s]),e[i]=!(t[i]=r[s])}):function(e){return a(e,0,r)}):a}},pseudos:{not:i(function(e){var t=[],n=[],r=k(e.replace(oe,"$1"));return r[$]?i(function(e,t,n,i){for(var a,s=r(e,null,i,[]),o=e.length;o--;)(a=s[o])&&(e[o]=!(t[o]=a))}):function(e,i,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(be,Ee),function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:i(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,Ee).toLowerCase(),function(t){var n;do if(n=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[n<0?n+t:n]}),even:u(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},S.pseudos.nth=S.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[b]=o(b);for(b in{submit:!0,reset:!0})S.pseudos[b]=l(b);return f.prototype=S.filters=S.pseudos,S.setFilters=new f,A=t.tokenize=function(e,n){var i,r,a,s,o,l,u,c=q[e+" "];if(c)return n?0:c.slice(0);for(o=e,l=[],u=S.preFilter;o;){i&&!(r=le.exec(o))||(r&&(o=o.slice(r[0].length)||o),l.push(a=[])),i=!1,(r=ue.exec(o))&&(i=r.shift(),a.push({value:i,type:r[0].replace(oe," ")}),o=o.slice(i.length));for(s in S.filter)!(r=pe[s].exec(o))||u[s]&&!(r=u[s](r))||(i=r.shift(),a.push({value:i,type:s,matches:r}),o=o.slice(i.length));if(!i)break}return n?o.length:o?t.error(e):q(e,l).slice(0)},k=t.compile=function(e,t){var n,i=[],r=[],a=H[e+" "];if(!a){for(t||(t=A(e)),n=t.length;n--;)a=v(t[n]),a[$]?i.push(a):r.push(a);a=H(e,C(r,i)),a.selector=e}return a},I=t.select=function(e,t,n,i){var r,a,s,o,l,u="function"==typeof e&&e,f=!i&&A(e=u.selector||e);if(n=n||[],1===f.length){if(a=f[0]=f[0].slice(0),a.length>2&&"ID"===(s=a[0]).type&&E.getById&&9===t.nodeType&&L&&S.relative[a[1].type]){if(t=(S.find.ID(s.matches[0].replace(be,Ee),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(r=pe.needsContext.test(e)?0:a.length;r--&&(s=a[r],!S.relative[o=s.type]);)if((l=S.find[o])&&(i=l(s.matches[0].replace(be,Ee),ve.test(a[0].type)&&c(t.parentNode)||t))){if(a.splice(r,1),e=i.length&&d(a),!e)return Z.apply(n,i),n;break}}return(u||k(e,f))(i,t,!L,n,!t||ve.test(e)&&c(t.parentNode)||t),n},E.sortStable=$.split("").sort(K).join("")===$,E.detectDuplicates=!!N,R(),E.sortDetached=r(function(e){return 1&e.compareDocumentPosition(x.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),E.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||a(te,function(e,t,n){var i;if(!n)return e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);ae.find=ce,ae.expr=ce.selectors,ae.expr[":"]=ae.expr.pseudos,ae.uniqueSort=ae.unique=ce.uniqueSort,ae.text=ce.getText,ae.isXMLDoc=ce.isXML,ae.contains=ce.contains;var fe=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&ae(e).is(n))break;i.push(e)}return i},de=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},pe=ae.expr.match.needsContext,he=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ge=/^.[^:#\[\.,]*$/;ae.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ae.find.matchesSelector(i,e)?[i]:[]:ae.find.matches(e,ae.grep(t,function(e){return 1===e.nodeType}))},ae.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(ae(e).filter(function(){for(t=0;t<n;t++)if(ae.contains(r[t],this))return!0}));for(t=0;t<n;t++)ae.find(e,r[t],i);return i=this.pushStack(n>1?ae.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&pe.test(e)?ae(e):e||[],!1).length}});var ye,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ve=ae.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||ye,"string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:me.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof ae?t[0]:t,ae.merge(this,ae.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:W,!0)),he.test(i[1])&&ae.isPlainObject(t))for(i in t)ae.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return r=W.getElementById(i[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=W,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ae.isFunction(e)?void 0!==n.ready?n.ready(e):e(ae):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ae.makeArray(e,this))};ve.prototype=ae.fn,ye=ae(W);var Ce=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};ae.fn.extend({has:function(e){var t=ae(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ae.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,a=[],s=pe.test(e)||"string"!=typeof e?ae(e,t||this.context):0;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&ae.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?ae.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?J.call(ae(e),this[0]):J.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ae.uniqueSort(ae.merge(this.get(),ae(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ae.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return fe(e,"parentNode")},parentsUntil:function(e,t,n){return fe(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return fe(e,"nextSibling")},prevAll:function(e){return fe(e,"previousSibling")},nextUntil:function(e,t,n){return fe(e,"nextSibling",n)},prevUntil:function(e,t,n){return fe(e,"previousSibling",n)},siblings:function(e){return de((e.parentNode||{}).firstChild,e)},children:function(e){return de(e.firstChild)},contents:function(e){return e.contentDocument||ae.merge([],e.childNodes)}},function(e,t){ae.fn[e]=function(n,i){var r=ae.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=ae.filter(i,r)),this.length>1&&(be[e]||ae.uniqueSort(r),Ce.test(e)&&r.reverse()),this.pushStack(r)}});var Ee=/\S+/g;ae.Callbacks=function(e){e="string"==typeof e?a(e):ae.extend({},e);var t,n,i,r,s=[],o=[],l=-1,u=function(){for(r=e.once,i=t=!0;o.length;l=-1)for(n=o.shift();++l<s.length;)s[l].apply(n[0],n[1])===!1&&e.stopOnFalse&&(l=s.length,n=!1);e.memory||(n=!1),t=!1,r&&(s=n?[]:"")},c={add:function(){return s&&(n&&!t&&(l=s.length-1,o.push(n)),function i(t){ae.each(t,function(t,n){ae.isFunction(n)?e.unique&&c.has(n)||s.push(n):n&&n.length&&"string"!==ae.type(n)&&i(n)})}(arguments),n&&!t&&u()),this},remove:function(){return ae.each(arguments,function(e,t){for(var n;(n=ae.inArray(t,s,n))>-1;)s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?ae.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=o=[],n||(s=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=n||[],n=[e,n.slice?n.slice():n],o.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},ae.extend({Deferred:function(e){var t=[["resolve","done",ae.Callbacks("once memory"),"resolved"],["reject","fail",ae.Callbacks("once memory"),"rejected"],["notify","progress",ae.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ae.Deferred(function(n){ae.each(t,function(t,a){var s=ae.isFunction(e[t])&&e[t];r[a[1]](function(){var e=s&&s.apply(this,arguments);e&&ae.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[a[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ae.extend(e,i):i}},r={};return i.pipe=i.then,ae.each(t,function(e,a){var s=a[2],o=a[3];i[a[1]]=s.add,o&&s.add(function(){n=o},t[1^e][2].disable,t[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?i:this,arguments),this},r[a[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,a=X.call(arguments),s=a.length,o=1!==s||e&&ae.isFunction(e.promise)?s:0,l=1===o?e:ae.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?X.call(arguments):r,i===t?l.notifyWith(n,i):--o||l.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);r<s;r++)a[r]&&ae.isFunction(a[r].promise)?a[r].promise().progress(u(r,n,t)).done(u(r,i,a)).fail(l.reject):--o;return o||l.resolveWith(i,a),l.promise()}});var Se;ae.fn.ready=function(e){return ae.ready.promise().done(e),this},ae.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ae.readyWait++:ae.ready(!0)},ready:function(e){(e===!0?--ae.readyWait:ae.isReady)||(ae.isReady=!0,e!==!0&&--ae.readyWait>0||(Se.resolveWith(W,[ae]),ae.fn.triggerHandler&&(ae(W).triggerHandler("ready"),ae(W).off("ready"))))}}),ae.ready.promise=function(t){return Se||(Se=ae.Deferred(),"complete"===W.readyState||"loading"!==W.readyState&&!W.documentElement.doScroll?e.setTimeout(ae.ready):(W.addEventListener("DOMContentLoaded",s),e.addEventListener("load",s))),Se.promise(t)},ae.ready.promise();var Te=function(e,t,n,i,r,a,s){var o=0,l=e.length,u=null==n;if("object"===ae.type(n)){r=!0;for(o in n)Te(e,t,o,n[o],!0,a,s)}else if(void 0!==i&&(r=!0,ae.isFunction(i)||(s=!0),u&&(s?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(ae(e),n)})),t))for(;o<l;o++)t(e[o],n,s?i:i.call(e[o],o,t(e[o],n)));return r?e:u?t.call(e):l?t(e[0],n):a},we=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};o.uid=1,o.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!we(e))return{};var t=e[this.expando];return t||(t={},we(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[t]=n;else for(i in t)r[i]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,ae.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,a=e[this.expando];if(void 0!==a){if(void 0===t)this.register(e);else{ae.isArray(t)?i=t.concat(t.map(ae.camelCase)):(r=ae.camelCase(t),t in a?i=[t,r]:(i=r,i=i in a?[i]:i.match(Ee)||[])),n=i.length;for(;n--;)delete a[i[n]]}(void 0===t||ae.isEmptyObject(a))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ae.isEmptyObject(t)}};var Ae=new o,ke=new o,Ie=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Be=/[A-Z]/g;ae.extend({hasData:function(e){return ke.hasData(e)||Ae.hasData(e)},data:function(e,t,n){return ke.access(e,t,n)},removeData:function(e,t){ke.remove(e,t)},_data:function(e,t,n){return Ae.access(e,t,n)},_removeData:function(e,t){Ae.remove(e,t)}}),ae.fn.extend({data:function(e,t){var n,i,r,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(r=ke.get(a),1===a.nodeType&&!Ae.get(a,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=ae.camelCase(i.slice(5)),l(a,i,r[i])));Ae.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ke.set(this,e)}):Te(this,function(t){var n,i;if(a&&void 0===t){if(n=ke.get(a,e)||ke.get(a,e.replace(Be,"-$&").toLowerCase()),void 0!==n)return n;if(i=ae.camelCase(e),n=ke.get(a,i),void 0!==n)return n;if(n=l(a,i,void 0),void 0!==n)return n}else i=ae.camelCase(e),this.each(function(){var n=ke.get(this,i);ke.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&ke.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ke.remove(this,e)})}}),ae.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Ae.get(e,t),n&&(!i||ae.isArray(n)?i=Ae.access(e,t,ae.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=ae.queue(e,t),i=n.length,r=n.shift(),a=ae._queueHooks(e,t),s=function(){ae.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,s,a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Ae.get(e,n)||Ae.access(e,n,{empty:ae.Callbacks("once memory").add(function(){Ae.remove(e,[t+"queue",n])})})}}),ae.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ae.queue(this[0],e):void 0===t?this:this.each(function(){var n=ae.queue(this,e,t);ae._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ae.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ae.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=ae.Deferred(),a=this,s=this.length,o=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=Ae.get(a[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(t)}});var _e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ne=new RegExp("^(?:([+-])=|)("+_e+")([a-z%]*)$","i"),Re=["Top","Right","Bottom","Left"],xe=function(e,t){return e=t||e,"none"===ae.css(e,"display")||!ae.contains(e.ownerDocument,e)},De=/^(?:checkbox|radio)$/i,Le=/<([\w:-]+)/,Oe=/^$|\/(?:java|ecma)script/i,Pe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pe.optgroup=Pe.option,Pe.tbody=Pe.tfoot=Pe.colgroup=Pe.caption=Pe.thead,Pe.th=Pe.td;var Fe=/<|&#?\w+;/;!function(){var e=W.createDocumentFragment(),t=e.appendChild(W.createElement("div")),n=W.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ue=/^key/,$e=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ze=/^([^.]*)(?:\.(.+)|)/;ae.event={global:{},add:function(e,t,n,i,r){var a,s,o,l,u,c,f,d,p,h,g,y=Ae.get(e);if(y)for(n.handler&&(a=n,n=a.handler,r=a.selector),n.guid||(n.guid=ae.guid++),(l=y.events)||(l=y.events={}),(s=y.handle)||(s=y.handle=function(t){return"undefined"!=typeof ae&&ae.event.triggered!==t.type?ae.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Ee)||[""],u=t.length;u--;)o=ze.exec(t[u])||[],p=g=o[1],h=(o[2]||"").split(".").sort(),p&&(f=ae.event.special[p]||{},p=(r?f.delegateType:f.bindType)||p,f=ae.event.special[p]||{},c=ae.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&ae.expr.match.needsContext.test(r),namespace:h.join(".")},a),(d=l[p])||(d=l[p]=[],d.delegateCount=0,f.setup&&f.setup.call(e,i,h,s)!==!1||e.addEventListener&&e.addEventListener(p,s)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),ae.event.global[p]=!0)},remove:function(e,t,n,i,r){var a,s,o,l,u,c,f,d,p,h,g,y=Ae.hasData(e)&&Ae.get(e);if(y&&(l=y.events)){for(t=(t||"").match(Ee)||[""],u=t.length;u--;)if(o=ze.exec(t[u])||[],p=g=o[1],h=(o[2]||"").split(".").sort(),p){for(f=ae.event.special[p]||{},p=(i?f.delegateType:f.bindType)||p,d=l[p]||[],o=o[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=d.length;a--;)c=d[a],!r&&g!==c.origType||n&&n.guid!==c.guid||o&&!o.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(e,c));s&&!d.length&&(f.teardown&&f.teardown.call(e,h,y.handle)!==!1||ae.removeEvent(e,p,y.handle),delete l[p])}else for(p in l)ae.event.remove(e,p+t[u],n,i,!0);ae.isEmptyObject(l)&&Ae.remove(e,"handle events")}},dispatch:function(e){e=ae.event.fix(e);var t,n,i,r,a,s=[],o=X.call(arguments),l=(Ae.get(this,"events")||{})[e.type]||[],u=ae.event.special[e.type]||{};if(o[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(s=ae.event.handlers.call(this,e,l),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(a.namespace)||(e.handleObj=a,e.data=a.data,i=((ae.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,o),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,a,s=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(i=[],n=0;n<o;n++)a=t[n],r=a.selector+" ",void 0===i[r]&&(i[r]=a.needsContext?ae(r,this).index(l)>-1:ae.find(r,this,null,[l]).length),i[r]&&i.push(a);i.length&&s.push({elem:l,handlers:i})}return o<t.length&&s.push({elem:this,handlers:t.slice(o)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,a=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||W,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[ae.expando])return e;var t,n,i,r=e.type,a=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=$e.test(r)?this.mouseHooks:Ue.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new ae.Event(a),t=i.length;t--;)n=i[t],e[n]=a[n];return e.target||(e.target=W),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==g()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===g()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ae.nodeName(this,"input"))return this.click(),!1},_default:function(e){return ae.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ae.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ae.Event=function(e,t){return this instanceof ae.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?p:h):this.type=e,t&&ae.extend(this,t),this.timeStamp=e&&e.timeStamp||ae.now(),void(this[ae.expando]=!0)):new ae.Event(e,t)},ae.Event.prototype={constructor:ae.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=p,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ae.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ae.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,a=e.handleObj;return r&&(r===i||ae.contains(i,r))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),ae.fn.extend({on:function(e,t,n,i){return y(this,e,t,n,i)},one:function(e,t,n,i){return y(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ae(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=h),this.each(function(){ae.event.remove(this,e,n,t)})}});var Ve=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Me=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^true\/(.*)/,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ae.extend({htmlPrefilter:function(e){return e.replace(Ve,"<$1></$2>")},clone:function(e,t,n){var i,r,a,s,o=e.cloneNode(!0),l=ae.contains(e.ownerDocument,e);if(!(ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ae.isXMLDoc(e)))for(s=c(o),a=c(e),i=0,r=a.length;i<r;i++)E(a[i],s[i]);if(t)if(n)for(a=a||c(e),s=s||c(o),i=0,r=a.length;i<r;i++)b(a[i],s[i]);else b(e,o);return s=c(o,"script"),s.length>0&&f(s,!l&&c(e,"script")),o},cleanData:function(e){for(var t,n,i,r=ae.event.special,a=0;void 0!==(n=e[a]);a++)if(we(n)){if(t=n[Ae.expando]){if(t.events)for(i in t.events)r[i]?ae.event.remove(n,i):ae.removeEvent(n,i,t.handle);n[Ae.expando]=void 0}n[ke.expando]&&(n[ke.expando]=void 0)}}}),ae.fn.extend({domManip:S,detach:function(e){return T(this,e,!0)},remove:function(e){return T(this,e)},text:function(e){return Te(this,function(e){return void 0===e?ae.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return S(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=m(this,e);t.appendChild(e)}})},prepend:function(){return S(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=m(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return S(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return S(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ae.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ae.clone(this,e,t)})},html:function(e){return Te(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Me.test(e)&&!Pe[(Le.exec(e)||["",""])[1].toLowerCase()]){e=ae.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(ae.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return S(this,arguments,function(t){var n=this.parentNode;ae.inArray(this,e)<0&&(ae.cleanData(c(this)),n&&n.replaceChild(t,this))},e)}}),ae.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ae.fn[e]=function(e){for(var n,i=[],r=ae(e),a=r.length-1,s=0;s<=a;s++)n=s===a?this:this.clone(!0),ae(r[s])[t](n),Z.apply(i,n.get());return this.pushStack(i)}});var Ke,Qe={HTML:"block",BODY:"block"},Ge=/^margin/,We=new RegExp("^("+_e+")(?!px)[a-z%]+$","i"),Xe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ye=function(e,t,n,i){var r,a,s={};for(a in t)s[a]=e.style[a],e.style[a]=t[a];r=n.apply(e,i||[]);for(a in t)e.style[a]=s[a];return r},Ze=W.documentElement;!function(){function t(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",o.innerHTML="",Ze.appendChild(s);var t=e.getComputedStyle(o);n="1%"!==t.top,a="2px"===t.marginLeft,i="4px"===t.width,o.style.marginRight="50%",r="4px"===t.marginRight,Ze.removeChild(s)}var n,i,r,a,s=W.createElement("div"),o=W.createElement("div");o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===o.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(o),ae.extend(ie,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},pixelMarginRight:function(){return null==i&&t(),r},reliableMarginLeft:function(){return null==i&&t(),a},reliableMarginRight:function(){var t,n=o.appendChild(W.createElement("div"));return n.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",o.style.width="1px",Ze.appendChild(s),t=!parseFloat(e.getComputedStyle(n).marginRight),Ze.removeChild(s),o.removeChild(n),t}}))}();var Je=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","O","Moz","ms"],it=W.createElement("div").style;ae.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=k(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,o=ae.camelCase(t),l=e.style;return t=ae.cssProps[o]||(ae.cssProps[o]=B(o)||o),s=ae.cssHooks[t]||ae.cssHooks[o],void 0===n?s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:l[t]:(a=typeof n,"string"===a&&(r=Ne.exec(n))&&r[1]&&(n=u(e,t,r),a="number"),null!=n&&n===n&&("number"===a&&(n+=r&&r[3]||(ae.cssNumber[o]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l[t]=n)),void 0)}},css:function(e,t,n,i){var r,a,s,o=ae.camelCase(t);return t=ae.cssProps[o]||(ae.cssProps[o]=B(o)||o),s=ae.cssHooks[t]||ae.cssHooks[o],s&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=k(e,t,i)),"normal"===r&&t in tt&&(r=tt[t]),""===n||n?(a=parseFloat(r),n===!0||isFinite(a)?a||0:r):r}}),ae.each(["height","width"],function(e,t){ae.cssHooks[t]={get:function(e,n,i){if(n)return Je.test(ae.css(e,"display"))&&0===e.offsetWidth?Ye(e,et,function(){return R(e,t,i)}):R(e,t,i)},set:function(e,n,i){var r,a=i&&Xe(e),s=i&&N(e,t,i,"border-box"===ae.css(e,"boxSizing",!1,a),a);return s&&(r=Ne.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=ae.css(e,t)),_(e,n,s)}}}),ae.cssHooks.marginLeft=I(ie.reliableMarginLeft,function(e,t){if(t)return(parseFloat(k(e,"marginLeft"))||e.getBoundingClientRect().left-Ye(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ae.cssHooks.marginRight=I(ie.reliableMarginRight,function(e,t){if(t)return Ye(e,{display:"inline-block"},k,[e,"marginRight"])}),ae.each({margin:"",padding:"",border:"Width"},function(e,t){ae.cssHooks[e+t]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+Re[i]+t]=a[i]||a[i-2]||a[0];return r}},Ge.test(e)||(ae.cssHooks[e+t].set=_)}),ae.fn.extend({css:function(e,t){return Te(this,function(e,t,n){var i,r,a={},s=0;if(ae.isArray(t)){for(i=Xe(e),r=t.length;s<r;s++)a[t[s]]=ae.css(e,t[s],!1,i);return a}return void 0!==n?ae.style(e,t,n):ae.css(e,t)},e,t,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){xe(this)?ae(this).show():ae(this).hide()})}}),ae.Tween=D,D.prototype={constructor:D,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||ae.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(ae.cssNumber[n]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,n=D.propHooks[this.prop];return this.options.duration?this.pos=t=ae.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ae.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ae.fx.step[e.prop]?ae.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ae.cssProps[e.prop]]&&!ae.cssHooks[e.prop]?e.elem[e.prop]=e.now:ae.style(e.elem,e.prop,e.now+e.unit)}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ae.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ae.fx=D.prototype.init,ae.fx.step={};var rt,at,st=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;ae.Animation=ae.extend($,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return u(n.elem,e,Ne.exec(t),n),n}]},tweener:function(e,t){ae.isFunction(e)?(t=e,e=["*"]):e=e.match(Ee);for(var n,i=0,r=e.length;i<r;i++)n=e[i],$.tweeners[n]=$.tweeners[n]||[],$.tweeners[n].unshift(t)},prefilters:[F],prefilter:function(e,t){t?$.prefilters.unshift(e):$.prefilters.push(e)}}),ae.speed=function(e,t,n){var i=e&&"object"==typeof e?ae.extend({},e):{complete:n||!n&&t||ae.isFunction(e)&&e,
duration:e,easing:n&&t||t&&!ae.isFunction(t)&&t};return i.duration=ae.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ae.fx.speeds?ae.fx.speeds[i.duration]:ae.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){ae.isFunction(i.old)&&i.old.call(this),i.queue&&ae.dequeue(this,i.queue)},i},ae.fn.extend({fadeTo:function(e,t,n,i){return this.filter(xe).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=ae.isEmptyObject(e),a=ae.speed(t,n,i),s=function(){var t=$(this,ae.extend({},e),a);(r||Ae.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||a.queue===!1?this.each(s):this.queue(a.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=ae.timers,s=Ae.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&ot.test(r)&&i(s[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(n),t=!1,a.splice(r,1));!t&&n||ae.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Ae.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],a=ae.timers,s=i?i.length:0;for(n.finish=!0,ae.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ae.each(["toggle","show","hide"],function(e,t){var n=ae.fn[t];ae.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(O(t,!0),e,i,r)}}),ae.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ae.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ae.timers=[],ae.fx.tick=function(){var e,t=0,n=ae.timers;for(rt=ae.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||ae.fx.stop(),rt=void 0},ae.fx.timer=function(e){ae.timers.push(e),e()?ae.fx.start():ae.timers.pop()},ae.fx.interval=13,ae.fx.start=function(){at||(at=e.setInterval(ae.fx.tick,ae.fx.interval))},ae.fx.stop=function(){e.clearInterval(at),at=null},ae.fx.speeds={slow:600,fast:200,_default:400},ae.fn.delay=function(t,n){return t=ae.fx?ae.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})},function(){var e=W.createElement("input"),t=W.createElement("select"),n=t.appendChild(W.createElement("option"));e.type="checkbox",ie.checkOn=""!==e.value,ie.optSelected=n.selected,t.disabled=!0,ie.optDisabled=!n.disabled,e=W.createElement("input"),e.value="t",e.type="radio",ie.radioValue="t"===e.value}();var lt,ut=ae.expr.attrHandle;ae.fn.extend({attr:function(e,t){return Te(this,ae.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ae.removeAttr(this,e)})}}),ae.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"==typeof e.getAttribute?ae.prop(e,t,n):(1===a&&ae.isXMLDoc(e)||(t=t.toLowerCase(),r=ae.attrHooks[t]||(ae.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void ae.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=ae.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&ae.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,r=0,a=t&&t.match(Ee);if(a&&1===e.nodeType)for(;n=a[r++];)i=ae.propFix[n]||n,ae.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),lt={set:function(e,t,n){return t===!1?ae.removeAttr(e,n):e.setAttribute(n,n),n}},ae.each(ae.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ut[t]||ae.find.attr;ut[t]=function(e,t,i){var r,a;return i||(a=ut[t],ut[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,ut[t]=a),r}});var ct=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;ae.fn.extend({prop:function(e,t){return Te(this,ae.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ae.propFix[e]||e]})}}),ae.extend({prop:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&ae.isXMLDoc(e)||(t=ae.propFix[t]||t,r=ae.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=ae.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ie.optSelected||(ae.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ae.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ae.propFix[this.toLowerCase()]=this});var dt=/[\t\r\n\f]/g;ae.fn.extend({addClass:function(e){var t,n,i,r,a,s,o,l=0;if(ae.isFunction(e))return this.each(function(t){ae(this).addClass(e.call(this,t,z(this)))});if("string"==typeof e&&e)for(t=e.match(Ee)||[];n=this[l++];)if(r=z(n),i=1===n.nodeType&&(" "+r+" ").replace(dt," ")){for(s=0;a=t[s++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");o=ae.trim(i),r!==o&&n.setAttribute("class",o)}return this},removeClass:function(e){var t,n,i,r,a,s,o,l=0;if(ae.isFunction(e))return this.each(function(t){ae(this).removeClass(e.call(this,t,z(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ee)||[];n=this[l++];)if(r=z(n),i=1===n.nodeType&&(" "+r+" ").replace(dt," ")){for(s=0;a=t[s++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");o=ae.trim(i),r!==o&&n.setAttribute("class",o)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ae.isFunction(e)?this.each(function(n){ae(this).toggleClass(e.call(this,n,z(this),t),t)}):this.each(function(){var t,i,r,a;if("string"===n)for(i=0,r=ae(this),a=e.match(Ee)||[];t=a[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||(t=z(this),t&&Ae.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Ae.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+z(n)+" ").replace(dt," ").indexOf(t)>-1)return!0;return!1}});var pt=/\r/g,ht=/[\x20\t\r\n\f]+/g;ae.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=ae.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,ae(this).val()):e,null==r?r="":"number"==typeof r?r+="":ae.isArray(r)&&(r=ae.map(r,function(e){return null==e?"":e+""})),t=ae.valHooks[this.type]||ae.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=ae.valHooks[r.type]||ae.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(pt,""):null==n?"":n)}}}),ae.extend({valHooks:{option:{get:function(e){var t=ae.find.attr(e,"value");return null!=t?t:ae.trim(ae.text(e)).replace(ht," ")}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,a="select-one"===e.type||r<0,s=a?null:[],o=a?r+1:i.length,l=r<0?o:a?r:0;l<o;l++)if(n=i[l],(n.selected||l===r)&&(ie.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ae.nodeName(n.parentNode,"optgroup"))){if(t=ae(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,a=ae.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=ae.inArray(ae.valHooks.option.get(i),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),ae.each(["radio","checkbox"],function(){ae.valHooks[this]={set:function(e,t){if(ae.isArray(t))return e.checked=ae.inArray(ae(e).val(),t)>-1}},ie.checkOn||(ae.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var gt=/^(?:focusinfocus|focusoutblur)$/;ae.extend(ae.event,{trigger:function(t,n,i,r){var a,s,o,l,u,c,f,d=[i||W],p=ne.call(t,"type")?t.type:t,h=ne.call(t,"namespace")?t.namespace.split("."):[];if(s=o=i=i||W,3!==i.nodeType&&8!==i.nodeType&&!gt.test(p+ae.event.triggered)&&(p.indexOf(".")>-1&&(h=p.split("."),p=h.shift(),h.sort()),u=p.indexOf(":")<0&&"on"+p,t=t[ae.expando]?t:new ae.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:ae.makeArray(n,[t]),f=ae.event.special[p]||{},r||!f.trigger||f.trigger.apply(i,n)!==!1)){if(!r&&!f.noBubble&&!ae.isWindow(i)){for(l=f.delegateType||p,gt.test(l+p)||(s=s.parentNode);s;s=s.parentNode)d.push(s),o=s;o===(i.ownerDocument||W)&&d.push(o.defaultView||o.parentWindow||e)}for(a=0;(s=d[a++])&&!t.isPropagationStopped();)t.type=a>1?l:f.bindType||p,c=(Ae.get(s,"events")||{})[t.type]&&Ae.get(s,"handle"),c&&c.apply(s,n),c=u&&s[u],c&&c.apply&&we(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||f._default&&f._default.apply(d.pop(),n)!==!1||!we(i)||u&&ae.isFunction(i[p])&&!ae.isWindow(i)&&(o=i[u],o&&(i[u]=null),ae.event.triggered=p,i[p](),ae.event.triggered=void 0,o&&(i[u]=o)),t.result}},simulate:function(e,t,n){var i=ae.extend(new ae.Event,n,{type:e,isSimulated:!0});ae.event.trigger(i,null,t)}}),ae.fn.extend({trigger:function(e,t){return this.each(function(){ae.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ae.event.trigger(e,t,n,!0)}}),ae.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ae.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ae.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ie.focusin="onfocusin"in e,ie.focusin||ae.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ae.event.simulate(t,e.target,ae.event.fix(e))};ae.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=Ae.access(i,t);r||i.addEventListener(e,n,!0),Ae.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Ae.access(i,t)-1;r?Ae.access(i,t,r):(i.removeEventListener(e,n,!0),Ae.remove(i,t))}}});var yt=e.location,mt=ae.now(),vt=/\?/;ae.parseJSON=function(e){return JSON.parse(e+"")},ae.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(i){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||ae.error("Invalid XML: "+t),n};var Ct=/#.*$/,bt=/([?&])_=[^&]*/,Et=/^(.*?):[ \t]*([^\r\n]*)$/gm,St=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tt=/^(?:GET|HEAD)$/,wt=/^\/\//,At={},kt={},It="*/".concat("*"),Bt=W.createElement("a");Bt.href=yt.href,ae.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yt.href,type:"GET",isLocal:St.test(yt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ae.parseJSON,"text xml":ae.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?j(j(e,ae.ajaxSettings),t):j(ae.ajaxSettings,e)},ajaxPrefilter:V(At),ajaxTransport:V(kt),ajax:function(t,n){function i(t,n,i,o){var u,f,v,C,E,T=n;2!==b&&(b=2,l&&e.clearTimeout(l),r=void 0,s=o||"",S.readyState=t>0?4:0,u=t>=200&&t<300||304===t,i&&(C=q(d,S,i)),C=H(d,C,S,u),u?(d.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(ae.lastModified[a]=E),E=S.getResponseHeader("etag"),E&&(ae.etag[a]=E)),204===t||"HEAD"===d.type?T="nocontent":304===t?T="notmodified":(T=C.state,f=C.data,v=C.error,u=!v)):(v=T,!t&&T||(T="error",t<0&&(t=0))),S.status=t,S.statusText=(n||T)+"",u?g.resolveWith(p,[f,T,S]):g.rejectWith(p,[S,T,v]),S.statusCode(m),m=void 0,c&&h.trigger(u?"ajaxSuccess":"ajaxError",[S,d,u?f:v]),y.fireWith(p,[S,T]),c&&(h.trigger("ajaxComplete",[S,d]),--ae.active||ae.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,a,s,o,l,u,c,f,d=ae.ajaxSetup({},n),p=d.context||d,h=d.context&&(p.nodeType||p.jquery)?ae(p):ae.event,g=ae.Deferred(),y=ae.Callbacks("once memory"),m=d.statusCode||{},v={},C={},b=0,E="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o)for(o={};t=Et.exec(s);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=C[n]=C[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)m[t]=[m[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||E;return r&&r.abort(t),i(0,t),this}};if(g.promise(S).complete=y.add,S.success=S.done,S.error=S.fail,d.url=((t||d.url||yt.href)+"").replace(Ct,"").replace(wt,yt.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=ae.trim(d.dataType||"*").toLowerCase().match(Ee)||[""],null==d.crossDomain){u=W.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Bt.protocol+"//"+Bt.host!=u.protocol+"//"+u.host}catch(T){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ae.param(d.data,d.traditional)),M(At,d,n,S),2===b)return S;c=ae.event&&d.global,c&&0===ae.active++&&ae.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Tt.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(vt.test(a)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=bt.test(a)?a.replace(bt,"$1_="+mt++):a+(vt.test(a)?"&":"?")+"_="+mt++)),d.ifModified&&(ae.lastModified[a]&&S.setRequestHeader("If-Modified-Since",ae.lastModified[a]),ae.etag[a]&&S.setRequestHeader("If-None-Match",ae.etag[a])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",d.contentType),S.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+It+"; q=0.01":""):d.accepts["*"]);for(f in d.headers)S.setRequestHeader(f,d.headers[f]);if(d.beforeSend&&(d.beforeSend.call(p,S,d)===!1||2===b))return S.abort();E="abort";for(f in{success:1,error:1,complete:1})S[f](d[f]);if(r=M(kt,d,n,S)){if(S.readyState=1,c&&h.trigger("ajaxSend",[S,d]),2===b)return S;d.async&&d.timeout>0&&(l=e.setTimeout(function(){S.abort("timeout")},d.timeout));try{b=1,r.send(v,i)}catch(T){if(!(b<2))throw T;i(-1,T)}}else i(-1,"No Transport");return S},getJSON:function(e,t,n){return ae.get(e,t,n,"json")},getScript:function(e,t){return ae.get(e,void 0,t,"script")}}),ae.each(["get","post"],function(e,t){ae[t]=function(e,n,i,r){return ae.isFunction(n)&&(r=r||i,i=n,n=void 0),ae.ajax(ae.extend({url:e,type:t,dataType:r,data:n,success:i},ae.isPlainObject(e)&&e))}}),ae._evalUrl=function(e){return ae.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ae.fn.extend({wrapAll:function(e){var t;return ae.isFunction(e)?this.each(function(t){ae(this).wrapAll(e.call(this,t))}):(this[0]&&(t=ae(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return ae.isFunction(e)?this.each(function(t){ae(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ae(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ae.isFunction(e);return this.each(function(n){ae(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ae.nodeName(this,"body")||ae(this).replaceWith(this.childNodes)}).end()}}),ae.expr.filters.hidden=function(e){return!ae.expr.filters.visible(e)},ae.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var _t=/%20/g,Nt=/\[\]$/,Rt=/\r?\n/g,xt=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;ae.param=function(e,t){var n,i=[],r=function(e,t){t=ae.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ae.ajaxSettings&&ae.ajaxSettings.traditional),ae.isArray(e)||e.jquery&&!ae.isPlainObject(e))ae.each(e,function(){r(this.name,this.value)});else for(n in e)K(n,e[n],t,r);return i.join("&").replace(_t,"+")},ae.fn.extend({serialize:function(){return ae.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ae.prop(this,"elements");return e?ae.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ae(this).is(":disabled")&&Dt.test(this.nodeName)&&!xt.test(e)&&(this.checked||!De.test(e))}).map(function(e,t){var n=ae(this).val();return null==n?null:ae.isArray(n)?ae.map(n,function(e){return{name:t.name,value:e.replace(Rt,"\r\n")}}):{name:t.name,value:n.replace(Rt,"\r\n")}}).get()}}),ae.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Lt={0:200,1223:204},Ot=ae.ajaxSettings.xhr();ie.cors=!!Ot&&"withCredentials"in Ot,ie.ajax=Ot=!!Ot,ae.ajaxTransport(function(t){var n,i;if(ie.cors||Ot&&!t.crossDomain)return{send:function(r,a){var s,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)o.setRequestHeader(s,r[s]);n=function(e){return function(){n&&(n=i=o.onload=o.onerror=o.onabort=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?a(0,"error"):a(o.status,o.statusText):a(Lt[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=n(),i=o.onerror=n("error"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{o.send(t.hasContent&&t.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}}),ae.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ae.globalEval(e),e}}}),ae.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ae.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=ae("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),W.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Pt=[],Ft=/(=)\?(?=&|$)|\?\?/;ae.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Pt.pop()||ae.expando+"_"+mt++;return this[e]=!0,e}}),ae.ajaxPrefilter("json jsonp",function(t,n,i){var r,a,s,o=t.jsonp!==!1&&(Ft.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ft.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=ae.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Ft,"$1"+r):t.jsonp!==!1&&(t.url+=(vt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||ae.error(r+" was not called"),s[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){s=arguments},i.always(function(){void 0===a?ae(e).removeProp(r):e[r]=a,t[r]&&(t.jsonpCallback=n.jsonpCallback,Pt.push(r)),s&&ae.isFunction(a)&&a(s[0]),s=a=void 0}),"script"}),ae.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||W;var i=he.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=d([e],t,r),r&&r.length&&ae(r).remove(),ae.merge([],i.childNodes))};var Ut=ae.fn.load;ae.fn.load=function(e,t,n){if("string"!=typeof e&&Ut)return Ut.apply(this,arguments);var i,r,a,s=this,o=e.indexOf(" ");return o>-1&&(i=ae.trim(e.slice(o)),e=e.slice(0,o)),ae.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&ae.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){a=arguments,s.html(i?ae("<div>").append(ae.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},ae.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ae.fn[t]=function(e){return this.on(t,e)}}),ae.expr.filters.animated=function(e){return ae.grep(ae.timers,function(t){return e===t.elem}).length},ae.offset={setOffset:function(e,t,n){var i,r,a,s,o,l,u,c=ae.css(e,"position"),f=ae(e),d={};"static"===c&&(e.style.position="relative"),o=f.offset(),a=ae.css(e,"top"),l=ae.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(a+l).indexOf("auto")>-1,u?(i=f.position(),s=i.top,r=i.left):(s=parseFloat(a)||0,r=parseFloat(l)||0),ae.isFunction(t)&&(t=t.call(e,n,ae.extend({},o))),null!=t.top&&(d.top=t.top-o.top+s),null!=t.left&&(d.left=t.left-o.left+r),"using"in t?t.using.call(e,d):f.css(d)}},ae.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ae.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},a=i&&i.ownerDocument;if(a)return t=a.documentElement,ae.contains(t,i)?(r=i.getBoundingClientRect(),n=Q(a),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===ae.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ae.nodeName(e[0],"html")||(i=e.offset()),i.top+=ae.css(e[0],"borderTopWidth",!0),i.left+=ae.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-ae.css(n,"marginTop",!0),left:t.left-i.left-ae.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ae.css(e,"position");)e=e.offsetParent;return e||Ze})}}),ae.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ae.fn[e]=function(i){return Te(this,function(e,i,r){var a=Q(e);return void 0===r?a?a[t]:e[i]:void(a?a.scrollTo(n?a.pageXOffset:r,n?r:a.pageYOffset):e[i]=r)},e,i,arguments.length)}}),ae.each(["top","left"],function(e,t){ae.cssHooks[t]=I(ie.pixelPosition,function(e,n){if(n)return n=k(e,t),We.test(n)?ae(e).position()[t]+"px":n})}),ae.each({Height:"height",Width:"width"},function(e,t){ae.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){ae.fn[i]=function(i,r){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||r===!0?"margin":"border");return Te(this,function(t,n,i){var r;return ae.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?ae.css(t,n,s):ae.style(t,n,i,s)},t,a?i:void 0,a,null)}})}),ae.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),ae.fn.andSelf=ae.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ae});var $t=e.jQuery,zt=e.$;return ae.noConflict=function(t){return e.$===ae&&(e.$=zt),t&&e.jQuery===ae&&(e.jQuery=$t),ae},t||(e.jQuery=e.$=ae),ae}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("whatInput",[],t):"object"==typeof exports?exports.whatInput=t():e.whatInput=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){e.exports=function(){var e=document.documentElement,t="initial",n=null,i=["input","select","textarea"],r=[16,17,18,91,93],a={keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"},s=[],o=!1,l={2:"touch",3:"touch",4:"mouse"},u=null,c=function(){a[m()]="mouse",f(),p()},f=function(){window.PointerEvent?(e.addEventListener("pointerdown",d),e.addEventListener("pointermove",h)):window.MSPointerEvent?(e.addEventListener("MSPointerDown",d),e.addEventListener("MSPointerMove",h)):(e.addEventListener("mousedown",d),e.addEventListener("mousemove",h),"ontouchstart"in window&&e.addEventListener("touchstart",g)),e.addEventListener(m(),h),e.addEventListener("keydown",d),e.addEventListener("keyup",d)},d=function(e){if(!o){var s=e.which,l=a[e.type];if("pointer"===l&&(l=y(e)),t!==l||n!==l){var u=!(!document.activeElement||i.indexOf(document.activeElement.nodeName.toLowerCase())!==-1);("touch"===l||"mouse"===l&&r.indexOf(s)===-1||"keyboard"===l&&u)&&(t=n=l,p())}}},p=function(){e.setAttribute("data-whatinput",t),e.setAttribute("data-whatintent",t),s.indexOf(t)===-1&&(s.push(t),e.className+=" whatinput-types-"+t)},h=function(t){if(!o){var i=a[t.type];"pointer"===i&&(i=y(t)),n!==i&&(n=i,e.setAttribute("data-whatintent",n))}},g=function(e){window.clearTimeout(u),d(e),o=!0,u=window.setTimeout(function(){o=!1},200)},y=function(e){return"number"==typeof e.pointerType?l[e.pointerType]:"pen"===e.pointerType?"touch":e.pointerType},m=function(){return"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"};return"addEventListener"in window&&Array.prototype.indexOf&&c(),{ask:function(e){return"loose"===e?n:t},types:function(){return s}}}()}])}),!function(e){"use strict";function t(e){if(void 0===Function.prototype.name){var t=/function\s([^(]{1,})\(/,n=t.exec(e.toString());return n&&n.length>1?n[1].trim():""}return void 0===e.prototype?e.constructor.name:e.prototype.constructor.name}function n(e){return"true"===e||"false"!==e&&(isNaN(1*e)?e:parseFloat(e))}function i(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var r="6.3.0",a={version:r,_plugins:{},_uuids:[],rtl:function(){return"rtl"===e("html").attr("dir")},plugin:function(e,n){var r=n||t(e),a=i(r);this._plugins[a]=this[r]=e},registerPlugin:function(e,n){var r=n?i(n):t(e.constructor).toLowerCase();e.uuid=this.GetYoDigits(6,r),e.$element.attr("data-"+r)||e.$element.attr("data-"+r,e.uuid),e.$element.data("zfPlugin")||e.$element.data("zfPlugin",e),e.$element.trigger("init.zf."+r),this._uuids.push(e.uuid)},unregisterPlugin:function(e){var n=i(t(e.$element.data("zfPlugin").constructor));this._uuids.splice(this._uuids.indexOf(e.uuid),1),e.$element.removeAttr("data-"+n).removeData("zfPlugin").trigger("destroyed.zf."+n);for(var r in e)e[r]=null},reInit:function(t){var n=t instanceof e;try{if(n)t.each(function(){e(this).data("zfPlugin")._init()});else{var r=typeof t,a=this,s={object:function(t){t.forEach(function(t){t=i(t),e("[data-"+t+"]").foundation("_init")})},string:function(){t=i(t),e("[data-"+t+"]").foundation("_init")},undefined:function(){this.object(Object.keys(a._plugins))}};s[r](t)}}catch(o){console.error(o)}finally{return t}},GetYoDigits:function(e,t){return e=e||6,Math.round(Math.pow(36,e+1)-Math.random()*Math.pow(36,e)).toString(36).slice(1)+(t?"-"+t:"")},reflow:function(t,i){"undefined"==typeof i?i=Object.keys(this._plugins):"string"==typeof i&&(i=[i]);var r=this;e.each(i,function(i,a){var s=r._plugins[a],o=e(t).find("[data-"+a+"]").addBack("[data-"+a+"]");o.each(function(){var t=e(this),i={};if(t.data("zfPlugin"))return void console.warn("Tried to initialize "+a+" on an element that already has a Foundation plugin.");if(t.attr("data-options")){t.attr("data-options").split(";").forEach(function(e,t){var r=e.split(":").map(function(e){return e.trim()});r[0]&&(i[r[0]]=n(r[1]))})}try{t.data("zfPlugin",new s(e(this),i))}catch(r){console.error(r)}finally{return}})})},getFnName:t,transitionend:function(e){var t,n={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},i=document.createElement("div");for(var r in n)"undefined"!=typeof i.style[r]&&(t=n[r]);return t?t:(t=setTimeout(function(){e.triggerHandler("transitionend",[e])},1),"transitionend")}};a.util={throttle:function(e,t){var n=null;return function(){var i=this,r=arguments;null===n&&(n=setTimeout(function(){e.apply(i,r),n=null},t))}}};var s=function(n){var i=typeof n,r=e("meta.foundation-mq"),s=e(".no-js");if(r.length||e('<meta class="foundation-mq">').appendTo(document.head),s.length&&s.removeClass("no-js"),"undefined"===i)a.MediaQuery._init(),a.reflow(this);else{if("string"!==i)throw new TypeError("We're sorry, "+i+" is not a valid parameter. You must use a string representing the method you wish to invoke.");var o=Array.prototype.slice.call(arguments,1),l=this.data("zfPlugin");if(void 0===l||void 0===l[n])throw new ReferenceError("We're sorry, '"+n+"' is not an available method for "+(l?t(l):"this element")+".");1===this.length?l[n].apply(l,o):this.each(function(t,i){l[n].apply(e(i).data("zfPlugin"),o)})}return this};window.Foundation=a,e.fn.foundation=s,function(){Date.now&&window.Date.now||(window.Date.now=Date.now=function(){return(new Date).getTime()});for(var e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t){var n=e[t];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(i+16,t);return setTimeout(function(){e(i=n)},n-t)},window.cancelAnimationFrame=clearTimeout}window.performance&&window.performance.now||(window.performance={start:Date.now(),now:function(){return Date.now()-this.start}})}(),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),r.prototype=new i,r})}(jQuery),!function(e){function t(e,t,i,r){var a,s,o,l,u=n(e);if(t){var c=n(t);s=u.offset.top+u.height<=c.height+c.offset.top,a=u.offset.top>=c.offset.top,o=u.offset.left>=c.offset.left,l=u.offset.left+u.width<=c.width+c.offset.left}else s=u.offset.top+u.height<=u.windowDims.height+u.windowDims.offset.top,a=u.offset.top>=u.windowDims.offset.top,o=u.offset.left>=u.windowDims.offset.left,l=u.offset.left+u.width<=u.windowDims.width;var f=[s,a,o,l];return i?o===l==!0:r?a===s==!0:f.indexOf(!1)===-1}function n(e,t){if(e=e.length?e[0]:e,e===window||e===document)throw new Error("I'm sorry, Dave. I'm afraid I can't do that.");var n=e.getBoundingClientRect(),i=e.parentNode.getBoundingClientRect(),r=document.body.getBoundingClientRect(),a=window.pageYOffset,s=window.pageXOffset;return{width:n.width,height:n.height,offset:{top:n.top+a,left:n.left+s},parentDims:{width:i.width,height:i.height,offset:{top:i.top+a,left:i.left+s}},windowDims:{width:r.width,height:r.height,offset:{top:a,left:s}}}}function i(e,t,i,r,a,s){
var o=n(e),l=t?n(t):null;switch(i){case"top":return{left:Foundation.rtl()?l.offset.left-o.width+l.width:l.offset.left,top:l.offset.top-(o.height+r)};case"left":return{left:l.offset.left-(o.width+a),top:l.offset.top};case"right":return{left:l.offset.left+l.width+a,top:l.offset.top};case"center top":return{left:l.offset.left+l.width/2-o.width/2,top:l.offset.top-(o.height+r)};case"center bottom":return{left:s?a:l.offset.left+l.width/2-o.width/2,top:l.offset.top+l.height+r};case"center left":return{left:l.offset.left-(o.width+a),top:l.offset.top+l.height/2-o.height/2};case"center right":return{left:l.offset.left+l.width+a+1,top:l.offset.top+l.height/2-o.height/2};case"center":return{left:o.windowDims.offset.left+o.windowDims.width/2-o.width/2,top:o.windowDims.offset.top+o.windowDims.height/2-o.height/2};case"reveal":return{left:(o.windowDims.width-o.width)/2,top:o.windowDims.offset.top+r};case"reveal full":return{left:o.windowDims.offset.left,top:o.windowDims.offset.top};case"left bottom":return{left:l.offset.left,top:l.offset.top+l.height+r};case"right bottom":return{left:l.offset.left+l.width+a-o.width,top:l.offset.top+l.height+r};default:return{left:Foundation.rtl()?l.offset.left-o.width+l.width:l.offset.left+a,top:l.offset.top+l.height+r}}}Foundation.Box={ImNotTouchingYou:t,GetDimensions:n,GetOffsets:i}}(jQuery),!function(e){function t(e){var t={};for(var n in e)t[e[n]]=e[n];return t}var n={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN"},i={},r={keys:t(n),parseKey:function(e){var t=n[e.which||e.keyCode]||String.fromCharCode(e.which).toUpperCase();return t=t.replace(/\W+/,""),e.shiftKey&&(t="SHIFT_"+t),e.ctrlKey&&(t="CTRL_"+t),e.altKey&&(t="ALT_"+t),t=t.replace(/_$/,"")},handleKey:function(t,n,r){var a,s,o,l=i[n],u=this.parseKey(t);if(!l)return console.warn("Component not defined!");if(a="undefined"==typeof l.ltr?l:Foundation.rtl()?e.extend({},l.ltr,l.rtl):e.extend({},l.rtl,l.ltr),s=a[u],o=r[s],o&&"function"==typeof o){var c=o.apply();(r.handled||"function"==typeof r.handled)&&r.handled(c)}else(r.unhandled||"function"==typeof r.unhandled)&&r.unhandled()},findFocusable:function(t){return!!t&&t.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(function(){return!(!e(this).is(":visible")||e(this).attr("tabindex")<0)})},register:function(e,t){i[e]=t},trapFocus:function(e){var t=Foundation.Keyboard.findFocusable(e),n=t.eq(0),i=t.eq(-1);e.on("keydown.zf.trapfocus",function(e){e.target===i[0]&&"TAB"===Foundation.Keyboard.parseKey(e)?(e.preventDefault(),n.focus()):e.target===n[0]&&"SHIFT_TAB"===Foundation.Keyboard.parseKey(e)&&(e.preventDefault(),i.focus())})},releaseFocus:function(e){e.off("keydown.zf.trapfocus")}};Foundation.Keyboard=r}(jQuery),!function(e){function t(e){var t={};return"string"!=typeof e?t:(e=e.trim().slice(1,-1))?t=e.split("&").reduce(function(e,t){var n=t.replace(/\+/g," ").split("="),i=n[0],r=n[1];return i=decodeURIComponent(i),r=void 0===r?null:decodeURIComponent(r),e.hasOwnProperty(i)?Array.isArray(e[i])?e[i].push(r):e[i]=[e[i],r]:e[i]=r,e},{}):t}var n={queries:[],current:"",_init:function(){var n,i=this,r=e(".foundation-mq").css("font-family");n=t(r);for(var a in n)n.hasOwnProperty(a)&&i.queries.push({name:a,value:"only screen and (min-width: "+n[a]+")"});this.current=this._getCurrentSize(),this._watcher()},atLeast:function(e){var t=this.get(e);return!!t&&window.matchMedia(t).matches},is:function(e){return e=e.trim().split(" "),e.length>1&&"only"===e[1]?e[0]===this._getCurrentSize():this.atLeast(e[0])},get:function(e){for(var t in this.queries)if(this.queries.hasOwnProperty(t)){var n=this.queries[t];if(e===n.name)return n.value}return null},_getCurrentSize:function(){for(var e,t=0;t<this.queries.length;t++){var n=this.queries[t];window.matchMedia(n.value).matches&&(e=n)}return"object"==typeof e?e.name:e},_watcher:function(){var t=this;e(window).on("resize.zf.mediaquery",function(){var n=t._getCurrentSize(),i=t.current;n!==i&&(t.current=n,e(window).trigger("changed.zf.mediaquery",[n,i]))})}};Foundation.MediaQuery=n,window.matchMedia||(window.matchMedia=function(){"use strict";var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0],i=null;t.type="text/css",t.id="matchmediajs-test",n&&n.parentNode&&n.parentNode.insertBefore(t,n),i="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=n:t.textContent=n,"1px"===i.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),Foundation.MediaQuery=n}(jQuery),!function(e){function t(e,t,n){function i(o){s||(s=o),a=o-s,n.apply(t),a<e?r=window.requestAnimationFrame(i,t):(window.cancelAnimationFrame(r),t.trigger("finished.zf.animate",[t]).triggerHandler("finished.zf.animate",[t]))}var r,a,s=null;return 0===e?(n.apply(t),void t.trigger("finished.zf.animate",[t]).triggerHandler("finished.zf.animate",[t])):void(r=window.requestAnimationFrame(i))}function n(t,n,a,s){function o(){t||n.hide(),l(),s&&s.apply(n)}function l(){n[0].style.transitionDuration=0,n.removeClass(u+" "+c+" "+a)}if(n=e(n).eq(0),n.length){var u=t?i[0]:i[1],c=t?r[0]:r[1];l(),n.addClass(a).css("transition","none"),requestAnimationFrame(function(){n.addClass(u),t&&n.show()}),requestAnimationFrame(function(){n[0].offsetWidth,n.css("transition","").addClass(c)}),n.one(Foundation.transitionend(n),o)}}var i=["mui-enter","mui-leave"],r=["mui-enter-active","mui-leave-active"],a={animateIn:function(e,t,i){n(!0,e,t,i)},animateOut:function(e,t,i){n(!1,e,t,i)}};Foundation.Move=t,Foundation.Motion=a}(jQuery),!function(e){var t={Feather:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zf";t.attr("role","menubar");var i=t.find("li").attr({role:"menuitem"}),r="is-"+n+"-submenu",a=r+"-item",s="is-"+n+"-submenu-parent";i.each(function(){var t=e(this),i=t.children("ul");i.length&&(t.addClass(s).attr({"aria-haspopup":!0,"aria-label":t.children("a:first").text()}),"drilldown"===n&&t.attr({"aria-expanded":!1}),i.addClass("submenu "+r).attr({"data-submenu":"",role:"menu"}),"drilldown"===n&&i.attr({"aria-hidden":!0})),t.parent("[data-submenu]").length&&t.addClass("is-submenu-item "+a)})},Burn:function(e,t){var n="is-"+t+"-submenu",i=n+"-item",r="is-"+t+"-submenu-parent";e.find(">li, .menu, .menu > li").removeClass(n+" "+i+" "+r+" is-submenu-item submenu is-active").removeAttr("data-submenu").css("display","")}};Foundation.Nest=t}(jQuery),!function(e){function t(e,t,n){var i,r,a=this,s=t.duration,o=Object.keys(e.data())[0]||"timer",l=-1;this.isPaused=!1,this.restart=function(){l=-1,clearTimeout(r),this.start()},this.start=function(){this.isPaused=!1,clearTimeout(r),l=l<=0?s:l,e.data("paused",!1),i=Date.now(),r=setTimeout(function(){t.infinite&&a.restart(),n&&"function"==typeof n&&n()},l),e.trigger("timerstart.zf."+o)},this.pause=function(){this.isPaused=!0,clearTimeout(r),e.data("paused",!0);var t=Date.now();l-=t-i,e.trigger("timerpaused.zf."+o)}}function n(t,n){function i(){r--,0===r&&n()}var r=t.length;0===r&&n(),t.each(function(){if(this.complete||4===this.readyState||"complete"===this.readyState)i();else{var t=e(this).attr("src");e(this).attr("src",t+"?"+(new Date).getTime()),e(this).one("load",function(){i()})}})}Foundation.Timer=t,Foundation.onImagesLoaded=n}(jQuery),function(e){function t(){this.removeEventListener("touchmove",n),this.removeEventListener("touchend",t),u=!1}function n(n){if(e.spotSwipe.preventDefault&&n.preventDefault(),u){var i,r=n.touches[0].pageX,s=(n.touches[0].pageY,a-r);l=(new Date).getTime()-o,Math.abs(s)>=e.spotSwipe.moveThreshold&&l<=e.spotSwipe.timeThreshold&&(i=s>0?"left":"right"),i&&(n.preventDefault(),t.call(this),e(this).trigger("swipe",i).trigger("swipe"+i))}}function i(e){1==e.touches.length&&(a=e.touches[0].pageX,s=e.touches[0].pageY,u=!0,o=(new Date).getTime(),this.addEventListener("touchmove",n,!1),this.addEventListener("touchend",t,!1))}function r(){this.addEventListener&&this.addEventListener("touchstart",i,!1)}e.spotSwipe={version:"1.0.0",enabled:"ontouchstart"in document.documentElement,preventDefault:!1,moveThreshold:75,timeThreshold:200};var a,s,o,l,u=!1;e.event.special.swipe={setup:r},e.each(["left","up","down","right"],function(){e.event.special["swipe"+this]={setup:function(){e(this).on("swipe",e.noop)}}})}(jQuery),!function(e){e.fn.addTouch=function(){this.each(function(n,i){e(i).bind("touchstart touchmove touchend touchcancel",function(){t(event)})});var t=function(e){var t,n=e.changedTouches,i=n[0],r={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},a=r[e.type];"MouseEvent"in window&&"function"==typeof window.MouseEvent?t=new window.MouseEvent(a,{bubbles:!0,cancelable:!0,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY}):(t=document.createEvent("MouseEvent"),t.initMouseEvent(a,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null)),i.target.dispatchEvent(t)}}}(jQuery),!function(e){function t(){s(),i(),r(),a(),n()}function n(t){var n=e("[data-yeti-box]"),i=["dropdown","tooltip","reveal"];if(t&&("string"==typeof t?i.push(t):"object"==typeof t&&"string"==typeof t[0]?i.concat(t):console.error("Plugin names must be strings")),n.length){var r=i.map(function(e){return"closeme.zf."+e}).join(" ");e(window).off(r).on(r,function(t,n){var i=t.namespace.split(".")[0],r=e("[data-"+i+"]").not('[data-yeti-box="'+n+'"]');r.each(function(){var t=e(this);t.triggerHandler("close.zf.trigger",[t])})})}}function i(t){var n=void 0,i=e("[data-resize]");i.length&&e(window).off("resize.zf.trigger").on("resize.zf.trigger",function(r){n&&clearTimeout(n),n=setTimeout(function(){o||i.each(function(){e(this).triggerHandler("resizeme.zf.trigger")}),i.attr("data-events","resize")},t||10)})}function r(t){var n=void 0,i=e("[data-scroll]");i.length&&e(window).off("scroll.zf.trigger").on("scroll.zf.trigger",function(r){n&&clearTimeout(n),n=setTimeout(function(){o||i.each(function(){e(this).triggerHandler("scrollme.zf.trigger")}),i.attr("data-events","scroll")},t||10)})}function a(t){var n=e("[data-mutate]");n.length&&o&&n.each(function(){e(this).triggerHandler("mutateme.zf.trigger")})}function s(){if(!o)return!1;var t=document.querySelectorAll("[data-resize], [data-scroll], [data-mutate]"),n=function(t){var n=e(t[0].target);switch(t[0].type){case"attributes":"scroll"===n.attr("data-events")&&"data-events"===t[0].attributeName&&n.triggerHandler("scrollme.zf.trigger",[n,window.pageYOffset]),"resize"===n.attr("data-events")&&"data-events"===t[0].attributeName&&n.triggerHandler("resizeme.zf.trigger",[n]),"style"===t[0].attributeName&&(n.closest("[data-mutate]").attr("data-events","mutate"),n.closest("[data-mutate]").triggerHandler("mutateme.zf.trigger",[n.closest("[data-mutate]")]));break;case"childList":n.closest("[data-mutate]").attr("data-events","mutate"),n.closest("[data-mutate]").triggerHandler("mutateme.zf.trigger",[n.closest("[data-mutate]")]);break;default:return!1}};if(t.length)for(var i=0;i<=t.length-1;i++){var r=new o(n);r.observe(t[i],{attributes:!0,childList:!0,characterData:!1,subtree:!0,attributeFilter:["data-events","style"]})}}var o=function(){for(var e=["WebKit","Moz","O","Ms",""],t=0;t<e.length;t++)if(e[t]+"MutationObserver"in window)return window[e[t]+"MutationObserver"];return!1}(),l=function(t,n){t.data(n).split(" ").forEach(function(i){e("#"+i)["close"===n?"trigger":"triggerHandler"](n+".zf.trigger",[t])})};e(document).on("click.zf.trigger","[data-open]",function(){l(e(this),"open")}),e(document).on("click.zf.trigger","[data-close]",function(){var t=e(this).data("close");t?l(e(this),"close"):e(this).trigger("close.zf.trigger")}),e(document).on("click.zf.trigger","[data-toggle]",function(){var t=e(this).data("toggle");t?l(e(this),"toggle"):e(this).trigger("toggle.zf.trigger")}),e(document).on("close.zf.trigger","[data-closable]",function(t){t.stopPropagation();var n=e(this).data("closable");""!==n?Foundation.Motion.animateOut(e(this),n,function(){e(this).trigger("closed.zf")}):e(this).fadeOut().trigger("closed.zf")}),e(document).on("focus.zf.trigger blur.zf.trigger","[data-toggle-focus]",function(){var t=e(this).data("toggle-focus");e("#"+t).triggerHandler("toggle.zf.trigger",[e(this)])}),e(window).on("load",function(){t()}),Foundation.IHearYou=t}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Abide")}return _createClass(t,[{key:"_init",value:function(){this.$inputs=this.$element.find("input, textarea, select"),this._events()}},{key:"_events",value:function(){var t=this;this.$element.off(".abide").on("reset.zf.abide",function(){t.resetForm()}).on("submit.zf.abide",function(){return t.validateForm()}),"fieldChange"===this.options.validateOn&&this.$inputs.off("change.zf.abide").on("change.zf.abide",function(n){t.validateInput(e(n.target))}),this.options.liveValidate&&this.$inputs.off("input.zf.abide").on("input.zf.abide",function(n){t.validateInput(e(n.target))}),this.options.validateOnBlur&&this.$inputs.off("blur.zf.abide").on("blur.zf.abide",function(n){t.validateInput(e(n.target))})}},{key:"_reflow",value:function(){this._init()}},{key:"requiredCheck",value:function(e){if(!e.attr("required"))return!0;var t=!0;switch(e[0].type){case"checkbox":t=e[0].checked;break;case"select":case"select-one":case"select-multiple":var n=e.find("option:selected");n.length&&n.val()||(t=!1);break;default:e.val()&&e.val().length||(t=!1)}return t}},{key:"findFormError",value:function(e){var t=e.siblings(this.options.formErrorSelector);return t.length||(t=e.parent().find(this.options.formErrorSelector)),t}},{key:"findLabel",value:function(e){var t=e[0].id,n=this.$element.find('label[for="'+t+'"]');return n.length?n:e.closest("label")}},{key:"findRadioLabels",value:function(t){var n=this,i=t.map(function(t,i){var r=i.id,a=n.$element.find('label[for="'+r+'"]');return a.length||(a=e(i).closest("label")),a[0]});return e(i)}},{key:"addErrorClasses",value:function(e){var t=this.findLabel(e),n=this.findFormError(e);t.length&&t.addClass(this.options.labelErrorClass),n.length&&n.addClass(this.options.formErrorClass),e.addClass(this.options.inputErrorClass).attr("data-invalid","")}},{key:"removeRadioErrorClasses",value:function(e){var t=this.$element.find(':radio[name="'+e+'"]'),n=this.findRadioLabels(t),i=this.findFormError(t);n.length&&n.removeClass(this.options.labelErrorClass),i.length&&i.removeClass(this.options.formErrorClass),t.removeClass(this.options.inputErrorClass).removeAttr("data-invalid")}},{key:"removeErrorClasses",value:function(e){if("radio"==e[0].type)return this.removeRadioErrorClasses(e.attr("name"));var t=this.findLabel(e),n=this.findFormError(e);t.length&&t.removeClass(this.options.labelErrorClass),n.length&&n.removeClass(this.options.formErrorClass),e.removeClass(this.options.inputErrorClass).removeAttr("data-invalid")}},{key:"validateInput",value:function(t){var n=this,i=this.requiredCheck(t),r=!1,a=!0,s=t.attr("data-validator"),o=!0;if(t.is("[data-abide-ignore]")||t.is('[type="hidden"]'))return!0;switch(t[0].type){case"radio":r=this.validateRadio(t.attr("name"));break;case"checkbox":r=i;break;case"select":case"select-one":case"select-multiple":r=i;break;default:r=this.validateText(t)}s&&(a=this.matchValidation(t,s,t.attr("required"))),t.attr("data-equalto")&&(o=this.options.validators.equalTo(t));var l=[i,r,a,o].indexOf(!1)===-1,u=(l?"valid":"invalid")+".zf.abide";if(l){var c=this.$element.find('[data-equalto="'+t.attr("id")+'"]');c.length&&!function(){var t=n;c.each(function(){e(this).val()&&t.validateInput(e(this))})}()}return this[l?"removeErrorClasses":"addErrorClasses"](t),t.trigger(u,[t]),l}},{key:"validateForm",value:function(){var t=[],n=this;this.$inputs.each(function(){t.push(n.validateInput(e(this)))});var i=t.indexOf(!1)===-1;return this.$element.find("[data-abide-error]").css("display",i?"none":"block"),this.$element.trigger((i?"formvalid":"forminvalid")+".zf.abide",[this.$element]),i}},{key:"validateText",value:function(e,t){t=t||e.attr("pattern")||e.attr("type");var n=e.val(),i=!1;return n.length?i=this.options.patterns.hasOwnProperty(t)?this.options.patterns[t].test(n):t===e.attr("type")||new RegExp(t).test(n):e.prop("required")||(i=!0),i}},{key:"validateRadio",value:function(t){var n=this.$element.find(':radio[name="'+t+'"]'),i=!1,r=!1;return n.each(function(t,n){e(n).attr("required")&&(r=!0)}),r||(i=!0),i||n.each(function(t,n){e(n).prop("checked")&&(i=!0)}),i}},{key:"matchValidation",value:function(e,t,n){var i=this;n=!!n;var r=t.split(" ").map(function(t){return i.options.validators[t](e,n,e.parent())});return r.indexOf(!1)===-1}},{key:"resetForm",value:function(){var t=this.$element,n=this.options;e("."+n.labelErrorClass,t).not("small").removeClass(n.labelErrorClass),e("."+n.inputErrorClass,t).not("small").removeClass(n.inputErrorClass),e(n.formErrorSelector+"."+n.formErrorClass).removeClass(n.formErrorClass),t.find("[data-abide-error]").css("display","none"),e(":input",t).not(":button, :submit, :reset, :hidden, :radio, :checkbox, [data-abide-ignore]").val("").removeAttr("data-invalid"),e(":input:radio",t).not("[data-abide-ignore]").prop("checked",!1).removeAttr("data-invalid"),e(":input:checkbox",t).not("[data-abide-ignore]").prop("checked",!1).removeAttr("data-invalid"),t.trigger("formreset.zf.abide",[t])}},{key:"destroy",value:function(){var t=this;this.$element.off(".abide").find("[data-abide-error]").css("display","none"),this.$inputs.off(".abide").each(function(){t.removeErrorClasses(e(this))}),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={validateOn:"fieldChange",labelErrorClass:"is-invalid-label",inputErrorClass:"is-invalid-input",formErrorSelector:".form-error",formErrorClass:"is-visible",liveValidate:!1,validateOnBlur:!1,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},validators:{equalTo:function(t,n,i){return e("#"+t.attr("data-equalto")).val()===t.val()}}},Foundation.plugin(t,"Abide")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Accordion"),Foundation.Keyboard.register("Accordion",{ENTER:"toggle",SPACE:"toggle",ARROW_DOWN:"next",ARROW_UP:"previous"})}return _createClass(t,[{key:"_init",value:function(){this.$element.attr("role","tablist"),this.$tabs=this.$element.children("[data-accordion-item]"),this.$tabs.each(function(t,n){var i=e(n),r=i.children("[data-tab-content]"),a=r[0].id||Foundation.GetYoDigits(6,"accordion"),s=n.id||a+"-label";i.find("a:first").attr({"aria-controls":a,role:"tab",id:s,"aria-expanded":!1,"aria-selected":!1}),r.attr({role:"tabpanel","aria-labelledby":s,"aria-hidden":!0,id:a})});var t=this.$element.find(".is-active").children("[data-tab-content]");t.length&&this.down(t,!0),this._events()}},{key:"_events",value:function(){var t=this;this.$tabs.each(function(){var n=e(this),i=n.children("[data-tab-content]");i.length&&n.children("a").off("click.zf.accordion keydown.zf.accordion").on("click.zf.accordion",function(e){e.preventDefault(),t.toggle(i)}).on("keydown.zf.accordion",function(e){Foundation.Keyboard.handleKey(e,"Accordion",{toggle:function(){t.toggle(i)},next:function(){var e=n.next().find("a").focus();t.options.multiExpand||e.trigger("click.zf.accordion")},previous:function(){var e=n.prev().find("a").focus();t.options.multiExpand||e.trigger("click.zf.accordion")},handled:function(){e.preventDefault(),e.stopPropagation()}})})})}},{key:"toggle",value:function(e){e.parent().hasClass("is-active")?this.up(e):this.down(e)}},{key:"down",value:function(t,n){var i=this;if(t.attr("aria-hidden",!1).parent("[data-tab-content]").addBack().parent().addClass("is-active"),!this.options.multiExpand&&!n){var r=this.$element.children(".is-active").children("[data-tab-content]");r.length&&this.up(r.not(t))}t.slideDown(this.options.slideSpeed,function(){i.$element.trigger("down.zf.accordion",[t])}),e("#"+t.attr("aria-labelledby")).attr({"aria-expanded":!0,"aria-selected":!0})}},{key:"up",value:function(t){var n=t.parent().siblings(),i=this;(this.options.allowAllClosed||n.hasClass("is-active"))&&t.parent().hasClass("is-active")&&(t.slideUp(i.options.slideSpeed,function(){i.$element.trigger("up.zf.accordion",[t])}),t.attr("aria-hidden",!0).parent().removeClass("is-active"),e("#"+t.attr("aria-labelledby")).attr({"aria-expanded":!1,"aria-selected":!1}))}},{key:"destroy",value:function(){this.$element.find("[data-tab-content]").stop(!0).slideUp(0).css("display",""),this.$element.find("a").off(".zf.accordion"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={slideSpeed:250,multiExpand:!1,allowAllClosed:!1},Foundation.plugin(t,"Accordion")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),i),Foundation.Nest.Feather(this.$element,"accordion"),this._init(),Foundation.registerPlugin(this,"AccordionMenu"),Foundation.Keyboard.register("AccordionMenu",{ENTER:"toggle",SPACE:"toggle",ARROW_RIGHT:"open",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"close",ESCAPE:"closeAll"})}return _createClass(t,[{key:"_init",value:function(){this.$element.find("[data-submenu]").not(".is-active").slideUp(0),this.$element.attr({role:"menu","aria-multiselectable":this.options.multiOpen}),this.$menuLinks=this.$element.find(".is-accordion-submenu-parent"),this.$menuLinks.each(function(){var t=this.id||Foundation.GetYoDigits(6,"acc-menu-link"),n=e(this),i=n.children("[data-submenu]"),r=i[0].id||Foundation.GetYoDigits(6,"acc-menu"),a=i.hasClass("is-active");n.attr({"aria-controls":r,"aria-expanded":a,role:"menuitem",id:t}),i.attr({"aria-labelledby":t,"aria-hidden":!a,role:"menu",id:r})});var t=this.$element.find(".is-active");if(t.length){var n=this;t.each(function(){n.down(e(this))})}this._events()}},{key:"_events",value:function(){var t=this;this.$element.find("li").each(function(){var n=e(this).children("[data-submenu]");n.length&&e(this).children("a").off("click.zf.accordionMenu").on("click.zf.accordionMenu",function(e){e.preventDefault(),t.toggle(n)})}).on("keydown.zf.accordionmenu",function(n){var i,r,a=e(this),s=a.parent("ul").children("li"),o=a.children("[data-submenu]");s.each(function(t){if(e(this).is(a))return i=s.eq(Math.max(0,t-1)).find("a").first(),r=s.eq(Math.min(t+1,s.length-1)).find("a").first(),e(this).children("[data-submenu]:visible").length&&(r=a.find("li:first-child").find("a").first()),e(this).is(":first-child")?i=a.parents("li").first().find("a").first():i.parents("li").first().children("[data-submenu]:visible").length&&(i=i.parents("li").find("li:last-child").find("a").first()),void(e(this).is(":last-child")&&(r=a.parents("li").first().next("li").find("a").first()))}),Foundation.Keyboard.handleKey(n,"AccordionMenu",{open:function(){o.is(":hidden")&&(t.down(o),o.find("li").first().find("a").first().focus())},close:function(){o.length&&!o.is(":hidden")?t.up(o):a.parent("[data-submenu]").length&&(t.up(a.parent("[data-submenu]")),a.parents("li").first().find("a").first().focus())},up:function(){return i.focus(),!0},down:function(){return r.focus(),!0},toggle:function(){a.children("[data-submenu]").length&&t.toggle(a.children("[data-submenu]"))},closeAll:function(){t.hideAll()},handled:function(e){e&&n.preventDefault(),n.stopImmediatePropagation()}})})}},{key:"hideAll",value:function(){this.up(this.$element.find("[data-submenu]"))}},{key:"showAll",value:function(){this.down(this.$element.find("[data-submenu]"))}},{key:"toggle",value:function(e){e.is(":animated")||(e.is(":hidden")?this.down(e):this.up(e))}},{key:"down",value:function(e){var t=this;this.options.multiOpen||this.up(this.$element.find(".is-active").not(e.parentsUntil(this.$element).add(e))),e.addClass("is-active").attr({"aria-hidden":!1}).parent(".is-accordion-submenu-parent").attr({"aria-expanded":!0}),e.slideDown(t.options.slideSpeed,function(){t.$element.trigger("down.zf.accordionMenu",[e])})}},{key:"up",value:function(e){var t=this;e.slideUp(t.options.slideSpeed,function(){t.$element.trigger("up.zf.accordionMenu",[e])});var n=e.find("[data-submenu]").slideUp(0).addBack().attr("aria-hidden",!0);n.parent(".is-accordion-submenu-parent").attr("aria-expanded",!1)}},{key:"destroy",value:function(){this.$element.find("[data-submenu]").slideDown(0).css("display",""),this.$element.find("a").off("click.zf.accordionMenu"),Foundation.Nest.Burn(this.$element,"accordion"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={slideSpeed:250,multiOpen:!0},Foundation.plugin(t,"AccordionMenu")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),i),Foundation.Nest.Feather(this.$element,"drilldown"),this._init(),Foundation.registerPlugin(this,"Drilldown"),Foundation.Keyboard.register("Drilldown",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close",TAB:"down",SHIFT_TAB:"up"})}return _createClass(t,[{key:"_init",value:function(){this.$submenuAnchors=this.$element.find("li.is-drilldown-submenu-parent").children("a"),this.$submenus=this.$submenuAnchors.parent("li").children("[data-submenu]"),this.$menuItems=this.$element.find("li").not(".js-drilldown-back").attr("role","menuitem").find("a"),this.$element.attr("data-mutate",this.$element.attr("data-drilldown")||Foundation.GetYoDigits(6,"drilldown")),this._prepareMenu(),this._registerEvents(),this._keyboardEvents()}},{key:"_prepareMenu",value:function(){var t=this;this.$submenuAnchors.each(function(){var n=e(this),i=n.parent();t.options.parentLink&&n.clone().prependTo(i.children("[data-submenu]")).wrap('<li class="is-submenu-parent-item is-submenu-item is-drilldown-submenu-item" role="menu-item"></li>'),n.data("savedHref",n.attr("href")).removeAttr("href").attr("tabindex",0),n.children("[data-submenu]").attr({"aria-hidden":!0,tabindex:0,role:"menu"}),t._events(n)}),this.$submenus.each(function(){var n=e(this),i=n.find(".js-drilldown-back");if(!i.length)switch(t.options.backButtonPosition){case"bottom":n.append(t.options.backButton);break;case"top":n.prepend(t.options.backButton);break;default:console.error("Unsupported backButtonPosition value '"+t.options.backButtonPosition+"'")}t._back(n)}),this.options.autoHeight||this.$submenus.addClass("drilldown-submenu-cover-previous"),this.$element.parent().hasClass("is-drilldown")||(this.$wrapper=e(this.options.wrapper).addClass("is-drilldown"),this.options.animateHeight&&this.$wrapper.addClass("animate-height"),this.$wrapper=this.$element.wrap(this.$wrapper).parent().css(this._getMaxDims()))}},{key:"_resize",value:function(){this.$wrapper.css({"max-width":"none","min-height":"none"}),this.$wrapper.css(this._getMaxDims())}},{key:"_events",value:function(t){var n=this;t.off("click.zf.drilldown").on("click.zf.drilldown",function(i){if(e(i.target).parentsUntil("ul","li").hasClass("is-drilldown-submenu-parent")&&(i.stopImmediatePropagation(),i.preventDefault()),n._show(t.parent("li")),n.options.closeOnClick){var r=e("body");r.off(".zf.drilldown").on("click.zf.drilldown",function(t){t.target===n.$element[0]||e.contains(n.$element[0],t.target)||(t.preventDefault(),n._hideAll(),r.off(".zf.drilldown"))})}}),this.$element.on("mutateme.zf.trigger",this._resize.bind(this))}},{key:"_registerEvents",value:function(){this.options.scrollTop&&(this._bindHandler=this._scrollTop.bind(this),this.$element.on("open.zf.drilldown hide.zf.drilldown closed.zf.drilldown",this._bindHandler))}},{key:"_scrollTop",value:function(){var t=this,n=""!=t.options.scrollTopElement?e(t.options.scrollTopElement):t.$element,i=parseInt(n.offset().top+t.options.scrollTopOffset);e("html, body").stop(!0).animate({scrollTop:i},t.options.animationDuration,t.options.animationEasing,function(){this===e("html")[0]&&t.$element.trigger("scrollme.zf.drilldown")})}},{key:"_keyboardEvents",value:function(){var t=this;this.$menuItems.add(this.$element.find(".js-drilldown-back > a, .is-submenu-parent-item > a")).on("keydown.zf.drilldown",function(n){var i,r,a=e(this),s=a.parent("li").parent("ul").children("li").children("a");s.each(function(t){if(e(this).is(a))return i=s.eq(Math.max(0,t-1)),void(r=s.eq(Math.min(t+1,s.length-1)))}),Foundation.Keyboard.handleKey(n,"Drilldown",{next:function(){
if(a.is(t.$submenuAnchors))return t._show(a.parent("li")),a.parent("li").one(Foundation.transitionend(a),function(){a.parent("li").find("ul li a").filter(t.$menuItems).first().focus()}),!0},previous:function(){return t._hide(a.parent("li").parent("ul")),a.parent("li").parent("ul").one(Foundation.transitionend(a),function(){setTimeout(function(){a.parent("li").parent("ul").parent("li").children("a").first().focus()},1)}),!0},up:function(){return i.focus(),!0},down:function(){return r.focus(),!0},close:function(){t._back()},open:function(){return a.is(t.$menuItems)?a.is(t.$submenuAnchors)?(t._show(a.parent("li")),a.parent("li").one(Foundation.transitionend(a),function(){a.parent("li").find("ul li a").filter(t.$menuItems).first().focus()}),!0):void 0:(t._hide(a.parent("li").parent("ul")),a.parent("li").parent("ul").one(Foundation.transitionend(a),function(){setTimeout(function(){a.parent("li").parent("ul").parent("li").children("a").first().focus()},1)}),!0)},handled:function(e){e&&n.preventDefault(),n.stopImmediatePropagation()}})})}},{key:"_hideAll",value:function(){var e=this.$element.find(".is-drilldown-submenu.is-active").addClass("is-closing");this.options.autoHeight&&this.$wrapper.css({height:e.parent().closest("ul").data("calcHeight")}),e.one(Foundation.transitionend(e),function(t){e.removeClass("is-active is-closing")}),this.$element.trigger("closed.zf.drilldown")}},{key:"_back",value:function(e){var t=this;e.off("click.zf.drilldown"),e.children(".js-drilldown-back").on("click.zf.drilldown",function(n){n.stopImmediatePropagation(),t._hide(e);var i=e.parent("li").parent("ul").parent("li");i.length&&t._show(i)})}},{key:"_menuLinkEvents",value:function(){var e=this;this.$menuItems.not(".is-drilldown-submenu-parent").off("click.zf.drilldown").on("click.zf.drilldown",function(t){setTimeout(function(){e._hideAll()},0)})}},{key:"_show",value:function(e){this.options.autoHeight&&this.$wrapper.css({height:e.children("[data-submenu]").data("calcHeight")}),e.attr("aria-expanded",!0),e.children("[data-submenu]").addClass("is-active").attr("aria-hidden",!1),this.$element.trigger("open.zf.drilldown",[e])}},{key:"_hide",value:function(e){this.options.autoHeight&&this.$wrapper.css({height:e.parent().closest("ul").data("calcHeight")});e.parent("li").attr("aria-expanded",!1),e.attr("aria-hidden",!0).addClass("is-closing"),e.addClass("is-closing").one(Foundation.transitionend(e),function(){e.removeClass("is-active is-closing"),e.blur()}),e.trigger("hide.zf.drilldown",[e])}},{key:"_getMaxDims",value:function(){var t=0,n={},i=this;return this.$submenus.add(this.$element).each(function(){var r=(e(this).children("li").length,Foundation.Box.GetDimensions(this).height);t=r>t?r:t,i.options.autoHeight&&(e(this).data("calcHeight",r),e(this).hasClass("is-drilldown-submenu")||(n.height=r))}),this.options.autoHeight||(n["min-height"]=t+"px"),n["max-width"]=this.$element[0].getBoundingClientRect().width+"px",n}},{key:"destroy",value:function(){this.options.scrollTop&&this.$element.off(".zf.drilldown",this._bindHandler),this._hideAll(),this.$element.off("mutateme.zf.trigger"),Foundation.Nest.Burn(this.$element,"drilldown"),this.$element.unwrap().find(".js-drilldown-back, .is-submenu-parent-item").remove().end().find(".is-active, .is-closing, .is-drilldown-submenu").removeClass("is-active is-closing is-drilldown-submenu").end().find("[data-submenu]").removeAttr("aria-hidden tabindex role"),this.$submenuAnchors.each(function(){e(this).off(".zf.drilldown")}),this.$submenus.removeClass("drilldown-submenu-cover-previous"),this.$element.find("a").each(function(){var t=e(this);t.removeAttr("tabindex"),t.data("savedHref")&&t.attr("href",t.data("savedHref")).removeData("savedHref")}),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={backButton:'<li class="js-drilldown-back"><a tabindex="0">Back</a></li>',backButtonPosition:"top",wrapper:"<div></div>",parentLink:!1,closeOnClick:!1,autoHeight:!1,animateHeight:!1,scrollTop:!1,scrollTopElement:"",scrollTopOffset:0,animationDuration:500,animationEasing:"swing"},Foundation.plugin(t,"Drilldown")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Dropdown"),Foundation.Keyboard.register("Dropdown",{ENTER:"open",SPACE:"open",ESCAPE:"close"})}return _createClass(t,[{key:"_init",value:function(){var t=this.$element.attr("id");this.$anchor=e(e('[data-toggle="'+t+'"]').length?'[data-toggle="'+t+'"]':'[data-open="'+t+'"]'),this.$anchor.attr({"aria-controls":t,"data-is-focus":!1,"data-yeti-box":t,"aria-haspopup":!0,"aria-expanded":!1}),this.options.parentClass?this.$parent=this.$element.parents("."+this.options.parentClass):this.$parent=null,this.options.positionClass=this.getPositionClass(),this.counter=4,this.usedPositions=[],this.$element.attr({"aria-hidden":"true","data-yeti-box":t,"data-resize":t,"aria-labelledby":this.$anchor[0].id||Foundation.GetYoDigits(6,"dd-anchor")}),this._events()}},{key:"getPositionClass",value:function(){var e=this.$element[0].className.match(/(top|left|right|bottom)/g);e=e?e[0]:"";var t=/float-(\S+)/.exec(this.$anchor[0].className);t=t?t[1]:"";var n=t?t+" "+e:e;return n}},{key:"_reposition",value:function(e){this.usedPositions.push(e?e:"bottom"),!e&&this.usedPositions.indexOf("top")<0?this.$element.addClass("top"):"top"===e&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(e):"left"===e&&this.usedPositions.indexOf("right")<0?this.$element.removeClass(e).addClass("right"):"right"===e&&this.usedPositions.indexOf("left")<0?this.$element.removeClass(e).addClass("left"):!e&&this.usedPositions.indexOf("top")>-1&&this.usedPositions.indexOf("left")<0?this.$element.addClass("left"):"top"===e&&this.usedPositions.indexOf("bottom")>-1&&this.usedPositions.indexOf("left")<0?this.$element.removeClass(e).addClass("left"):"left"===e&&this.usedPositions.indexOf("right")>-1&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(e):"right"===e&&this.usedPositions.indexOf("left")>-1&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(e):this.$element.removeClass(e),this.classChanged=!0,this.counter--}},{key:"_setPosition",value:function(){if("false"===this.$anchor.attr("aria-expanded"))return!1;var e=this.getPositionClass(),t=Foundation.Box.GetDimensions(this.$element),n=(Foundation.Box.GetDimensions(this.$anchor),"left"===e?"left":"right"===e?"left":"top"),i="top"===n?"height":"width";"height"===i?this.options.vOffset:this.options.hOffset;if(t.width>=t.windowDims.width||!this.counter&&!Foundation.Box.ImNotTouchingYou(this.$element,this.$parent)){var r=t.windowDims.width,a=0;if(this.$parent){var s=Foundation.Box.GetDimensions(this.$parent),a=s.offset.left;s.width<r&&(r=s.width)}return this.$element.offset(Foundation.Box.GetOffsets(this.$element,this.$anchor,"center bottom",this.options.vOffset,this.options.hOffset+a,!0)).css({width:r-2*this.options.hOffset,height:"auto"}),this.classChanged=!0,!1}for(this.$element.offset(Foundation.Box.GetOffsets(this.$element,this.$anchor,e,this.options.vOffset,this.options.hOffset));!Foundation.Box.ImNotTouchingYou(this.$element,this.$parent,!0)&&this.counter;)this._reposition(e),this._setPosition()}},{key:"_events",value:function(){var t=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":this._setPosition.bind(this)}),this.options.hover&&(this.$anchor.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){var n=e("body").data();"undefined"!=typeof n.whatinput&&"mouse"!==n.whatinput||(clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.open(),t.$anchor.data("hover",!0)},t.options.hoverDelay))}).on("mouseleave.zf.dropdown",function(){clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.close(),t.$anchor.data("hover",!1)},t.options.hoverDelay)}),this.options.hoverPane&&this.$element.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){clearTimeout(t.timeout)}).on("mouseleave.zf.dropdown",function(){clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.close(),t.$anchor.data("hover",!1)},t.options.hoverDelay)})),this.$anchor.add(this.$element).on("keydown.zf.dropdown",function(n){var i=e(this);Foundation.Keyboard.findFocusable(t.$element);Foundation.Keyboard.handleKey(n,"Dropdown",{open:function(){i.is(t.$anchor)&&(t.open(),t.$element.attr("tabindex",-1).focus(),n.preventDefault())},close:function(){t.close(),t.$anchor.focus()}})})}},{key:"_addBodyHandler",value:function(){var t=e(document.body).not(this.$element),n=this;t.off("click.zf.dropdown").on("click.zf.dropdown",function(e){n.$anchor.is(e.target)||n.$anchor.find(e.target).length||n.$element.find(e.target).length||(n.close(),t.off("click.zf.dropdown"))})}},{key:"open",value:function(){if(this.$element.trigger("closeme.zf.dropdown",this.$element.attr("id")),this.$anchor.addClass("hover").attr({"aria-expanded":!0}),this._setPosition(),this.$element.addClass("is-open").attr({"aria-hidden":!1}),this.options.autoFocus){var e=Foundation.Keyboard.findFocusable(this.$element);e.length&&e.eq(0).focus()}this.options.closeOnClick&&this._addBodyHandler(),this.options.trapFocus&&Foundation.Keyboard.trapFocus(this.$element),this.$element.trigger("show.zf.dropdown",[this.$element])}},{key:"close",value:function(){if(!this.$element.hasClass("is-open"))return!1;if(this.$element.removeClass("is-open").attr({"aria-hidden":!0}),this.$anchor.removeClass("hover").attr("aria-expanded",!1),this.classChanged){var e=this.getPositionClass();e&&this.$element.removeClass(e),this.$element.addClass(this.options.positionClass).css({height:"",width:""}),this.classChanged=!1,this.counter=4,this.usedPositions.length=0}this.$element.trigger("hide.zf.dropdown",[this.$element]),this.options.trapFocus&&Foundation.Keyboard.releaseFocus(this.$element)}},{key:"toggle",value:function(){if(this.$element.hasClass("is-open")){if(this.$anchor.data("hover"))return;this.close()}else this.open()}},{key:"destroy",value:function(){this.$element.off(".zf.trigger").hide(),this.$anchor.off(".zf.dropdown"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={parentClass:null,hoverDelay:250,hover:!1,hoverPane:!1,vOffset:1,hOffset:1,positionClass:"",trapFocus:!1,autoFocus:!1,closeOnClick:!1},Foundation.plugin(t,"Dropdown")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),i),Foundation.Nest.Feather(this.$element,"dropdown"),this._init(),Foundation.registerPlugin(this,"DropdownMenu"),Foundation.Keyboard.register("DropdownMenu",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close"})}return _createClass(t,[{key:"_init",value:function(){var e=this.$element.find("li.is-dropdown-submenu-parent");this.$element.children(".is-dropdown-submenu-parent").children(".is-dropdown-submenu").addClass("first-sub"),this.$menuItems=this.$element.find('[role="menuitem"]'),this.$tabs=this.$element.children('[role="menuitem"]'),this.$tabs.find("ul.is-dropdown-submenu").addClass(this.options.verticalClass),this.$element.hasClass(this.options.rightClass)||"right"===this.options.alignment||Foundation.rtl()||this.$element.parents(".top-bar-right").is("*")?(this.options.alignment="right",e.addClass("opens-left")):e.addClass("opens-right"),this.changed=!1,this._events()}},{key:"_isVertical",value:function(){return"block"===this.$tabs.css("display")}},{key:"_events",value:function(){var t=this,n="ontouchstart"in window||"undefined"!=typeof window.ontouchstart,i="is-dropdown-submenu-parent",r=function(r){var a=e(r.target).parentsUntil("ul","."+i),s=a.hasClass(i),o="true"===a.attr("data-is-click"),l=a.children(".is-dropdown-submenu");if(s)if(o){if(!t.options.closeOnClick||!t.options.clickOpen&&!n||t.options.forceFollow&&n)return;r.stopImmediatePropagation(),r.preventDefault(),t._hide(a)}else r.preventDefault(),r.stopImmediatePropagation(),t._show(l),a.add(a.parentsUntil(t.$element,"."+i)).attr("data-is-click",!0)};(this.options.clickOpen||n)&&this.$menuItems.on("click.zf.dropdownmenu touchstart.zf.dropdownmenu",r),t.options.closeOnClickInside&&this.$menuItems.on("click.zf.dropdownmenu touchend.zf.dropdownmenu",function(n){var r=e(this),a=r.hasClass(i);a||t._hide()}),this.options.disableHover||this.$menuItems.on("mouseenter.zf.dropdownmenu",function(n){var r=e(this),a=r.hasClass(i);a&&(clearTimeout(r.data("_delay")),r.data("_delay",setTimeout(function(){t._show(r.children(".is-dropdown-submenu"))},t.options.hoverDelay)))}).on("mouseleave.zf.dropdownmenu",function(n){var r=e(this),a=r.hasClass(i);if(a&&t.options.autoclose){if("true"===r.attr("data-is-click")&&t.options.clickOpen)return!1;clearTimeout(r.data("_delay")),r.data("_delay",setTimeout(function(){t._hide(r)},t.options.closingTime))}}),this.$menuItems.on("keydown.zf.dropdownmenu",function(n){var i,r,a=e(n.target).parentsUntil("ul",'[role="menuitem"]'),s=t.$tabs.index(a)>-1,o=s?t.$tabs:a.siblings("li").add(a);o.each(function(t){if(e(this).is(a))return i=o.eq(t-1),void(r=o.eq(t+1))});var l=function(){a.is(":last-child")||(r.children("a:first").focus(),n.preventDefault())},u=function(){i.children("a:first").focus(),n.preventDefault()},c=function(){var e=a.children("ul.is-dropdown-submenu");e.length&&(t._show(e),a.find("li > a:first").focus(),n.preventDefault())},f=function(){var e=a.parent("ul").parent("li");e.children("a:first").focus(),t._hide(e),n.preventDefault()},d={open:c,close:function(){t._hide(t.$element),t.$menuItems.find("a:first").focus(),n.preventDefault()},handled:function(){n.stopImmediatePropagation()}};s?t._isVertical()?Foundation.rtl()?e.extend(d,{down:l,up:u,next:f,previous:c}):e.extend(d,{down:l,up:u,next:c,previous:f}):Foundation.rtl()?e.extend(d,{next:u,previous:l,down:c,up:f}):e.extend(d,{next:l,previous:u,down:c,up:f}):Foundation.rtl()?e.extend(d,{next:f,previous:c,down:l,up:u}):e.extend(d,{next:c,previous:f,down:l,up:u}),Foundation.Keyboard.handleKey(n,"DropdownMenu",d)})}},{key:"_addBodyHandler",value:function(){var t=e(document.body),n=this;t.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu").on("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu",function(e){var i=n.$element.find(e.target);i.length||(n._hide(),t.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu"))})}},{key:"_show",value:function(t){var n=this.$tabs.index(this.$tabs.filter(function(n,i){return e(i).find(t).length>0})),i=t.parent("li.is-dropdown-submenu-parent").siblings("li.is-dropdown-submenu-parent");this._hide(i,n),t.css("visibility","hidden").addClass("js-dropdown-active").parent("li.is-dropdown-submenu-parent").addClass("is-active");var r=Foundation.Box.ImNotTouchingYou(t,null,!0);if(!r){var a="left"===this.options.alignment?"-right":"-left",s=t.parent(".is-dropdown-submenu-parent");s.removeClass("opens"+a).addClass("opens-"+this.options.alignment),r=Foundation.Box.ImNotTouchingYou(t,null,!0),r||s.removeClass("opens-"+this.options.alignment).addClass("opens-inner"),this.changed=!0}t.css("visibility",""),this.options.closeOnClick&&this._addBodyHandler(),this.$element.trigger("show.zf.dropdownmenu",[t])}},{key:"_hide",value:function(e,t){var n;n=e&&e.length?e:void 0!==t?this.$tabs.not(function(e,n){return e===t}):this.$element;var i=n.hasClass("is-active")||n.find(".is-active").length>0;if(i){if(n.find("li.is-active").add(n).attr({"data-is-click":!1}).removeClass("is-active"),n.find("ul.js-dropdown-active").removeClass("js-dropdown-active"),this.changed||n.find("opens-inner").length){var r="left"===this.options.alignment?"right":"left";n.find("li.is-dropdown-submenu-parent").add(n).removeClass("opens-inner opens-"+this.options.alignment).addClass("opens-"+r),this.changed=!1}this.$element.trigger("hide.zf.dropdownmenu",[n])}}},{key:"destroy",value:function(){this.$menuItems.off(".zf.dropdownmenu").removeAttr("data-is-click").removeClass("is-right-arrow is-left-arrow is-down-arrow opens-right opens-left opens-inner"),e(document.body).off(".zf.dropdownmenu"),Foundation.Nest.Burn(this.$element,"dropdown"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={disableHover:!1,autoclose:!0,hoverDelay:50,clickOpen:!1,closingTime:500,alignment:"left",closeOnClick:!0,closeOnClickInside:!0,verticalClass:"vertical",rightClass:"align-right",forceFollow:!0},Foundation.plugin(t,"DropdownMenu")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Equalizer")}return _createClass(t,[{key:"_init",value:function(){var t=this.$element.attr("data-equalizer")||"",n=this.$element.find('[data-equalizer-watch="'+t+'"]');this.$watched=n.length?n:this.$element.find("[data-equalizer-watch]"),this.$element.attr("data-resize",t||Foundation.GetYoDigits(6,"eq")),this.$element.attr("data-mutate",t||Foundation.GetYoDigits(6,"eq")),this.hasNested=this.$element.find("[data-equalizer]").length>0,this.isNested=this.$element.parentsUntil(document.body,"[data-equalizer]").length>0,this.isOn=!1,this._bindHandler={onResizeMeBound:this._onResizeMe.bind(this),onPostEqualizedBound:this._onPostEqualized.bind(this)};var i,r=this.$element.find("img");this.options.equalizeOn?(i=this._checkMQ(),e(window).on("changed.zf.mediaquery",this._checkMQ.bind(this))):this._events(),(void 0!==i&&i===!1||void 0===i)&&(r.length?Foundation.onImagesLoaded(r,this._reflow.bind(this)):this._reflow())}},{key:"_pauseEvents",value:function(){this.isOn=!1,this.$element.off({".zf.equalizer":this._bindHandler.onPostEqualizedBound,"resizeme.zf.trigger":this._bindHandler.onResizeMeBound,"mutateme.zf.trigger":this._bindHandler.onResizeMeBound})}},{key:"_onResizeMe",value:function(e){this._reflow()}},{key:"_onPostEqualized",value:function(e){e.target!==this.$element[0]&&this._reflow()}},{key:"_events",value:function(){this._pauseEvents(),this.hasNested?this.$element.on("postequalized.zf.equalizer",this._bindHandler.onPostEqualizedBound):(this.$element.on("resizeme.zf.trigger",this._bindHandler.onResizeMeBound),this.$element.on("mutateme.zf.trigger",this._bindHandler.onResizeMeBound)),this.isOn=!0}},{key:"_checkMQ",value:function(){var e=!Foundation.MediaQuery.is(this.options.equalizeOn);return e?this.isOn&&(this._pauseEvents(),this.$watched.css("height","auto")):this.isOn||this._events(),e}},{key:"_killswitch",value:function(){}},{key:"_reflow",value:function(){return!this.options.equalizeOnStack&&this._isStacked()?(this.$watched.css("height","auto"),!1):void(this.options.equalizeByRow?this.getHeightsByRow(this.applyHeightByRow.bind(this)):this.getHeights(this.applyHeight.bind(this)))}},{key:"_isStacked",value:function(){return!this.$watched[0]||!this.$watched[1]||this.$watched[0].getBoundingClientRect().top!==this.$watched[1].getBoundingClientRect().top}},{key:"getHeights",value:function(e){for(var t=[],n=0,i=this.$watched.length;n<i;n++)this.$watched[n].style.height="auto",t.push(this.$watched[n].offsetHeight);e(t)}},{key:"getHeightsByRow",value:function(t){var n=this.$watched.length?this.$watched.first().offset().top:0,i=[],r=0;i[r]=[];for(var a=0,s=this.$watched.length;a<s;a++){this.$watched[a].style.height="auto";var o=e(this.$watched[a]).offset().top;o!=n&&(r++,i[r]=[],n=o),i[r].push([this.$watched[a],this.$watched[a].offsetHeight])}for(var l=0,u=i.length;l<u;l++){var c=e(i[l]).map(function(){return this[1]}).get(),f=Math.max.apply(null,c);i[l].push(f)}t(i)}},{key:"applyHeight",value:function(e){var t=Math.max.apply(null,e);this.$element.trigger("preequalized.zf.equalizer"),this.$watched.css("height",t),this.$element.trigger("postequalized.zf.equalizer")}},{key:"applyHeightByRow",value:function(t){this.$element.trigger("preequalized.zf.equalizer");for(var n=0,i=t.length;n<i;n++){var r=t[n].length,a=t[n][r-1];if(r<=2)e(t[n][0][0]).css({height:"auto"});else{this.$element.trigger("preequalizedrow.zf.equalizer");for(var s=0,o=r-1;s<o;s++)e(t[n][s][0]).css({height:a});this.$element.trigger("postequalizedrow.zf.equalizer")}}this.$element.trigger("postequalized.zf.equalizer")}},{key:"destroy",value:function(){this._pauseEvents(),this.$watched.css("height","auto"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={equalizeOnStack:!1,equalizeByRow:!1,equalizeOn:""},Foundation.plugin(t,"Equalizer")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,i),this.rules=[],this.currentPath="",this._init(),this._events(),Foundation.registerPlugin(this,"Interchange")}return _createClass(t,[{key:"_init",value:function(){this._addBreakpoints(),this._generateRules(),this._reflow()}},{key:"_events",value:function(){var t=this;e(window).on("resize.zf.interchange",Foundation.util.throttle(function(){t._reflow()},50))}},{key:"_reflow",value:function(){var e;for(var t in this.rules)if(this.rules.hasOwnProperty(t)){var n=this.rules[t];window.matchMedia(n.query).matches&&(e=n)}e&&this.replace(e.path)}},{key:"_addBreakpoints",value:function(){for(var e in Foundation.MediaQuery.queries)if(Foundation.MediaQuery.queries.hasOwnProperty(e)){var n=Foundation.MediaQuery.queries[e];t.SPECIAL_QUERIES[n.name]=n.value}}},{key:"_generateRules",value:function(e){var n,i=[];n=this.options.rules?this.options.rules:this.$element.data("interchange").match(/\[.*?\]/g);for(var r in n)if(n.hasOwnProperty(r)){var a=n[r].slice(1,-1).split(", "),s=a.slice(0,-1).join(""),o=a[a.length-1];t.SPECIAL_QUERIES[o]&&(o=t.SPECIAL_QUERIES[o]),i.push({path:s,query:o})}this.rules=i}},{key:"replace",value:function(t){if(this.currentPath!==t){var n=this,i="replaced.zf.interchange";"IMG"===this.$element[0].nodeName?this.$element.attr("src",t).on("load",function(){n.currentPath=t}).trigger(i):t.match(/\.(gif|jpg|jpeg|png|svg|tiff)([?#].*)?/i)?this.$element.css({"background-image":"url("+t+")"}).trigger(i):e.get(t,function(r){n.$element.html(r).trigger(i),e(r).foundation(),n.currentPath=t})}}},{key:"destroy",value:function(){}}]),t}();t.defaults={rules:null},t.SPECIAL_QUERIES={landscape:"screen and (orientation: landscape)",portrait:"screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)"},Foundation.plugin(t,"Interchange")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),i),this._init(),this.calcPoints(),Foundation.registerPlugin(this,"Magellan")}return _createClass(t,[{key:"_init",value:function(){var t=this.$element[0].id||Foundation.GetYoDigits(6,"magellan");this.$targets=e("[data-magellan-target]"),this.$links=this.$element.find("a"),this.$element.attr({"data-resize":t,"data-scroll":t,id:t}),this.$active=e(),this.scrollPos=parseInt(window.pageYOffset,10),this._events()}},{key:"calcPoints",value:function(){var t=this,n=document.body,i=document.documentElement;this.points=[],this.winHeight=Math.round(Math.max(window.innerHeight,i.clientHeight)),this.docHeight=Math.round(Math.max(n.scrollHeight,n.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight)),this.$targets.each(function(){var n=e(this),i=Math.round(n.offset().top-t.options.threshold);n.targetPoint=i,t.points.push(i)})}},{key:"_events",value:function(){var t=this;e("html, body"),{duration:t.options.animationDuration,easing:t.options.animationEasing};e(window).one("load",function(){t.options.deepLinking&&location.hash&&t.scrollToLoc(location.hash),t.calcPoints(),t._updateActive()}),this.$element.on({"resizeme.zf.trigger":this.reflow.bind(this),"scrollme.zf.trigger":this._updateActive.bind(this)}).on("click.zf.magellan",'a[href^="#"]',function(e){e.preventDefault();var n=this.getAttribute("href");t.scrollToLoc(n)}),e(window).on("popstate",function(e){t.options.deepLinking&&t.scrollToLoc(window.location.hash)})}},{key:"scrollToLoc",value:function(t){if(!e(t).length)return!1;this._inTransition=!0;var n=this,i=Math.round(e(t).offset().top-this.options.threshold/2-this.options.barOffset);e("html, body").stop(!0).animate({scrollTop:i},this.options.animationDuration,this.options.animationEasing,function(){n._inTransition=!1,n._updateActive()})}},{key:"reflow",value:function(){this.calcPoints(),this._updateActive()}},{key:"_updateActive",value:function(){if(!this._inTransition){var e,t=parseInt(window.pageYOffset,10);if(t+this.winHeight===this.docHeight)e=this.points.length-1;else if(t<this.points[0])e=void 0;else{var n=this.scrollPos<t,i=this,r=this.points.filter(function(e,r){return n?e-i.options.barOffset<=t:e-i.options.barOffset-i.options.threshold<=t});e=r.length?r.length-1:0}if(this.$active.removeClass(this.options.activeClass),this.$active=this.$links.filter('[href="#'+this.$targets.eq(e).data("magellan-target")+'"]').addClass(this.options.activeClass),this.options.deepLinking){var a="";void 0!=e&&(a=this.$active[0].getAttribute("href")),a!==window.location.hash&&(window.history.pushState?window.history.pushState(null,null,a):window.location.hash=a)}this.scrollPos=t,this.$element.trigger("update.zf.magellan",[this.$active])}}},{key:"destroy",value:function(){if(this.$element.off(".zf.trigger .zf.magellan").find("."+this.options.activeClass).removeClass(this.options.activeClass),this.options.deepLinking){var e=this.$active[0].getAttribute("href");window.location.hash.replace(e,"")}Foundation.unregisterPlugin(this)}}]),t}();t.defaults={animationDuration:500,animationEasing:"linear",threshold:50,activeClass:"active",deepLinking:!1,barOffset:0},Foundation.plugin(t,"Magellan")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),i),this.$lastTrigger=e(),this.$triggers=e(),this._init(),this._events(),Foundation.registerPlugin(this,"OffCanvas"),Foundation.Keyboard.register("OffCanvas",{ESCAPE:"close"})}return _createClass(t,[{key:"_init",value:function(){var t=this.$element.attr("id");if(this.$element.attr("aria-hidden","true"),this.$element.addClass("is-transition-"+this.options.transition),this.$triggers=e(document).find('[data-open="'+t+'"], [data-close="'+t+'"], [data-toggle="'+t+'"]').attr("aria-expanded","false").attr("aria-controls",t),this.options.contentOverlay===!0){var n=document.createElement("div"),i="fixed"===e(this.$element).css("position")?"is-overlay-fixed":"is-overlay-absolute";n.setAttribute("class","js-off-canvas-overlay "+i),this.$overlay=e(n),"is-overlay-fixed"===i?e("body").append(this.$overlay):this.$element.siblings("[data-off-canvas-content]").append(this.$overlay)}this.options.isRevealed=this.options.isRevealed||new RegExp(this.options.revealClass,"g").test(this.$element[0].className),this.options.isRevealed===!0&&(this.options.revealOn=this.options.revealOn||this.$element[0].className.match(/(reveal-for-medium|reveal-for-large)/g)[0].split("-")[2],this._setMQChecker()),!this.options.transitionTime==!0&&(this.options.transitionTime=1e3*parseFloat(window.getComputedStyle(e("[data-off-canvas]")[0]).transitionDuration))}},{key:"_events",value:function(){if(this.$element.off(".zf.trigger .zf.offcanvas").on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"keydown.zf.offcanvas":this._handleKeyboard.bind(this)}),this.options.closeOnClick===!0){var t=this.options.contentOverlay?this.$overlay:e("[data-off-canvas-content]");t.on({"click.zf.offcanvas":this.close.bind(this)})}}},{key:"_setMQChecker",value:function(){var t=this;e(window).on("changed.zf.mediaquery",function(){Foundation.MediaQuery.atLeast(t.options.revealOn)?t.reveal(!0):t.reveal(!1)}).one("load.zf.offcanvas",function(){Foundation.MediaQuery.atLeast(t.options.revealOn)&&t.reveal(!0)})}},{key:"reveal",value:function(e){var t=this.$element.find("[data-close]");e?(this.close(),this.isRevealed=!0,this.$element.attr("aria-hidden","false"),this.$element.off("open.zf.trigger toggle.zf.trigger"),t.length&&t.hide()):(this.isRevealed=!1,this.$element.attr("aria-hidden","true"),this.$element.on({"open.zf.trigger":this.open.bind(this),"toggle.zf.trigger":this.toggle.bind(this)}),t.length&&t.show())}},{key:"_stopScrolling",value:function(e){return!1}},{key:"open",value:function(t,n){if(!this.$element.hasClass("is-open")&&!this.isRevealed){var i=this;n&&(this.$lastTrigger=n),"top"===this.options.forceTo?window.scrollTo(0,0):"bottom"===this.options.forceTo&&window.scrollTo(0,document.body.scrollHeight),i.$element.addClass("is-open"),this.$triggers.attr("aria-expanded","true"),this.$element.attr("aria-hidden","false").trigger("opened.zf.offcanvas"),this.options.contentScroll===!1&&e("body").addClass("is-off-canvas-open").on("touchmove",this._stopScrolling),this.options.contentOverlay===!0&&this.$overlay.addClass("is-visible"),this.options.closeOnClick===!0&&this.options.contentOverlay===!0&&this.$overlay.addClass("is-closable"),this.options.autoFocus===!0&&this.$element.one(Foundation.transitionend(this.$element),function(){i.$element.find("a, button").eq(0).focus()}),this.options.trapFocus===!0&&(this.$element.siblings("[data-off-canvas-content]").attr("tabindex","-1"),Foundation.Keyboard.trapFocus(this.$element))}}},{key:"close",value:function(t){if(this.$element.hasClass("is-open")&&!this.isRevealed){var n=this;n.$element.removeClass("is-open"),this.$element.attr("aria-hidden","true").trigger("closed.zf.offcanvas"),this.options.contentScroll===!1&&e("body").removeClass("is-off-canvas-open").off("touchmove",this._stopScrolling),this.options.contentOverlay===!0&&this.$overlay.removeClass("is-visible"),this.options.closeOnClick===!0&&this.options.contentOverlay===!0&&this.$overlay.removeClass("is-closable"),this.$triggers.attr("aria-expanded","false"),this.options.trapFocus===!0&&(this.$element.siblings("[data-off-canvas-content]").removeAttr("tabindex"),Foundation.Keyboard.releaseFocus(this.$element))}}},{key:"toggle",value:function(e,t){this.$element.hasClass("is-open")?this.close(e,t):this.open(e,t)}},{key:"_handleKeyboard",value:function(e){var t=this;Foundation.Keyboard.handleKey(e,"OffCanvas",{
close:function(){return t.close(),t.$lastTrigger.focus(),!0},handled:function(){e.stopPropagation(),e.preventDefault()}})}},{key:"destroy",value:function(){this.close(),this.$element.off(".zf.trigger .zf.offcanvas"),this.$overlay.off(".zf.offcanvas"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={closeOnClick:!0,contentOverlay:!0,contentScroll:!0,transitionTime:0,transition:"push",forceTo:null,isRevealed:!1,revealOn:null,autoFocus:!0,revealClass:"reveal-for-",trapFocus:!1},Foundation.plugin(t,"OffCanvas")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Orbit"),Foundation.Keyboard.register("Orbit",{ltr:{ARROW_RIGHT:"next",ARROW_LEFT:"previous"},rtl:{ARROW_LEFT:"next",ARROW_RIGHT:"previous"}})}return _createClass(t,[{key:"_init",value:function(){this._reset(),this.$wrapper=this.$element.find("."+this.options.containerClass),this.$slides=this.$element.find("."+this.options.slideClass);var e=this.$element.find("img"),t=this.$slides.filter(".is-active"),n=this.$element[0].id||Foundation.GetYoDigits(6,"orbit");this.$element.attr({"data-resize":n,id:n}),t.length||this.$slides.eq(0).addClass("is-active"),this.options.useMUI||this.$slides.addClass("no-motionui"),e.length?Foundation.onImagesLoaded(e,this._prepareForOrbit.bind(this)):this._prepareForOrbit(),this.options.bullets&&this._loadBullets(),this._events(),this.options.autoPlay&&this.$slides.length>1&&this.geoSync(),this.options.accessible&&this.$wrapper.attr("tabindex",0)}},{key:"_loadBullets",value:function(){this.$bullets=this.$element.find("."+this.options.boxOfBullets).find("button")}},{key:"geoSync",value:function(){var e=this;this.timer=new Foundation.Timer(this.$element,{duration:this.options.timerDelay,infinite:!1},function(){e.changeSlide(!0)}),this.timer.start()}},{key:"_prepareForOrbit",value:function(){this._setWrapperHeight()}},{key:"_setWrapperHeight",value:function(t){var n,i=0,r=0,a=this;this.$slides.each(function(){n=this.getBoundingClientRect().height,e(this).attr("data-slide",r),a.$slides.filter(".is-active")[0]!==a.$slides.eq(r)[0]&&e(this).css({position:"relative",display:"none"}),i=n>i?n:i,r++}),r===this.$slides.length&&(this.$wrapper.css({height:i}),t&&t(i))}},{key:"_setSlideHeight",value:function(t){this.$slides.each(function(){e(this).css("max-height",t)})}},{key:"_events",value:function(){var t=this;if(this.$element.off(".resizeme.zf.trigger").on({"resizeme.zf.trigger":this._prepareForOrbit.bind(this)}),this.$slides.length>1){if(this.options.swipe&&this.$slides.off("swipeleft.zf.orbit swiperight.zf.orbit").on("swipeleft.zf.orbit",function(e){e.preventDefault(),t.changeSlide(!0)}).on("swiperight.zf.orbit",function(e){e.preventDefault(),t.changeSlide(!1)}),this.options.autoPlay&&(this.$slides.on("click.zf.orbit",function(){t.$element.data("clickedOn",!t.$element.data("clickedOn")),t.timer[t.$element.data("clickedOn")?"pause":"start"]()}),this.options.pauseOnHover&&this.$element.on("mouseenter.zf.orbit",function(){t.timer.pause()}).on("mouseleave.zf.orbit",function(){t.$element.data("clickedOn")||t.timer.start()})),this.options.navButtons){var n=this.$element.find("."+this.options.nextClass+", ."+this.options.prevClass);n.attr("tabindex",0).on("click.zf.orbit touchend.zf.orbit",function(n){n.preventDefault(),t.changeSlide(e(this).hasClass(t.options.nextClass))})}this.options.bullets&&this.$bullets.on("click.zf.orbit touchend.zf.orbit",function(){if(/is-active/g.test(this.className))return!1;var n=e(this).data("slide"),i=n>t.$slides.filter(".is-active").data("slide"),r=t.$slides.eq(n);t.changeSlide(i,r,n)}),this.options.accessible&&this.$wrapper.add(this.$bullets).on("keydown.zf.orbit",function(n){Foundation.Keyboard.handleKey(n,"Orbit",{next:function(){t.changeSlide(!0)},previous:function(){t.changeSlide(!1)},handled:function(){e(n.target).is(t.$bullets)&&t.$bullets.filter(".is-active").focus()}})})}}},{key:"_reset",value:function(){"undefined"!=typeof this.$slides&&this.$slides.length>1&&(this.$element.off(".zf.orbit").find("*").off(".zf.orbit"),this.options.autoPlay&&this.timer.restart(),this.$slides.each(function(t){e(t).removeClass("is-active is-active is-in").removeAttr("aria-live").hide()}),this.$slides.first().addClass("is-active").show(),this.$element.trigger("slidechange.zf.orbit",[this.$slides.first()]),this.options.bullets&&this._updateBullets(0))}},{key:"changeSlide",value:function(e,t,n){if(this.$slides){var i=this.$slides.filter(".is-active").eq(0);if(/mui/g.test(i[0].className))return!1;var r,a=this.$slides.first(),s=this.$slides.last(),o=e?"Right":"Left",l=e?"Left":"Right",u=this;r=t?t:e?this.options.infiniteWrap?i.next("."+this.options.slideClass).length?i.next("."+this.options.slideClass):a:i.next("."+this.options.slideClass):this.options.infiniteWrap?i.prev("."+this.options.slideClass).length?i.prev("."+this.options.slideClass):s:i.prev("."+this.options.slideClass),r.length&&(this.$element.trigger("beforeslidechange.zf.orbit",[i,r]),this.options.bullets&&(n=n||this.$slides.index(r),this._updateBullets(n)),this.options.useMUI&&!this.$element.is(":hidden")?(Foundation.Motion.animateIn(r.addClass("is-active").css({position:"absolute",top:0}),this.options["animInFrom"+o],function(){r.css({position:"relative",display:"block"}).attr("aria-live","polite")}),Foundation.Motion.animateOut(i.removeClass("is-active"),this.options["animOutTo"+l],function(){i.removeAttr("aria-live"),u.options.autoPlay&&!u.timer.isPaused&&u.timer.restart()})):(i.removeClass("is-active is-in").removeAttr("aria-live").hide(),r.addClass("is-active is-in").attr("aria-live","polite").show(),this.options.autoPlay&&!this.timer.isPaused&&this.timer.restart()),this.$element.trigger("slidechange.zf.orbit",[r]))}}},{key:"_updateBullets",value:function(e){var t=this.$element.find("."+this.options.boxOfBullets).find(".is-active").removeClass("is-active").blur(),n=t.find("span:last").detach();this.$bullets.eq(e).addClass("is-active").append(n)}},{key:"destroy",value:function(){this.$element.off(".zf.orbit").find("*").off(".zf.orbit").end().hide(),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={bullets:!0,navButtons:!0,animInFromRight:"slide-in-right",animOutToRight:"slide-out-right",animInFromLeft:"slide-in-left",animOutToLeft:"slide-out-left",autoPlay:!0,timerDelay:5e3,infiniteWrap:!0,swipe:!0,pauseOnHover:!0,accessible:!0,containerClass:"orbit-container",slideClass:"orbit-slide",boxOfBullets:"orbit-bullets",nextClass:"orbit-next",prevClass:"orbit-previous",useMUI:!0},Foundation.plugin(t,"Orbit")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=e(n),this.rules=this.$element.data("responsive-menu"),this.currentMq=null,this.currentPlugin=null,this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveMenu")}return _createClass(t,[{key:"_init",value:function(){if("string"==typeof this.rules){for(var t={},i=this.rules.split(" "),r=0;r<i.length;r++){var a=i[r].split("-"),s=a.length>1?a[0]:"small",o=a.length>1?a[1]:a[0];null!==n[o]&&(t[s]=n[o])}this.rules=t}e.isEmptyObject(this.rules)||this._checkMediaQueries(),this.$element.attr("data-mutate",this.$element.attr("data-mutate")||Foundation.GetYoDigits(6,"responsive-menu"))}},{key:"_events",value:function(){var t=this;e(window).on("changed.zf.mediaquery",function(){t._checkMediaQueries()})}},{key:"_checkMediaQueries",value:function(){var t,i=this;e.each(this.rules,function(e){Foundation.MediaQuery.atLeast(e)&&(t=e)}),t&&(this.currentPlugin instanceof this.rules[t].plugin||(e.each(n,function(e,t){i.$element.removeClass(t.cssClass)}),this.$element.addClass(this.rules[t].cssClass),this.currentPlugin&&this.currentPlugin.destroy(),this.currentPlugin=new this.rules[t].plugin(this.$element,{})))}},{key:"destroy",value:function(){this.currentPlugin.destroy(),e(window).off(".zf.ResponsiveMenu"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={};var n={dropdown:{cssClass:"dropdown",plugin:Foundation._plugins["dropdown-menu"]||null},drilldown:{cssClass:"drilldown",plugin:Foundation._plugins.drilldown||null},accordion:{cssClass:"accordion-menu",plugin:Foundation._plugins["accordion-menu"]||null}};Foundation.plugin(t,"ResponsiveMenu")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=e(n),this.options=e.extend({},t.defaults,this.$element.data(),i),this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveToggle")}return _createClass(t,[{key:"_init",value:function(){var t=this.$element.data("responsive-toggle");if(t||console.error("Your tab bar needs an ID of a Menu as the value of data-tab-bar."),this.$targetMenu=e("#"+t),this.$toggler=this.$element.find("[data-toggle]"),this.options=e.extend({},this.options,this.$targetMenu.data()),this.options.animate){var n=this.options.animate.split(" ");this.animationIn=n[0],this.animationOut=n[1]||null}this._update()}},{key:"_events",value:function(){this._updateMqHandler=this._update.bind(this),e(window).on("changed.zf.mediaquery",this._updateMqHandler),this.$toggler.on("click.zf.responsiveToggle",this.toggleMenu.bind(this))}},{key:"_update",value:function(){Foundation.MediaQuery.atLeast(this.options.hideFor)?(this.$element.hide(),this.$targetMenu.show()):(this.$element.show(),this.$targetMenu.hide())}},{key:"toggleMenu",value:function(){var e=this;Foundation.MediaQuery.atLeast(this.options.hideFor)||(this.options.animate?this.$targetMenu.is(":hidden")?Foundation.Motion.animateIn(this.$targetMenu,this.animationIn,function(){e.$element.trigger("toggled.zf.responsiveToggle"),e.$targetMenu.find("[data-mutate]").triggerHandler("mutateme.zf.trigger")}):Foundation.Motion.animateOut(this.$targetMenu,this.animationOut,function(){e.$element.trigger("toggled.zf.responsiveToggle")}):(this.$targetMenu.toggle(0),this.$targetMenu.find("[data-mutate]").trigger("mutateme.zf.trigger"),this.$element.trigger("toggled.zf.responsiveToggle")))}},{key:"destroy",value:function(){this.$element.off(".zf.responsiveToggle"),this.$toggler.off(".zf.responsiveToggle"),e(window).off("changed.zf.mediaquery",this._updateMqHandler),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={hideFor:"medium",animate:!1},Foundation.plugin(t,"ResponsiveToggle")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){function t(){return/iP(ad|hone|od).*OS/.test(window.navigator.userAgent)}function n(){return/Android/.test(window.navigator.userAgent)}function i(){return t()||n()}var r=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Reveal"),Foundation.Keyboard.register("Reveal",{ENTER:"open",SPACE:"open",ESCAPE:"close"})}return _createClass(t,[{key:"_init",value:function(){this.id=this.$element.attr("id"),this.isActive=!1,this.cached={mq:Foundation.MediaQuery.current},this.isMobile=i(),this.$anchor=e(e('[data-open="'+this.id+'"]').length?'[data-open="'+this.id+'"]':'[data-toggle="'+this.id+'"]'),this.$anchor.attr({"aria-controls":this.id,"aria-haspopup":!0,tabindex:0}),(this.options.fullScreen||this.$element.hasClass("full"))&&(this.options.fullScreen=!0,this.options.overlay=!1),this.options.overlay&&!this.$overlay&&(this.$overlay=this._makeOverlay(this.id)),this.$element.attr({role:"dialog","aria-hidden":!0,"data-yeti-box":this.id,"data-resize":this.id}),this.$overlay?this.$element.detach().appendTo(this.$overlay):(this.$element.detach().appendTo(e(this.options.appendTo)),this.$element.addClass("without-overlay")),this._events(),this.options.deepLink&&window.location.hash==="#"+this.id&&e(window).one("load.zf.reveal",this.open.bind(this))}},{key:"_makeOverlay",value:function(){return e("<div></div>").addClass("reveal-overlay").appendTo(this.options.appendTo)}},{key:"_updatePosition",value:function(){var t,n,i=this.$element.outerWidth(),r=e(window).width(),a=this.$element.outerHeight(),s=e(window).height();t="auto"===this.options.hOffset?parseInt((r-i)/2,10):parseInt(this.options.hOffset,10),n="auto"===this.options.vOffset?a>s?parseInt(Math.min(100,s/10),10):parseInt((s-a)/4,10):parseInt(this.options.vOffset,10),this.$element.css({top:n+"px"}),this.$overlay&&"auto"===this.options.hOffset||(this.$element.css({left:t+"px"}),this.$element.css({margin:"0px"}))}},{key:"_events",value:function(){var t=this,n=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":function(i,r){if(i.target===n.$element[0]||e(i.target).parents("[data-closable]")[0]===r)return t.close.apply(t)},"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":function(){n._updatePosition()}}),this.$anchor.length&&this.$anchor.on("keydown.zf.reveal",function(e){13!==e.which&&32!==e.which||(e.stopPropagation(),e.preventDefault(),n.open())}),this.options.closeOnClick&&this.options.overlay&&this.$overlay.off(".zf.reveal").on("click.zf.reveal",function(t){t.target!==n.$element[0]&&!e.contains(n.$element[0],t.target)&&e.contains(document,t.target)&&n.close()}),this.options.deepLink&&e(window).on("popstate.zf.reveal:"+this.id,this._handleState.bind(this))}},{key:"_handleState",value:function(e){window.location.hash!=="#"+this.id||this.isActive?this.close():this.open()}},{key:"open",value:function(){function t(){r.isMobile?(r.originalScrollPos||(r.originalScrollPos=window.pageYOffset),e("html, body").addClass("is-reveal-open")):e("body").addClass("is-reveal-open")}var n=this;if(this.options.deepLink){var i="#"+this.id;window.history.pushState?window.history.pushState(null,null,i):window.location.hash=i}this.isActive=!0,this.$element.css({visibility:"hidden"}).show().scrollTop(0),this.options.overlay&&this.$overlay.css({visibility:"hidden"}).show(),this._updatePosition(),this.$element.hide().css({visibility:""}),this.$overlay&&(this.$overlay.css({visibility:""}).hide(),this.$element.hasClass("fast")?this.$overlay.addClass("fast"):this.$element.hasClass("slow")&&this.$overlay.addClass("slow")),this.options.multipleOpened||this.$element.trigger("closeme.zf.reveal",this.id);var r=this;this.options.animationIn?!function(){var e=function(){r.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),t(),Foundation.Keyboard.trapFocus(r.$element)};n.options.overlay&&Foundation.Motion.animateIn(n.$overlay,"fade-in"),Foundation.Motion.animateIn(n.$element,n.options.animationIn,function(){n.$element&&(n.focusableElements=Foundation.Keyboard.findFocusable(n.$element),e())})}():(this.options.overlay&&this.$overlay.show(0),this.$element.show(this.options.showDelay)),this.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),Foundation.Keyboard.trapFocus(this.$element),this.$element.trigger("open.zf.reveal"),t(),setTimeout(function(){n._extraHandlers()},0)}},{key:"_extraHandlers",value:function(){var t=this;this.$element&&(this.focusableElements=Foundation.Keyboard.findFocusable(this.$element),this.options.overlay||!this.options.closeOnClick||this.options.fullScreen||e("body").on("click.zf.reveal",function(n){n.target!==t.$element[0]&&!e.contains(t.$element[0],n.target)&&e.contains(document,n.target)&&t.close()}),this.options.closeOnEsc&&e(window).on("keydown.zf.reveal",function(e){Foundation.Keyboard.handleKey(e,"Reveal",{close:function(){t.options.closeOnEsc&&(t.close(),t.$anchor.focus())}})}),this.$element.on("keydown.zf.reveal",function(n){var i=e(this);Foundation.Keyboard.handleKey(n,"Reveal",{open:function(){t.$element.find(":focus").is(t.$element.find("[data-close]"))?setTimeout(function(){t.$anchor.focus()},1):i.is(t.focusableElements)&&t.open()},close:function(){t.options.closeOnEsc&&(t.close(),t.$anchor.focus())},handled:function(e){e&&n.preventDefault()}})}))}},{key:"close",value:function(){function t(){n.isMobile?(e("html, body").removeClass("is-reveal-open"),n.originalScrollPos&&(e("body").scrollTop(n.originalScrollPos),n.originalScrollPos=null)):e("body").removeClass("is-reveal-open"),Foundation.Keyboard.releaseFocus(n.$element),n.$element.attr("aria-hidden",!0),n.$element.trigger("closed.zf.reveal")}if(!this.isActive||!this.$element.is(":visible"))return!1;var n=this;this.options.animationOut?(this.options.overlay?Foundation.Motion.animateOut(this.$overlay,"fade-out",t):t(),Foundation.Motion.animateOut(this.$element,this.options.animationOut)):(this.options.overlay?this.$overlay.hide(0,t):t(),this.$element.hide(this.options.hideDelay)),this.options.closeOnEsc&&e(window).off("keydown.zf.reveal"),!this.options.overlay&&this.options.closeOnClick&&e("body").off("click.zf.reveal"),this.$element.off("keydown.zf.reveal"),this.options.resetOnClose&&this.$element.html(this.$element.html()),this.isActive=!1,n.options.deepLink&&(window.history.replaceState?window.history.replaceState("",document.title,window.location.href.replace("#"+this.id,"")):window.location.hash="")}},{key:"toggle",value:function(){this.isActive?this.close():this.open()}},{key:"destroy",value:function(){this.options.overlay&&(this.$element.appendTo(e(this.options.appendTo)),this.$overlay.hide().off().remove()),this.$element.hide().off(),this.$anchor.off(".zf"),e(window).off(".zf.reveal:"+this.id),Foundation.unregisterPlugin(this)}}]),t}();r.defaults={animationIn:"",animationOut:"",showDelay:0,hideDelay:0,closeOnClick:!0,closeOnEsc:!0,multipleOpened:!1,vOffset:"auto",hOffset:"auto",fullScreen:!1,btmOffsetPct:10,overlay:!0,resetOnClose:!1,deepLink:!1,appendTo:"body"},Foundation.plugin(r,"Reveal")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){function t(e,t){return e/t}function n(e,t,n,i){return Math.abs(e.position()[t]+e[i]()/2-n)}function i(e,t){return Math.log(t)/Math.log(e)}var r=function(){function r(t,n){_classCallCheck(this,r),this.$element=t,this.options=e.extend({},r.defaults,this.$element.data(),n),this._init(),Foundation.registerPlugin(this,"Slider"),Foundation.Keyboard.register("Slider",{ltr:{ARROW_RIGHT:"increase",ARROW_UP:"increase",ARROW_DOWN:"decrease",ARROW_LEFT:"decrease",SHIFT_ARROW_RIGHT:"increase_fast",SHIFT_ARROW_UP:"increase_fast",SHIFT_ARROW_DOWN:"decrease_fast",SHIFT_ARROW_LEFT:"decrease_fast"},rtl:{ARROW_LEFT:"increase",ARROW_RIGHT:"decrease",SHIFT_ARROW_LEFT:"increase_fast",SHIFT_ARROW_RIGHT:"decrease_fast"}})}return _createClass(r,[{key:"_init",value:function(){this.inputs=this.$element.find("input"),this.handles=this.$element.find("[data-slider-handle]"),this.$handle=this.handles.eq(0),this.$input=this.inputs.length?this.inputs.eq(0):e("#"+this.$handle.attr("aria-controls")),this.$fill=this.$element.find("[data-slider-fill]").css(this.options.vertical?"height":"width",0);var t=!1;(this.options.disabled||this.$element.hasClass(this.options.disabledClass))&&(this.options.disabled=!0,this.$element.addClass(this.options.disabledClass)),this.inputs.length||(this.inputs=e().add(this.$input),this.options.binding=!0),this._setInitAttr(0),this.handles[1]&&(this.options.doubleSided=!0,this.$handle2=this.handles.eq(1),this.$input2=this.inputs.length>1?this.inputs.eq(1):e("#"+this.$handle2.attr("aria-controls")),this.inputs[1]||(this.inputs=this.inputs.add(this.$input2)),t=!0,this._setInitAttr(1)),this.setHandles(),this._events()}},{key:"setHandles",value:function(){var e=this;this.handles[1]?this._setHandlePos(this.$handle,this.inputs.eq(0).val(),!0,function(){e._setHandlePos(e.$handle2,e.inputs.eq(1).val(),!0)}):this._setHandlePos(this.$handle,this.inputs.eq(0).val(),!0)}},{key:"_reflow",value:function(){this.setHandles()}},{key:"_pctOfBar",value:function(e){var n=t(e-this.options.start,this.options.end-this.options.start);switch(this.options.positionValueFunction){case"pow":n=this._logTransform(n);break;case"log":n=this._powTransform(n)}return n.toFixed(2)}},{key:"_value",value:function(e){switch(this.options.positionValueFunction){case"pow":e=this._powTransform(e);break;case"log":e=this._logTransform(e)}var t=(this.options.end-this.options.start)*e+this.options.start;return t}},{key:"_logTransform",value:function(e){return i(this.options.nonLinearBase,e*(this.options.nonLinearBase-1)+1)}},{key:"_powTransform",value:function(e){return(Math.pow(this.options.nonLinearBase,e)-1)/(this.options.nonLinearBase-1)}},{key:"_setHandlePos",value:function(e,n,i,r){if(!this.$element.hasClass(this.options.disabledClass)){n=parseFloat(n),n<this.options.start?n=this.options.start:n>this.options.end&&(n=this.options.end);var a=this.options.doubleSided;if(a)if(0===this.handles.index(e)){var s=parseFloat(this.$handle2.attr("aria-valuenow"));n=n>=s?s-this.options.step:n}else{var o=parseFloat(this.$handle.attr("aria-valuenow"));n=n<=o?o+this.options.step:n}this.options.vertical&&!i&&(n=this.options.end-n);var l=this,u=this.options.vertical,c=u?"height":"width",f=u?"top":"left",d=e[0].getBoundingClientRect()[c],p=this.$element[0].getBoundingClientRect()[c],h=this._pctOfBar(n),g=(p-d)*h,y=(100*t(g,p)).toFixed(this.options.decimal);n=parseFloat(n.toFixed(this.options.decimal));var m={};if(this._setValues(e,n),a){var v,C=0===this.handles.index(e),b=~~(100*t(d,p));if(C)m[f]=y+"%",v=parseFloat(this.$handle2[0].style[f])-y+b,r&&"function"==typeof r&&r();else{var E=parseFloat(this.$handle[0].style[f]);v=y-(isNaN(E)?(this.options.initialStart-this.options.start)/((this.options.end-this.options.start)/100):E)+b}m["min-"+c]=v+"%"}this.$element.one("finished.zf.animate",function(){l.$element.trigger("moved.zf.slider",[e])});var S=this.$element.data("dragging")?1e3/60:this.options.moveTime;Foundation.Move(S,e,function(){isNaN(y)?e.css(f,100*h+"%"):e.css(f,y+"%"),l.options.doubleSided?l.$fill.css(m):l.$fill.css(c,100*h+"%")}),clearTimeout(l.timeout),l.timeout=setTimeout(function(){l.$element.trigger("changed.zf.slider",[e])},l.options.changedDelay)}}},{key:"_setInitAttr",value:function(e){var t=0===e?this.options.initialStart:this.options.initialEnd,n=this.inputs.eq(e).attr("id")||Foundation.GetYoDigits(6,"slider");this.inputs.eq(e).attr({id:n,max:this.options.end,min:this.options.start,step:this.options.step}),this.inputs.eq(e).val(t),this.handles.eq(e).attr({role:"slider","aria-controls":n,"aria-valuemax":this.options.end,"aria-valuemin":this.options.start,"aria-valuenow":t,"aria-orientation":this.options.vertical?"vertical":"horizontal",tabindex:0})}},{key:"_setValues",value:function(e,t){var n=this.options.doubleSided?this.handles.index(e):0;this.inputs.eq(n).val(t),e.attr("aria-valuenow",t)}},{key:"_handleEvent",value:function(i,r,a){var s,o;if(a)s=this._adjustValue(null,a),o=!0;else{i.preventDefault();var l=this,u=this.options.vertical,c=u?"height":"width",f=u?"top":"left",d=u?i.pageY:i.pageX,p=(this.$handle[0].getBoundingClientRect()[c]/2,this.$element[0].getBoundingClientRect()[c]),h=u?e(window).scrollTop():e(window).scrollLeft(),g=this.$element.offset()[f];i.clientY===i.pageY&&(d+=h);var y,m=d-g;y=m<0?0:m>p?p:m;var v=t(y,p);if(s=this._value(v),Foundation.rtl()&&!this.options.vertical&&(s=this.options.end-s),s=l._adjustValue(null,s),o=!1,!r){var C=n(this.$handle,f,y,c),b=n(this.$handle2,f,y,c);r=C<=b?this.$handle:this.$handle2}}this._setHandlePos(r,s,o)}},{key:"_adjustValue",value:function(e,t){var n,i,r,a,s=this.options.step,o=parseFloat(s/2);return n=e?parseFloat(e.attr("aria-valuenow")):t,i=n%s,r=n-i,a=r+s,0===i?n:n=n>=r+o?a:r}},{key:"_events",value:function(){this._eventsForHandle(this.$handle),this.handles[1]&&this._eventsForHandle(this.$handle2)}},{key:"_eventsForHandle",value:function(t){var n,i=this;if(this.inputs.off("change.zf.slider").on("change.zf.slider",function(t){var n=i.inputs.index(e(this));i._handleEvent(t,i.handles.eq(n),e(this).val())}),this.options.clickSelect&&this.$element.off("click.zf.slider").on("click.zf.slider",function(t){return!i.$element.data("dragging")&&void(e(t.target).is("[data-slider-handle]")||(i.options.doubleSided?i._handleEvent(t):i._handleEvent(t,i.$handle)))}),this.options.draggable){this.handles.addTouch();var r=e("body");t.off("mousedown.zf.slider").on("mousedown.zf.slider",function(a){t.addClass("is-dragging"),i.$fill.addClass("is-dragging"),i.$element.data("dragging",!0),n=e(a.currentTarget),r.on("mousemove.zf.slider",function(e){e.preventDefault(),i._handleEvent(e,n)}).on("mouseup.zf.slider",function(e){i._handleEvent(e,n),t.removeClass("is-dragging"),i.$fill.removeClass("is-dragging"),i.$element.data("dragging",!1),r.off("mousemove.zf.slider mouseup.zf.slider")})}).on("selectstart.zf.slider touchmove.zf.slider",function(e){e.preventDefault()})}t.off("keydown.zf.slider").on("keydown.zf.slider",function(t){var n,r=e(this),a=i.options.doubleSided?i.handles.index(r):0,s=parseFloat(i.inputs.eq(a).val());Foundation.Keyboard.handleKey(t,"Slider",{decrease:function(){n=s-i.options.step},increase:function(){n=s+i.options.step},decrease_fast:function(){n=s-10*i.options.step},increase_fast:function(){n=s+10*i.options.step},handled:function(){t.preventDefault(),i._setHandlePos(r,n,!0)}})})}},{key:"destroy",value:function(){this.handles.off(".zf.slider"),this.inputs.off(".zf.slider"),this.$element.off(".zf.slider"),clearTimeout(this.timeout),Foundation.unregisterPlugin(this)}}]),r}();r.defaults={start:0,end:100,step:1,initialStart:0,initialEnd:100,binding:!1,clickSelect:!0,vertical:!1,draggable:!0,disabled:!1,doubleSided:!1,decimal:2,moveTime:200,disabledClass:"disabled",invertVertical:!1,changedDelay:500,nonLinearBase:5,positionValueFunction:"linear"},Foundation.plugin(r,"Slider")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){function t(e){return parseInt(window.getComputedStyle(document.body,null).fontSize,10)*e}var n=function(){function n(t,i){_classCallCheck(this,n),this.$element=t,this.options=e.extend({},n.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Sticky")}return _createClass(n,[{key:"_init",value:function(){var t=this.$element.parent("[data-sticky-container]"),n=this.$element[0].id||Foundation.GetYoDigits(6,"sticky"),i=this;t.length||(this.wasWrapped=!0),this.$container=t.length?t:e(this.options.container).wrapInner(this.$element),this.$container.addClass(this.options.containerClass),this.$element.addClass(this.options.stickyClass).attr({"data-resize":n}),this.scrollCount=this.options.checkEvery,this.isStuck=!1,e(window).one("load.zf.sticky",function(){i.containerHeight="none"==i.$element.css("display")?0:i.$element[0].getBoundingClientRect().height,i.$container.css("height",i.containerHeight),i.elemHeight=i.containerHeight,""!==i.options.anchor?i.$anchor=e("#"+i.options.anchor):i._parsePoints(),i._setSizes(function(){var e=window.pageYOffset;i._calc(!1,e),i.isStuck||i._removeSticky(!(e>=i.topPoint))}),i._events(n.split("-").reverse().join("-"))})}},{key:"_parsePoints",value:function(){for(var t=""==this.options.topAnchor?1:this.options.topAnchor,n=""==this.options.btmAnchor?document.documentElement.scrollHeight:this.options.btmAnchor,i=[t,n],r={},a=0,s=i.length;a<s&&i[a];a++){var o;if("number"==typeof i[a])o=i[a];else{var l=i[a].split(":"),u=e("#"+l[0]);o=u.offset().top,l[1]&&"bottom"===l[1].toLowerCase()&&(o+=u[0].getBoundingClientRect().height)}r[a]=o}this.points=r}},{key:"_events",value:function(t){var n=this,i=this.scrollListener="scroll.zf."+t;this.isOn||(this.canStick&&(this.isOn=!0,e(window).off(i).on(i,function(e){0===n.scrollCount?(n.scrollCount=n.options.checkEvery,n._setSizes(function(){n._calc(!1,window.pageYOffset)})):(n.scrollCount--,n._calc(!1,window.pageYOffset))})),this.$element.off("resizeme.zf.trigger").on("resizeme.zf.trigger",function(e,r){n._setSizes(function(){n._calc(!1),n.canStick?n.isOn||n._events(t):n.isOn&&n._pauseListeners(i)})}))}},{key:"_pauseListeners",value:function(t){this.isOn=!1,e(window).off(t),this.$element.trigger("pause.zf.sticky")}},{key:"_calc",value:function(e,t){return e&&this._setSizes(),this.canStick?(t||(t=window.pageYOffset),void(t>=this.topPoint?t<=this.bottomPoint?this.isStuck||this._setSticky():this.isStuck&&this._removeSticky(!1):this.isStuck&&this._removeSticky(!0))):(this.isStuck&&this._removeSticky(!0),!1)}},{key:"_setSticky",value:function(){var e=this,t=this.options.stickTo,n="top"===t?"marginTop":"marginBottom",i="top"===t?"bottom":"top",r={};r[n]=this.options[n]+"em",r[t]=0,r[i]="auto",this.isStuck=!0,this.$element.removeClass("is-anchored is-at-"+i).addClass("is-stuck is-at-"+t).css(r).trigger("sticky.zf.stuckto:"+t),this.$element.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){e._setSizes()})}},{key:"_removeSticky",value:function(e){var t=this.options.stickTo,n="top"===t,i={},r=(this.points?this.points[1]-this.points[0]:this.anchorHeight)-this.elemHeight,a=n?"marginTop":"marginBottom",s=e?"top":"bottom";i[a]=0,i.bottom="auto",e?i.top=0:i.top=r,this.isStuck=!1,this.$element.removeClass("is-stuck is-at-"+t).addClass("is-anchored is-at-"+s).css(i).trigger("sticky.zf.unstuckfrom:"+s)}},{key:"_setSizes",value:function(e){this.canStick=Foundation.MediaQuery.is(this.options.stickyOn),this.canStick||e&&"function"==typeof e&&e();var t=this.$container[0].getBoundingClientRect().width,n=window.getComputedStyle(this.$container[0]),i=parseInt(n["padding-left"],10),r=parseInt(n["padding-right"],10);this.$anchor&&this.$anchor.length?this.anchorHeight=this.$anchor[0].getBoundingClientRect().height:this._parsePoints(),this.$element.css({"max-width":t-i-r+"px"});var a=this.$element[0].getBoundingClientRect().height||this.containerHeight;if("none"==this.$element.css("display")&&(a=0),this.containerHeight=a,this.$container.css({height:a}),this.elemHeight=a,!this.isStuck&&this.$element.hasClass("is-at-bottom")){var s=(this.points?this.points[1]-this.$container.offset().top:this.anchorHeight)-this.elemHeight;this.$element.css("top",s)}this._setBreakPoints(a,function(){e&&"function"==typeof e&&e()})}},{key:"_setBreakPoints",value:function(e,n){if(!this.canStick){if(!n||"function"!=typeof n)return!1;n()}var i=t(this.options.marginTop),r=t(this.options.marginBottom),a=this.points?this.points[0]:this.$anchor.offset().top,s=this.points?this.points[1]:a+this.anchorHeight,o=window.innerHeight;"top"===this.options.stickTo?(a-=i,s-=e+i):"bottom"===this.options.stickTo&&(a-=o-(e+r),s-=o-r),this.topPoint=a,this.bottomPoint=s,n&&"function"==typeof n&&n()}},{key:"destroy",value:function(){this._removeSticky(!0),this.$element.removeClass(this.options.stickyClass+" is-anchored is-at-top").css({height:"",top:"",bottom:"","max-width":""}).off("resizeme.zf.trigger"),this.$anchor&&this.$anchor.length&&this.$anchor.off("change.zf.sticky"),e(window).off(this.scrollListener),this.wasWrapped?this.$element.unwrap():this.$container.removeClass(this.options.containerClass).css({height:""
}),Foundation.unregisterPlugin(this)}}]),n}();n.defaults={container:"<div data-sticky-container></div>",stickTo:"top",anchor:"",topAnchor:"",btmAnchor:"",marginTop:1,marginBottom:1,stickyOn:"medium",stickyClass:"sticky",containerClass:"sticky-container",checkEvery:-1},Foundation.plugin(n,"Sticky")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Tabs"),Foundation.Keyboard.register("Tabs",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"previous",ARROW_DOWN:"next",ARROW_LEFT:"previous"})}return _createClass(t,[{key:"_init",value:function(){var t=this;if(this.$element.attr({role:"tablist"}),this.$tabTitles=this.$element.find("."+this.options.linkClass),this.$tabContent=e('[data-tabs-content="'+this.$element[0].id+'"]'),this.$tabTitles.each(function(){var n=e(this),i=n.find("a"),r=n.hasClass(""+t.options.linkActiveClass),a=i[0].hash.slice(1),s=i[0].id?i[0].id:a+"-label",o=e("#"+a);if(n.attr({role:"presentation"}),i.attr({role:"tab","aria-controls":a,"aria-selected":r,id:s}),o.attr({role:"tabpanel","aria-hidden":!r,"aria-labelledby":s}),r&&t.options.autoFocus&&e(window).load(function(){e("html, body").animate({scrollTop:n.offset().top},t.options.deepLinkSmudgeDelay,function(){i.focus()})}),t.options.deepLink){var l=window.location.hash;if(l.length){var i=n.find('[href="'+l+'"]');i.length&&(t.selectTab(e(l)),t.options.deepLinkSmudge&&e(window).load(function(){var i=n.offset();e("html, body").animate({scrollTop:i.top},t.options.deepLinkSmudgeDelay)}),n.trigger("deeplink.zf.tabs",[i,e(l)]))}}}),this.options.matchHeight){var n=this.$tabContent.find("img");n.length?Foundation.onImagesLoaded(n,this._setHeight.bind(this)):this._setHeight()}this._events()}},{key:"_events",value:function(){this._addKeyHandler(),this._addClickHandler(),this._setHeightMqHandler=null,this.options.matchHeight&&(this._setHeightMqHandler=this._setHeight.bind(this),e(window).on("changed.zf.mediaquery",this._setHeightMqHandler))}},{key:"_addClickHandler",value:function(){var t=this;this.$element.off("click.zf.tabs").on("click.zf.tabs","."+this.options.linkClass,function(n){n.preventDefault(),n.stopPropagation(),t._handleTabChange(e(this))})}},{key:"_addKeyHandler",value:function(){var t=this;this.$tabTitles.off("keydown.zf.tabs").on("keydown.zf.tabs",function(n){if(9!==n.which){var i,r,a=e(this),s=a.parent("ul").children("li");s.each(function(n){if(e(this).is(a))return void(t.options.wrapOnKeys?(i=0===n?s.last():s.eq(n-1),r=n===s.length-1?s.first():s.eq(n+1)):(i=s.eq(Math.max(0,n-1)),r=s.eq(Math.min(n+1,s.length-1))))}),Foundation.Keyboard.handleKey(n,"Tabs",{open:function(){a.find('[role="tab"]').focus(),t._handleTabChange(a)},previous:function(){i.find('[role="tab"]').focus(),t._handleTabChange(i)},next:function(){r.find('[role="tab"]').focus(),t._handleTabChange(r)},handled:function(){n.stopPropagation(),n.preventDefault()}})}})}},{key:"_handleTabChange",value:function(e){if(e.hasClass(""+this.options.linkActiveClass))return void(this.options.activeCollapse&&(this._collapseTab(e),this.$element.trigger("collapse.zf.tabs",[e])));var t=this.$element.find("."+this.options.linkClass+"."+this.options.linkActiveClass),n=e.find('[role="tab"]'),i=n[0].hash,r=this.$tabContent.find(i);if(this._collapseTab(t),this._openTab(e),this.options.deepLink){var a=e.find("a").attr("href");this.options.updateHistory?history.pushState({},"",a):history.replaceState({},"",a)}this.$element.trigger("change.zf.tabs",[e,r]),r.find("[data-mutate]").trigger("mutateme.zf.trigger")}},{key:"_openTab",value:function(e){var t=e.find('[role="tab"]'),n=t[0].hash,i=this.$tabContent.find(n);e.addClass(""+this.options.linkActiveClass),t.attr({"aria-selected":"true"}),i.addClass(""+this.options.panelActiveClass).attr({"aria-hidden":"false"})}},{key:"_collapseTab",value:function(t){var n=t.removeClass(""+this.options.linkActiveClass).find('[role="tab"]').attr({"aria-selected":"false"});e("#"+n.attr("aria-controls")).removeClass(""+this.options.panelActiveClass).attr({"aria-hidden":"true"})}},{key:"selectTab",value:function(e){var t;t="object"==typeof e?e[0].id:e,t.indexOf("#")<0&&(t="#"+t);var n=this.$tabTitles.find('[href="'+t+'"]').parent("."+this.options.linkClass);this._handleTabChange(n)}},{key:"_setHeight",value:function(){var t=0;this.$tabContent.find("."+this.options.panelClass).css("height","").each(function(){var n=e(this),i=n.hasClass(""+this.options.panelActiveClass);i||n.css({visibility:"hidden",display:"block"});var r=this.getBoundingClientRect().height;i||n.css({visibility:"",display:""}),t=r>t?r:t}).css("height",t+"px")}},{key:"destroy",value:function(){this.$element.find("."+this.options.linkClass).off(".zf.tabs").hide().end().find("."+this.options.panelClass).hide(),this.options.matchHeight&&null!=this._setHeightMqHandler&&e(window).off("changed.zf.mediaquery",this._setHeightMqHandler),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={deepLink:!1,deepLinkSmudge:!1,deepLinkSmudgeDelay:300,updateHistory:!1,autoFocus:!1,wrapOnKeys:!0,matchHeight:!1,activeCollapse:!1,linkClass:"tabs-title",linkActiveClass:"is-active",panelClass:"tabs-panel",panelActiveClass:"is-active"},Foundation.plugin(t,"Tabs")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,n.data(),i),this.className="",this._init(),this._events(),Foundation.registerPlugin(this,"Toggler")}return _createClass(t,[{key:"_init",value:function(){var t;this.options.animate?(t=this.options.animate.split(" "),this.animationIn=t[0],this.animationOut=t[1]||null):(t=this.$element.data("toggler"),this.className="."===t[0]?t.slice(1):t);var n=this.$element[0].id;e('[data-open="'+n+'"], [data-close="'+n+'"], [data-toggle="'+n+'"]').attr("aria-controls",n),this.$element.attr("aria-expanded",!this.$element.is(":hidden"))}},{key:"_events",value:function(){this.$element.off("toggle.zf.trigger").on("toggle.zf.trigger",this.toggle.bind(this))}},{key:"toggle",value:function(){this[this.options.animate?"_toggleAnimate":"_toggleClass"]()}},{key:"_toggleClass",value:function(){this.$element.toggleClass(this.className);var e=this.$element.hasClass(this.className);e?this.$element.trigger("on.zf.toggler"):this.$element.trigger("off.zf.toggler"),this._updateARIA(e),this.$element.find("[data-mutate]").trigger("mutateme.zf.trigger")}},{key:"_toggleAnimate",value:function(){var e=this;this.$element.is(":hidden")?Foundation.Motion.animateIn(this.$element,this.animationIn,function(){e._updateARIA(!0),this.trigger("on.zf.toggler"),this.find("[data-mutate]").trigger("mutateme.zf.trigger")}):Foundation.Motion.animateOut(this.$element,this.animationOut,function(){e._updateARIA(!1),this.trigger("off.zf.toggler"),this.find("[data-mutate]").trigger("mutateme.zf.trigger")})}},{key:"_updateARIA",value:function(e){this.$element.attr("aria-expanded",!!e)}},{key:"destroy",value:function(){this.$element.off(".zf.toggler"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={animate:!1},Foundation.plugin(t,"Toggler")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),i),this.isActive=!1,this.isClick=!1,this._init(),Foundation.registerPlugin(this,"Tooltip")}return _createClass(t,[{key:"_init",value:function(){var t=this.$element.attr("aria-describedby")||Foundation.GetYoDigits(6,"tooltip");this.options.positionClass=this.options.positionClass||this._getPositionClass(this.$element),this.options.tipText=this.options.tipText||this.$element.attr("title"),this.template=this.options.template?e(this.options.template):this._buildTemplate(t),this.options.allowHtml?this.template.appendTo(document.body).html(this.options.tipText).hide():this.template.appendTo(document.body).text(this.options.tipText).hide(),this.$element.attr({title:"","aria-describedby":t,"data-yeti-box":t,"data-toggle":t,"data-resize":t}).addClass(this.options.triggerClass),this.usedPositions=[],this.counter=4,this.classChanged=!1,this._events()}},{key:"_getPositionClass",value:function(e){if(!e)return"";var t=e[0].className.match(/\b(top|left|right)\b/g);return t=t?t[0]:""}},{key:"_buildTemplate",value:function(t){var n=(this.options.tooltipClass+" "+this.options.positionClass+" "+this.options.templateClasses).trim(),i=e("<div></div>").addClass(n).attr({role:"tooltip","aria-hidden":!0,"data-is-active":!1,"data-is-focus":!1,id:t});return i}},{key:"_reposition",value:function(e){this.usedPositions.push(e?e:"bottom"),!e&&this.usedPositions.indexOf("top")<0?this.template.addClass("top"):"top"===e&&this.usedPositions.indexOf("bottom")<0?this.template.removeClass(e):"left"===e&&this.usedPositions.indexOf("right")<0?this.template.removeClass(e).addClass("right"):"right"===e&&this.usedPositions.indexOf("left")<0?this.template.removeClass(e).addClass("left"):!e&&this.usedPositions.indexOf("top")>-1&&this.usedPositions.indexOf("left")<0?this.template.addClass("left"):"top"===e&&this.usedPositions.indexOf("bottom")>-1&&this.usedPositions.indexOf("left")<0?this.template.removeClass(e).addClass("left"):"left"===e&&this.usedPositions.indexOf("right")>-1&&this.usedPositions.indexOf("bottom")<0?this.template.removeClass(e):"right"===e&&this.usedPositions.indexOf("left")>-1&&this.usedPositions.indexOf("bottom")<0?this.template.removeClass(e):this.template.removeClass(e),this.classChanged=!0,this.counter--}},{key:"_setPosition",value:function(){var e=this._getPositionClass(this.template),t=Foundation.Box.GetDimensions(this.template),n=Foundation.Box.GetDimensions(this.$element),i="left"===e?"left":"right"===e?"left":"top",r="top"===i?"height":"width";"height"===r?this.options.vOffset:this.options.hOffset;if(t.width>=t.windowDims.width||!this.counter&&!Foundation.Box.ImNotTouchingYou(this.template))return this.template.offset(Foundation.Box.GetOffsets(this.template,this.$element,"center bottom",this.options.vOffset,this.options.hOffset,!0)).css({width:n.windowDims.width-2*this.options.hOffset,height:"auto"}),!1;for(this.template.offset(Foundation.Box.GetOffsets(this.template,this.$element,"center "+(e||"bottom"),this.options.vOffset,this.options.hOffset));!Foundation.Box.ImNotTouchingYou(this.template)&&this.counter;)this._reposition(e),this._setPosition()}},{key:"show",value:function(){if("all"!==this.options.showOn&&!Foundation.MediaQuery.is(this.options.showOn))return!1;var e=this;this.template.css("visibility","hidden").show(),this._setPosition(),this.$element.trigger("closeme.zf.tooltip",this.template.attr("id")),this.template.attr({"data-is-active":!0,"aria-hidden":!1}),e.isActive=!0,this.template.stop().hide().css("visibility","").fadeIn(this.options.fadeInDuration,function(){}),this.$element.trigger("show.zf.tooltip")}},{key:"hide",value:function(){var e=this;this.template.stop().attr({"aria-hidden":!0,"data-is-active":!1}).fadeOut(this.options.fadeOutDuration,function(){e.isActive=!1,e.isClick=!1,e.classChanged&&(e.template.removeClass(e._getPositionClass(e.template)).addClass(e.options.positionClass),e.usedPositions=[],e.counter=4,e.classChanged=!1)}),this.$element.trigger("hide.zf.tooltip")}},{key:"_events",value:function(){var e=this,t=(this.template,!1);this.options.disableHover||this.$element.on("mouseenter.zf.tooltip",function(t){e.isActive||(e.timeout=setTimeout(function(){e.show()},e.options.hoverDelay))}).on("mouseleave.zf.tooltip",function(n){clearTimeout(e.timeout),(!t||e.isClick&&!e.options.clickOpen)&&e.hide()}),this.options.clickOpen?this.$element.on("mousedown.zf.tooltip",function(t){t.stopImmediatePropagation(),e.isClick||(e.isClick=!0,!e.options.disableHover&&e.$element.attr("tabindex")||e.isActive||e.show())}):this.$element.on("mousedown.zf.tooltip",function(t){t.stopImmediatePropagation(),e.isClick=!0}),this.options.disableForTouch||this.$element.on("tap.zf.tooltip touchend.zf.tooltip",function(t){e.isActive?e.hide():e.show()}),this.$element.on({"close.zf.trigger":this.hide.bind(this)}),this.$element.on("focus.zf.tooltip",function(n){return t=!0,e.isClick?(e.options.clickOpen||(t=!1),!1):void e.show()}).on("focusout.zf.tooltip",function(n){t=!1,e.isClick=!1,e.hide()}).on("resizeme.zf.trigger",function(){e.isActive&&e._setPosition()})}},{key:"toggle",value:function(){this.isActive?this.hide():this.show()}},{key:"destroy",value:function(){this.$element.attr("title",this.template.text()).off(".zf.trigger .zf.tooltip").removeClass("has-tip top right left").removeAttr("aria-describedby aria-haspopup data-disable-hover data-resize data-toggle data-tooltip data-yeti-box"),this.template.remove(),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={disableForTouch:!1,hoverDelay:200,fadeInDuration:150,fadeOutDuration:150,disableHover:!1,templateClasses:"",tooltipClass:"tooltip",triggerClass:"has-tip",showOn:"small",template:"",tipText:"",touchCloseText:"Tap to close.",clickOpen:!0,positionClass:"",vOffset:10,hOffset:12,allowHtml:!1},Foundation.plugin(t,"Tooltip")}(jQuery);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e){var t=function(){function t(n,i){_classCallCheck(this,t),this.$element=e(n),this.options=e.extend({},this.$element.data(),i),this.rules=this.$element.data("responsive-accordion-tabs"),this.currentMq=null,this.currentPlugin=null,this.$element.attr("id")||this.$element.attr("id",Foundation.GetYoDigits(6,"responsiveaccordiontabs")),this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveAccordionTabs")}return _createClass(t,[{key:"_init",value:function(){if("string"==typeof this.rules){for(var t={},i=this.rules.split(" "),r=0;r<i.length;r++){var a=i[r].split("-"),s=a.length>1?a[0]:"small",o=a.length>1?a[1]:a[0];null!==n[o]&&(t[s]=n[o])}this.rules=t}this._getAllOptions(),e.isEmptyObject(this.rules)||this._checkMediaQueries()}},{key:"_getAllOptions",value:function(){var t=this;t.allOptions={};for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];try{var a=e("<ul></ul>"),s=new r.plugin(a,t.options);for(var o in s.options)if(s.options.hasOwnProperty(o)&&"zfPlugin"!==o){var l=s.options[o];t.allOptions[o]=l}s.destroy()}catch(u){}}}},{key:"_events",value:function(){var t=this;e(window).on("changed.zf.mediaquery",function(){t._checkMediaQueries()})}},{key:"_checkMediaQueries",value:function(){var t,i=this;e.each(this.rules,function(e){Foundation.MediaQuery.atLeast(e)&&(t=e)}),t&&(this.currentPlugin instanceof this.rules[t].plugin||(e.each(n,function(e,t){i.$element.removeClass(t.cssClass)}),this.$element.addClass(this.rules[t].cssClass),this.currentPlugin&&(!this.currentPlugin.$element.data("zfPlugin")&&this.storezfData&&this.currentPlugin.$element.data("zfPlugin",this.storezfData),this.currentPlugin.destroy()),this._handleMarkup(this.rules[t].cssClass),this.currentPlugin=new this.rules[t].plugin(this.$element,{}),this.storezfData=this.currentPlugin.$element.data("zfPlugin")))}},{key:"_handleMarkup",value:function(t){var n=this,i="accordion",r=e("[data-tabs-content="+this.$element.attr("id")+"]");if(r.length&&(i="tabs"),i!==t){var a=n.allOptions.linkClass?n.allOptions.linkClass:"tabs-title",s=n.allOptions.panelClass?n.allOptions.panelClass:"tabs-panel";this.$element.removeAttr("role");var o=this.$element.children("."+a+",[data-accordion-item]").removeClass(a).removeClass("accordion-item").removeAttr("data-accordion-item"),l=o.children("a").removeClass("accordion-title");if("tabs"===i?(r=r.children("."+s).removeClass(s).removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby"),r.children("a").removeAttr("role").removeAttr("aria-controls").removeAttr("aria-selected")):r=o.children("[data-tab-content]").removeClass("accordion-content"),r.css({display:"",visibility:""}),o.css({display:"",visibility:""}),"accordion"===t)r.each(function(t,i){e(i).appendTo(o.get(t)).addClass("accordion-content").attr("data-tab-content","").removeClass("is-active").css({height:""}),e("[data-tabs-content="+n.$element.attr("id")+"]").after('<div id="tabs-placeholder-'+n.$element.attr("id")+'"></div>').remove(),o.addClass("accordion-item").attr("data-accordion-item",""),l.addClass("accordion-title")});else if("tabs"===t){var u=e("[data-tabs-content="+n.$element.attr("id")+"]"),c=e("#tabs-placeholder-"+n.$element.attr("id"));c.length?(u=e('<div class="tabs-content"></div>').insertAfter(c).attr("data-tabs-content",n.$element.attr("id")),c.remove()):u=e('<div class="tabs-content"></div>').insertAfter(n.$element).attr("data-tabs-content",n.$element.attr("id")),r.each(function(t,n){var i=e(n).appendTo(u).addClass(s),r=l.get(t).hash.slice(1),a=e(n).attr("id")||Foundation.GetYoDigits(6,"accordion");r!==a&&(""!==r?e(n).attr("id",r):(r=a,e(n).attr("id",r),e(l.get(t)).attr("href",e(l.get(t)).attr("href").replace("#","")+"#"+r)));var c=e(o.get(t)).hasClass("is-active");c&&i.addClass("is-active")}),o.addClass(a)}}}},{key:"destroy",value:function(){this.currentPlugin&&this.currentPlugin.destroy(),e(window).off(".zf.ResponsiveAccordionTabs"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={};var n={tabs:{cssClass:"tabs",plugin:Foundation._plugins.tabs||null},accordion:{cssClass:"accordion",plugin:Foundation._plugins.accordion||null}};Foundation.plugin(t,"ResponsiveAccordionTabs")}(jQuery),function(e,t){"function"==typeof define&&define.amd?define([],t):e.forge=t()}(this,function(){var e,t,n;return function(i){function r(e,t){return b.call(e,t)}function a(e,t){var n,i,r,a,s,o,l,u,c,f,d,p=t&&t.split("/"),h=v.map,g=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),e=e.split("/"),s=e.length-1,v.nodeIdCompat&&S.test(e[s])&&(e[s]=e[s].replace(S,"")),e=p.concat(e),c=0;c<e.length;c+=1)if(d=e[c],"."===d)e.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||g)&&h){for(n=e.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),p)for(f=p.length;f>0;f-=1)if(r=h[p.slice(0,f).join("/")],r&&(r=r[i])){a=r,o=c;break}if(a)break;!l&&g&&g[i]&&(l=g[i],u=c)}!a&&l&&(a=l,o=u),a&&(n.splice(0,o,a),e=n.join("/"))}return e}function s(e,t){return function(){return p.apply(i,E.call(arguments,0).concat([e,t]))}}function o(e){return function(t){return a(t,e)}}function l(e){return function(t){y[e]=t}}function u(e){if(r(m,e)){var t=m[e];delete m[e],C[e]=!0,d.apply(i,t)}if(!r(y,e)&&!r(C,e))throw new Error("No "+e);return y[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function f(e){return function(){return v&&v.config&&v.config[e]||{}}}var d,p,h,g,y={},m={},v={},C={},b=Object.prototype.hasOwnProperty,E=[].slice,S=/\.js$/;h=function(e,t){var n,i=c(e),r=i[0];return e=i[1],r&&(r=a(r,t),n=u(r)),r?e=n&&n.normalize?n.normalize(e,o(t)):a(e,t):(e=a(e,t),i=c(e),r=i[0],e=i[1],r&&(n=u(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},g={require:function(e){return s(e)},exports:function(e){var t=y[e];return"undefined"!=typeof t?t:y[e]={}},module:function(e){return{id:e,uri:"",exports:y[e],config:f(e)}}},d=function(e,t,n,a){var o,c,f,d,p,v,b=[],E=typeof n;if(a=a||e,"undefined"===E||"function"===E){for(t=!t.length&&n.length?["require","exports","module"]:t,p=0;p<t.length;p+=1)if(d=h(t[p],a),c=d.f,"require"===c)b[p]=g.require(e);else if("exports"===c)b[p]=g.exports(e),v=!0;else if("module"===c)o=b[p]=g.module(e);else if(r(y,c)||r(m,c)||r(C,c))b[p]=u(c);else{if(!d.p)throw new Error(e+" missing "+c);d.p.load(d.n,s(a,!0),l(c),{}),b[p]=y[c]}f=n?n.apply(y[e],b):void 0,e&&(o&&o.exports!==i&&o.exports!==y[e]?y[e]=o.exports:f===i&&v||(y[e]=f))}else e&&(y[e]=n)},e=t=p=function(e,t,n,r,a){if("string"==typeof e)return g[e]?g[e](t):u(h(e,t).f);if(!e.splice){if(v=e,v.deps&&p(v.deps,v.callback),!t)return;t.splice?(e=t,t=n,n=null):e=i}return t=t||function(){},"function"==typeof n&&(n=r,r=a),r?d(i,e,t,n):setTimeout(function(){d(i,e,t,n)},4),p},p.config=function(e){return p(e)},e._defined=y,n=function(e,t,n){t.splice||(n=t,t=[]),r(y,e)||r(m,e)||(m[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("node_modules/almond/almond",function(){}),function(){function e(e){function t(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(i.isArrayBuffer(e)||i.isArrayBufferView(e)){var n=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,n)}catch(r){for(var a=0;a<n.length;++a)this.putByte(n[a])}}else(e instanceof t||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}function n(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=i.isArrayBuffer(e),r=i.isArrayBufferView(e);return n||r?(n?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength)):(this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&void 0!==e&&this.putBytes(e),void("writeOffset"in t&&(this.write=t.writeOffset)))}var i=e.util=e.util||{};!function(){function e(e){if(e.source===window&&e.data===t){e.stopPropagation();var i=n.slice();n.length=0,i.forEach(function(e){e()})}}if("undefined"!=typeof process&&process.nextTick)return i.nextTick=process.nextTick,void("function"==typeof setImmediate?i.setImmediate=setImmediate:i.setImmediate=i.nextTick);if("function"==typeof setImmediate)return i.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(i.nextTick=function(e){return setImmediate(e)});if(i.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",n=[];i.setImmediate=function(e){n.push(e),1===n.length&&window.postMessage(t,"*")},window.addEventListener("message",e,!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),a=!0,s=document.createElement("div"),n=[];new MutationObserver(function(){var e=n.slice();n.length=0,e.forEach(function(e){e()})}).observe(s,{attributes:!0});var o=i.setImmediate;i.setImmediate=function(e){Date.now()-r>15?(r=Date.now(),o(e)):(n.push(e),1===n.length&&s.setAttribute("a",a=!a))}}i.nextTick=i.setImmediate}(),i.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},i.isArrayBufferView=function(e){return e&&i.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},i.ByteBuffer=t,i.ByteStringBuffer=t;var r=4096;i.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>r&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},i.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var n=this.data;t>0;)1&t&&(n+=e),t>>>=1,t>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this},i.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},i.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(i.encodeUtf8(e))},i.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},i.ByteStringBuffer.prototype.putInt=function(e,t){var n="";do t-=8,n+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(n)},i.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},i.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},i.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},i.ByteStringBuffer.prototype.getInt=function(e){var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t},i.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},i.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},i.ByteStringBuffer.prototype.bytes=function(e){return"undefined"==typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},i.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var e=i.createBuffer(this.data);return e.read=this.read,e},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=n,i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+t);return i.set(n),this.data=new DataView(i.buffer),this},i.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},i.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this},i.DataBuffer.prototype.putBytes=function(e,t){if(i.isArrayBufferView(e)){var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var a=new Uint8Array(this.data.buffer,this.write);return a.set(n),this.write+=r,this}if(i.isArrayBuffer(e)){var n=new Uint8Array(e);this.accommodate(n.byteLength);var a=new Uint8Array(this.data.buffer);return a.set(n,this.write),this.write+=n.byteLength,this}if(e instanceof i.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&i.isArrayBufferView(e.data)){var n=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(n.byteLength);var a=new Uint8Array(e.data.byteLength,this.write);return a.set(n),this.write+=n.byteLength,this}if(e instanceof i.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){var s;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(e,s,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),s=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(e,s,this.write),this;if("utf8"===t&&(e=i.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(s),this;if("utf16"===t)return this.accommodate(2*e.length),s=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},i.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},i.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},i.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(e,t){this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this},i.DataBuffer.prototype.putSignedInt=function(e,t){return this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},i.DataBuffer.prototype.getByte=function(){
return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},i.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},i.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},i.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},i.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},i.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},i.DataBuffer.prototype.getInt=function(e){var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t},i.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},i.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},i.DataBuffer.prototype.bytes=function(e){return"undefined"==typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},i.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+="0"),e+=n.toString(16)}return e},i.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8","binary"===e||"raw"===e)return i.binary.raw.encode(t);if("hex"===e)return i.binary.hex.encode(t);if("base64"===e)return i.binary.base64.encode(t);if("utf8"===e)return i.text.utf8.decode(t);if("utf16"===e)return i.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},i.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=i.encodeUtf8(e)),new i.ByteBuffer(e)},i.fillString=function(e,t){for(var n="";t>0;)1&t&&(n+=e),t>>>=1,t>0&&(e+=e);return n},i.xorBytes=function(e,t,n){for(var i="",r="",a="",s=0,o=0;n>0;--n,++s)r=e.charCodeAt(s)^t.charCodeAt(s),o>=10&&(i+=a,a="",o=0),a+=String.fromCharCode(r),++o;return i+=a},i.hexToBytes=function(e){var t="",n=0;for(e.length&!0&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},i.bytesToHex=function(e){return i.createBuffer(e).toHex()},i.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];i.encode64=function(e,t){for(var n,i,r,s="",o="",l=0;l<e.length;)n=e.charCodeAt(l++),i=e.charCodeAt(l++),r=e.charCodeAt(l++),s+=a.charAt(n>>2),s+=a.charAt((3&n)<<4|i>>4),isNaN(i)?s+="==":(s+=a.charAt((15&i)<<2|r>>6),s+=isNaN(r)?"=":a.charAt(63&r)),t&&s.length>t&&(o+=s.substr(0,t)+"\r\n",s=s.substr(t));return o+=s},i.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,n,i,r,a="",o=0;o<e.length;)t=s[e.charCodeAt(o++)-43],n=s[e.charCodeAt(o++)-43],i=s[e.charCodeAt(o++)-43],r=s[e.charCodeAt(o++)-43],a+=String.fromCharCode(t<<2|n>>4),64!==i&&(a+=String.fromCharCode((15&n)<<4|i>>2),64!==r&&(a+=String.fromCharCode((3&i)<<6|r)));return a},i.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},i.decodeUtf8=function(e){return decodeURIComponent(escape(e))},i.binary={raw:{},hex:{},base64:{}},i.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},i.binary.raw.decode=function(e,t,n){var i=t;i||(i=new Uint8Array(e.length)),n=n||0;for(var r=n,a=0;a<e.length;++a)i[r++]=e.charCodeAt(a);return t?r-n:i},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(e,t,n){var i=t;i||(i=new Uint8Array(Math.ceil(e.length/2))),n=n||0;var r=0,a=n;for(1&e.length&&(r=1,i[a++]=parseInt(e[0],16));r<e.length;r+=2)i[a++]=parseInt(e.substr(r,2),16);return t?a-n:i},i.binary.base64.encode=function(e,t){for(var n,i,r,s="",o="",l=0;l<e.byteLength;)n=e[l++],i=e[l++],r=e[l++],s+=a.charAt(n>>2),s+=a.charAt((3&n)<<4|i>>4),isNaN(i)?s+="==":(s+=a.charAt((15&i)<<2|r>>6),s+=isNaN(r)?"=":a.charAt(63&r)),t&&s.length>t&&(o+=s.substr(0,t)+"\r\n",s=s.substr(t));return o+=s},i.binary.base64.decode=function(e,t,n){var i=t;i||(i=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var r,a,o,l,u=0,c=n;u<e.length;)r=s[e.charCodeAt(u++)-43],a=s[e.charCodeAt(u++)-43],o=s[e.charCodeAt(u++)-43],l=s[e.charCodeAt(u++)-43],i[c++]=r<<2|a>>4,64!==o&&(i[c++]=(15&a)<<4|o>>2,64!==l&&(i[c++]=(3&o)<<6|l));return t?c-n:i.subarray(0,c)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(e,t,n){e=i.encodeUtf8(e);var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var a=n,s=0;s<e.length;++s)r[a++]=e.charCodeAt(s);return t?a-n:r},i.text.utf8.decode=function(e){return i.decodeUtf8(String.fromCharCode.apply(null,e))},i.text.utf16.encode=function(e,t,n){var i=t;i||(i=new Uint8Array(2*e.length));var r=new Uint16Array(i.buffer);n=n||0;for(var a=n,s=n,o=0;o<e.length;++o)r[s++]=e.charCodeAt(o),a+=2;return t?a-n:i},i.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},i.deflate=function(e,t,n){if(t=i.decode64(e.deflate(i.encode64(t)).rval),n){var r=2,a=t.charCodeAt(1);32&a&&(r=6),t=t.substring(r,t.length-4)}return t},i.inflate=function(e,t,n){var r=e.inflate(i.encode64(t)).rval;return null===r?null:i.decode64(r)};var o=function(e,t,n){if(!e)throw new Error("WebStorage not available.");var r;if(null===n?r=e.removeItem(t):(n=i.encode64(JSON.stringify(n)),r=e.setItem(t,n)),"undefined"!=typeof r&&r.rval!==!0){var a=new Error(r.error.message);throw a.id=r.error.id,a.name=r.error.name,a}},l=function(e,t){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(null===n.rval){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(i.decode64(n))),n},u=function(e,t,n,i){var r=l(e,t);null===r&&(r={}),r[n]=i,o(e,t,r)},c=function(e,t,n){var i=l(e,t);return null!==i&&(i=n in i?i[n]:null),i},f=function(e,t,n){var i=l(e,t);if(null!==i&&n in i){delete i[n];var r=!0;for(var a in i){r=!1;break}r&&(i=null),o(e,t,i)}},d=function(e,t){o(e,t,null)},p=function(e,t,n){var i=null;"undefined"==typeof n&&(n=["web","flash"]);var r,a=!1,s=null;for(var o in n){r=n[o];try{if("flash"===r||"both"===r){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),a="flash"===r}"web"!==r&&"both"!==r||(t[0]=localStorage,i=e.apply(this,t),a=!0)}catch(l){s=l}if(a)break}if(!a)throw s;return i};i.setItem=function(e,t,n,i,r){p(u,arguments,r)},i.getItem=function(e,t,n,i){return p(c,arguments,i)},i.removeItem=function(e,t,n,i){p(f,arguments,i)},i.clearItems=function(e,t,n){p(d,arguments,n)},i.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var n=t.exec(e),i=null===n?null:{full:e,scheme:n[1],host:n[2],port:n[3],path:n[4]};return i&&(i.fullHost=i.host,i.port?80!==i.port&&"http"===i.scheme?i.fullHost+=":"+i.port:443!==i.port&&"https"===i.scheme&&(i.fullHost+=":"+i.port):"http"===i.scheme?i.port=80:"https"===i.scheme&&(i.port=443),i.full=i.scheme+"://"+i.fullHost),i};var h=null;i.getQueryVariables=function(e){var t,n=function(e){for(var t={},n=e.split("&"),i=0;i<n.length;i++){var r,a,s=n[i].indexOf("=");s>0?(r=n[i].substring(0,s),a=n[i].substring(s+1)):(r=n[i],a=null),r in t||(t[r]=[]),r in Object.prototype||null===a||t[r].push(unescape(a))}return t};return"undefined"==typeof e?(null===h&&(h="undefined"!=typeof window&&window.location&&window.location.search?n(window.location.search.substring(1)):{}),t=h):t=n(e),t},i.parseFragment=function(e){var t=e,n="",r=e.indexOf("?");r>0&&(t=e.substring(0,r),n=e.substring(r+1));var a=t.split("/");a.length>0&&""===a[0]&&a.shift();var s=""===n?{}:i.getQueryVariables(n);return{pathString:t,queryString:n,path:a,query:s}},i.makeRequest=function(e){var t=i.parseFragment(e),n={path:t.pathString,query:t.queryString,getPath:function(e){return"undefined"==typeof e?t.path:t.path[e]},getQuery:function(e,n){var i;return"undefined"==typeof e?i=t.query:(i=t.query[e],i&&"undefined"!=typeof n&&(i=i[n])),i},getQueryLast:function(e,t){var i,r=n.getQuery(e);return i=r?r[r.length-1]:t}};return n},i.makeLink=function(e,t,n){e=jQuery.isArray(e)?e.join("/"):e;var i=jQuery.param(t||{});return n=n||"",e+(i.length>0?"?"+i:"")+(n.length>0?"#"+n:"")},i.setPath=function(e,t,n){if("object"==typeof e&&null!==e)for(var i=0,r=t.length;i<r;){var a=t[i++];if(i==r)e[a]=n;else{var s=a in e;(!s||s&&"object"!=typeof e[a]||s&&null===e[a])&&(e[a]={}),e=e[a]}}},i.getPath=function(e,t,n){for(var i=0,r=t.length,a=!0;a&&i<r&&"object"==typeof e&&null!==e;){var s=t[i++];a=s in e,a&&(e=e[s])}return a?e:n},i.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var n=0,i=t.length;n<i;){var r=t[n++];if(n==i)delete e[r];else{if(!(r in e)||"object"!=typeof e[r]||null===e[r])break;e=e[r]}}},i.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},i.format=function(e){for(var t,n,i=/%./g,r=0,a=[],s=0;t=i.exec(e);){n=e.substring(s,i.lastIndex-2),n.length>0&&a.push(n),s=i.lastIndex;var o=t[0][1];switch(o){case"s":case"o":r<arguments.length?a.push(arguments[r++ +1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(e.substring(s)),a.join("")},i.formatNumber=function(e,t,n,i){var r=e,a=isNaN(t=Math.abs(t))?2:t,s=void 0===n?",":n,o=void 0===i?".":i,l=r<0?"-":"",u=parseInt(r=Math.abs(+r||0).toFixed(a),10)+"",c=u.length>3?u.length%3:0;return l+(c?u.substr(0,c)+o:"")+u.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?s+Math.abs(r-u).toFixed(a).slice(2):"")},i.formatSize=function(e){return e=e>=1073741824?i.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?i.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?i.formatNumber(e/1024,0)+" KiB":i.formatNumber(e,0)+" bytes"},i.bytesFromIP=function(e){return e.indexOf(".")!==-1?i.bytesFromIPv4(e):e.indexOf(":")!==-1?i.bytesFromIPv6(e):null},i.bytesFromIPv4=function(e){if(e=e.split("."),4!==e.length)return null;for(var t=i.createBuffer(),n=0;n<e.length;++n){var r=parseInt(e[n],10);if(isNaN(r))return null;t.putByte(r)}return t.getBytes()},i.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(e){return 0===e.length&&++t,!0});for(var n=2*(8-e.length+t),r=i.createBuffer(),a=0;a<8;++a)if(e[a]&&0!==e[a].length){var s=i.hexToBytes(e[a]);s.length<2&&r.putByte(0),r.putBytes(s)}else r.fillWithByte(0,n),n=0;return r.getBytes()},i.bytesToIP=function(e){return 4===e.length?i.bytesToIPv4(e):16===e.length?i.bytesToIPv6(e):null},i.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")},i.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],n=[],r=0,a=0;a<e.length;a+=2){for(var s=i.bytesToHex(e[a]+e[a+1]);"0"===s[0]&&"0"!==s;)s=s.substr(1);if("0"===s){var o=n[n.length-1],l=t.length;o&&l===o.end+1?(o.end=l,o.end-o.start>n[r].end-n[r].start&&(r=n.length-1)):n.push({start:l,end:l})}t.push(s)}if(n.length>0){var u=n[r];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),0===u.start&&t.unshift(""),7===u.end&&t.push(""))}return t.join(":")},i.estimateCores=function(e,t){function n(e,o,l){if(0===o){var u=Math.floor(e.reduce(function(e,t){return e+t},0)/e.length);return i.cores=Math.max(1,u),URL.revokeObjectURL(s),t(null,i.cores)}r(l,function(t,i){e.push(a(l,i)),n(e,o-1,l)})}function r(e,t){for(var n=[],i=[],r=0;r<e;++r){var a=new Worker(s);a.addEventListener("message",function(r){if(i.push(r.data),i.length===e){for(var a=0;a<e;++a)n[a].terminate();t(null,i)}}),n.push(a)}for(var r=0;r<e;++r)n[r].postMessage(r)}function a(e,t){for(var n=[],i=0;i<e;++i)for(var r=t[i],a=n[i]=[],s=0;s<e;++s)if(i!==s){var o=t[s];(r.st>o.st&&r.st<o.et||o.st>r.st&&o.st<r.et)&&a.push(s)}return n.reduce(function(e,t){return Math.max(e,t.length)},0)}if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in i&&!e.update)return t(null,i.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,t(null,i.cores);if("undefined"==typeof Worker)return i.cores=1,t(null,i.cores);if("undefined"==typeof Blob)return i.cores=2,t(null,i.cores);var s=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){for(var t=Date.now(),n=t+4;Date.now()<n;);self.postMessage({st:t,et:n})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16)}}var i="util";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/util",["require","module"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.cipher=e.cipher||{},e.cipher.algorithms=e.cipher.algorithms||{},e.cipher.createCipher=function(t,n){var i=t;if("string"==typeof i&&(i=e.cipher.getAlgorithm(i),i&&(i=i())),!i)throw new Error("Unsupported algorithm: "+t);return new e.cipher.BlockCipher({algorithm:i,key:n,decrypt:!1})},e.cipher.createDecipher=function(t,n){var i=t;if("string"==typeof i&&(i=e.cipher.getAlgorithm(i),i&&(i=i())),!i)throw new Error("Unsupported algorithm: "+t);return new e.cipher.BlockCipher({algorithm:i,key:n,decrypt:!0})},e.cipher.registerAlgorithm=function(t,n){t=t.toUpperCase(),e.cipher.algorithms[t]=n},e.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in e.cipher.algorithms?e.cipher.algorithms[t]:null};var t=e.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};t.prototype.start=function(t){t=t||{};var n={};for(var i in t)n[i]=t[i];n.decrypt=this._decrypt,this._finish=!1,this._input=e.util.createBuffer(),this.output=t.output||e.util.createBuffer(),this.mode.start(n)},t.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},t.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}}var i="cipher";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/cipher",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t){if("string"==typeof t&&(t=e.util.createBuffer(t)),e.util.isArray(t)&&t.length>4){var n=t;t=e.util.createBuffer();for(var i=0;i<n.length;++i)t.putByte(n[i])}return e.util.isArray(t)||(t=[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]),t}function n(e){e[e.length-1]=e[e.length-1]+1&4294967295}function i(e){return[e/4294967296|0,4294967295&e]}e.cipher=e.cipher||{};var r=e.cipher.modes=e.cipher.modes||{};r.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},r.ecb.prototype.start=function(e){},r.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i])},r.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i])},r.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},r.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),i=e.at(n-1);return!(i>this.blockSize<<2)&&(e.truncate(i),!0)},r.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},r.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._prev=this._iv.slice(0)}},r.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]);this._prev=this._outBlock},r.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)},r.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},r.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),i=e.at(n-1);return!(i>this.blockSize<<2)&&(e.truncate(i),!0)},r.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},r.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},r.cfb.prototype.encrypt=function(e,t,n){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32()^this._outBlock[r],t.putInt32(this._inBlock[r]);else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var r=0;r<this._ints;++r)this._partialBlock[r]=e.getInt32()^this._outBlock[r],this._partialOutput.putInt32(this._partialBlock[r]);if(a>0)e.read-=this.blockSize;else for(var r=0;r<this._ints;++r)this._inBlock[r]=this._partialBlock[r];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}},r.cfb.prototype.decrypt=function(e,t,n){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32(),t.putInt32(this._inBlock[r]^this._outBlock[r]);else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var r=0;r<this._ints;++r)this._partialBlock[r]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[r]^this._outBlock[r]);if(a>0)e.read-=this.blockSize;else for(var r=0;r<this._ints;++r)this._inBlock[r]=this._partialBlock[r];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}},r.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},r.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},r.ofb.prototype.encrypt=function(e,t,n){var i=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var r=0;r<this._ints;++r)t.putInt32(e.getInt32()^this._outBlock[r]),this._inBlock[r]=this._outBlock[r];else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var r=0;r<this._ints;++r)this._partialOutput.putInt32(e.getInt32()^this._outBlock[r]);if(a>0)e.read-=this.blockSize;else for(var r=0;r<this._ints;++r)this._inBlock[r]=this._outBlock[r];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}},r.ofb.prototype.decrypt=r.ofb.prototype.encrypt,r.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},r.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},r.ctr.prototype.encrypt=function(e,t,i){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]);else{var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!i)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}n(this._inBlock)},r.ctr.prototype.decrypt=r.ctr.prototype.encrypt,r.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0,this._R=3774873600},r.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var r=e.util.createBuffer(t.iv);this._cipherLength=0;var a;if(a="additionalData"in t?e.util.createBuffer(t.additionalData):e.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=e.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var s=r.length();if(12===s)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(i(8*s)))}this._inBlock=this._j0.slice(0),n(this._inBlock),this._partialBytes=0,a=e.util.createBuffer(a),this._aDataLength=i(8*a.length());var o=a.length()%this.blockSize;for(o&&a.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];a.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[a.getInt32(),a.getInt32(),a.getInt32(),a.getInt32()])},r.gcm.prototype.encrypt=function(e,t,i){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize){for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(0===s||i){if(i){var o=r%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var a=0;a<this._ints;++a)this._outBlock[a]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!i)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),n(this._inBlock)},r.gcm.prototype.decrypt=function(e,t,i){var r=e.length();if(r<this.blockSize&&!(i&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),n(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^this._hashBlock[a]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize},r.gcm.prototype.afterFinish=function(t,n){var r=!0;n.decrypt&&n.overflow&&t.truncate(this.blockSize-n.overflow),this.tag=e.util.createBuffer();var a=this._aDataLength.concat(i(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,a);var s=[];this.cipher.encrypt(this._j0,s);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^s[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),n.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},r.gcm.prototype.multiply=function(e,t){for(var n=[0,0,0,0],i=t.slice(0),r=0;r<128;++r){var a=e[r/32|0]&1<<31-r%32;a&&(n[0]^=i[0],n[1]^=i[1],n[2]^=i[2],n[3]^=i[3]),this.pow(i,i)}return n},r.gcm.prototype.pow=function(e,t){for(var n=1&e[3],i=3;i>0;--i)t[i]=e[i]>>>1|(1&e[i-1])<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)},r.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],n=0;n<32;++n){var i=n/8|0,r=e[i]>>>4*(7-n%8)&15,a=this._m[n][r];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t},r.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)},r.gcm.prototype.generateHashTable=function(e,t){for(var n=8/t,i=4*n,r=16*n,a=new Array(r),s=0;s<r;++s){var o=[0,0,0,0],l=s/i|0,u=(i-1-s%i)*t;o[l]=1<<t-1<<u,a[s]=this.generateSubHashTable(this.multiply(o,e),t)}return a},r.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,i=n>>>1,r=new Array(n);r[i]=e.slice(0);for(var a=i>>>1;a>0;)this.pow(r[2*a],r[a]=[]),a>>=1;for(a=2;a<i;){for(var s=1;s<a;++s){var o=r[a],l=r[s];r[a+s]=[o[0]^l[0],o[1]^l[1],o[2]^l[2],o[3]^l[3]]}a*=2}for(r[0]=[0,0,0,0],a=i+1;a<n;++a){var u=r[a^i];r[a]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return r}}var i="cipherModes";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/cipherModes",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,n){var i=function(){return new e.aes.Algorithm(t,n)};e.cipher.registerAlgorithm(t,i)}function n(){f=!0,l=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;s=new Array(256),o=new Array(256),u=new Array(4),c=new Array(4);for(var t=0;t<4;++t)u[t]=new Array(256),c[t]=new Array(256);for(var n,i,r,a,d,p,h,g=0,y=0,t=0;t<256;++t){a=y^y<<1^y<<2^y<<3^y<<4,a=a>>8^255&a^99,s[g]=a,o[a]=g,d=e[a],n=e[g],i=e[n],r=e[i],p=d<<24^a<<16^a<<8^(a^d),h=(n^i^r)<<24^(g^r)<<16^(g^i^r)<<8^(g^n^r);for(var m=0;m<4;++m)u[m][g]=p,c[m][a]=h,p=p<<24|p>>>8,h=h<<24|h>>>8;0===g?g=y=1:(g=n^e[e[e[n^r]]],y^=e[e[y]])}}function i(e,t){for(var n,i=e.slice(0),r=1,a=i.length,o=a+6+1,u=d*o,f=a;f<u;++f)n=i[f-1],f%a===0?(n=s[n>>>16&255]<<24^s[n>>>8&255]<<16^s[255&n]<<8^s[n>>>24]^l[r]<<24,r++):a>6&&f%a===4&&(n=s[n>>>24]<<24^s[n>>>16&255]<<16^s[n>>>8&255]<<8^s[255&n]),i[f]=i[f-a]^n;if(t){var p,h=c[0],g=c[1],y=c[2],m=c[3],v=i.slice(0);u=i.length;for(var f=0,C=u-d;f<u;f+=d,C-=d)if(0===f||f===u-d)v[f]=i[C],v[f+1]=i[C+3],v[f+2]=i[C+2],v[f+3]=i[C+1];else for(var b=0;b<d;++b)p=i[C+b],v[f+(3&-b)]=h[s[p>>>24]]^g[s[p>>>16&255]]^y[s[p>>>8&255]]^m[s[255&p]];i=v}return i}function r(e,t,n,i){var r,a,l,f,d,p=e.length/4-1;i?(r=c[0],a=c[1],l=c[2],f=c[3],d=o):(r=u[0],a=u[1],l=u[2],f=u[3],d=s);var h,g,y,m,v,C,b;h=t[0]^e[0],g=t[i?3:1]^e[1],y=t[2]^e[2],m=t[i?1:3]^e[3];for(var E=3,S=1;S<p;++S)v=r[h>>>24]^a[g>>>16&255]^l[y>>>8&255]^f[255&m]^e[++E],C=r[g>>>24]^a[y>>>16&255]^l[m>>>8&255]^f[255&h]^e[++E],b=r[y>>>24]^a[m>>>16&255]^l[h>>>8&255]^f[255&g]^e[++E],m=r[m>>>24]^a[h>>>16&255]^l[g>>>8&255]^f[255&y]^e[++E],h=v,g=C,y=b;n[0]=d[h>>>24]<<24^d[g>>>16&255]<<16^d[y>>>8&255]<<8^d[255&m]^e[++E],n[i?3:1]=d[g>>>24]<<24^d[y>>>16&255]<<16^d[m>>>8&255]<<8^d[255&h]^e[++E],n[2]=d[y>>>24]<<24^d[m>>>16&255]<<16^d[h>>>8&255]<<8^d[255&g]^e[++E],n[i?1:3]=d[m>>>24]<<24^d[h>>>16&255]<<16^d[g>>>8&255]<<8^d[255&y]^e[++E];
}function a(t){t=t||{};var n,i=(t.mode||"CBC").toUpperCase(),r="AES-"+i;n=t.decrypt?e.cipher.createDecipher(r,t.key):e.cipher.createCipher(r,t.key);var a=n.start;return n.start=function(t,i){var r=null;i instanceof e.util.ByteBuffer&&(r=i,i={}),i=i||{},i.output=r,i.iv=t,a.call(n,i)},n}e.aes=e.aes||{},e.aes.startEncrypting=function(e,t,n,i){var r=a({key:e,output:n,decrypt:!1,mode:i});return r.start(t),r},e.aes.createEncryptionCipher=function(e,t){return a({key:e,output:null,decrypt:!1,mode:t})},e.aes.startDecrypting=function(e,t,n,i){var r=a({key:e,output:n,decrypt:!0,mode:i});return r.start(t),r},e.aes.createDecryptionCipher=function(e,t){return a({key:e,output:null,decrypt:!0,mode:t})},e.aes.Algorithm=function(e,t){f||n();var i=this;i.name=e,i.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return r(i._w,e,t,!1)},decrypt:function(e,t){return r(i._w,e,t,!0)}}}),i._init=!1},e.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var n,r=t.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(e.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){n=r,r=e.util.createBuffer();for(var a=0;a<n.length;++a)r.putByte(n[a])}}else r=e.util.createBuffer(r);if(!e.util.isArray(r)){n=r,r=[];var s=n.length();if(16===s||24===s||32===s){s>>>=2;for(var a=0;a<s;++a)r.push(n.getInt32())}}if(!e.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var o=this.mode.name,l=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=i(r,t.decrypt&&!l),this._init=!0}},e.aes._expandKey=function(e,t){return f||n(),i(e,t)},e.aes._updateBlock=r,t("AES-ECB",e.cipher.modes.ecb),t("AES-CBC",e.cipher.modes.cbc),t("AES-CFB",e.cipher.modes.cfb),t("AES-OFB",e.cipher.modes.ofb),t("AES-CTR",e.cipher.modes.ctr),t("AES-GCM",e.cipher.modes.gcm);var s,o,l,u,c,f=!1,d=4}var i="aes";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/aes",["require","module","./cipher","./cipherModes","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.pki=e.pki||{};var t=e.pki.oids=e.oids=e.oids||{};t["1.2.840.113549.1.1.1"]="rsaEncryption",t.rsaEncryption="1.2.840.113549.1.1.1",t["1.2.840.113549.1.1.4"]="md5WithRSAEncryption",t.md5WithRSAEncryption="1.2.840.113549.1.1.4",t["1.2.840.113549.1.1.5"]="sha1WithRSAEncryption",t.sha1WithRSAEncryption="1.2.840.113549.1.1.5",t["1.2.840.113549.1.1.7"]="RSAES-OAEP",t["RSAES-OAEP"]="1.2.840.113549.1.1.7",t["1.2.840.113549.1.1.8"]="mgf1",t.mgf1="1.2.840.113549.1.1.8",t["1.2.840.113549.1.1.9"]="pSpecified",t.pSpecified="1.2.840.113549.1.1.9",t["1.2.840.113549.1.1.10"]="RSASSA-PSS",t["RSASSA-PSS"]="1.2.840.113549.1.1.10",t["1.2.840.113549.1.1.11"]="sha256WithRSAEncryption",t.sha256WithRSAEncryption="1.2.840.113549.1.1.11",t["1.2.840.113549.1.1.12"]="sha384WithRSAEncryption",t.sha384WithRSAEncryption="1.2.840.113549.1.1.12",t["1.2.840.113549.1.1.13"]="sha512WithRSAEncryption",t.sha512WithRSAEncryption="1.2.840.113549.1.1.13",t["1.3.14.3.2.7"]="desCBC",t.desCBC="1.3.14.3.2.7",t["1.3.14.3.2.26"]="sha1",t.sha1="1.3.14.3.2.26",t["2.16.840.1.101.3.4.2.1"]="sha256",t.sha256="2.16.840.1.101.3.4.2.1",t["2.16.840.1.101.3.4.2.2"]="sha384",t.sha384="2.16.840.1.101.3.4.2.2",t["2.16.840.1.101.3.4.2.3"]="sha512",t.sha512="2.16.840.1.101.3.4.2.3",t["1.2.840.113549.2.5"]="md5",t.md5="1.2.840.113549.2.5",t["1.2.840.113549.1.7.1"]="data",t.data="1.2.840.113549.1.7.1",t["1.2.840.113549.1.7.2"]="signedData",t.signedData="1.2.840.113549.1.7.2",t["1.2.840.113549.1.7.3"]="envelopedData",t.envelopedData="1.2.840.113549.1.7.3",t["1.2.840.113549.1.7.4"]="signedAndEnvelopedData",t.signedAndEnvelopedData="1.2.840.113549.1.7.4",t["1.2.840.113549.1.7.5"]="digestedData",t.digestedData="1.2.840.113549.1.7.5",t["1.2.840.113549.1.7.6"]="encryptedData",t.encryptedData="1.2.840.113549.1.7.6",t["1.2.840.113549.1.9.1"]="emailAddress",t.emailAddress="1.2.840.113549.1.9.1",t["1.2.840.113549.1.9.2"]="unstructuredName",t.unstructuredName="1.2.840.113549.1.9.2",t["1.2.840.113549.1.9.3"]="contentType",t.contentType="1.2.840.113549.1.9.3",t["1.2.840.113549.1.9.4"]="messageDigest",t.messageDigest="1.2.840.113549.1.9.4",t["1.2.840.113549.1.9.5"]="signingTime",t.signingTime="1.2.840.113549.1.9.5",t["1.2.840.113549.1.9.6"]="counterSignature",t.counterSignature="1.2.840.113549.1.9.6",t["1.2.840.113549.1.9.7"]="challengePassword",t.challengePassword="1.2.840.113549.1.9.7",t["1.2.840.113549.1.9.8"]="unstructuredAddress",t.unstructuredAddress="1.2.840.113549.1.9.8",t["1.2.840.113549.1.9.14"]="extensionRequest",t.extensionRequest="1.2.840.113549.1.9.14",t["1.2.840.113549.1.9.20"]="friendlyName",t.friendlyName="1.2.840.113549.1.9.20",t["1.2.840.113549.1.9.21"]="localKeyId",t.localKeyId="1.2.840.113549.1.9.21",t["1.2.840.113549.1.9.22.1"]="x509Certificate",t.x509Certificate="1.2.840.113549.1.9.22.1",t["1.2.840.113549.1.12.10.1.1"]="keyBag",t.keyBag="1.2.840.113549.1.12.10.1.1",t["1.2.840.113549.1.12.10.1.2"]="pkcs8ShroudedKeyBag",t.pkcs8ShroudedKeyBag="1.2.840.113549.1.12.10.1.2",t["1.2.840.113549.1.12.10.1.3"]="certBag",t.certBag="1.2.840.113549.1.12.10.1.3",t["1.2.840.113549.1.12.10.1.4"]="crlBag",t.crlBag="1.2.840.113549.1.12.10.1.4",t["1.2.840.113549.1.12.10.1.5"]="secretBag",t.secretBag="1.2.840.113549.1.12.10.1.5",t["1.2.840.113549.1.12.10.1.6"]="safeContentsBag",t.safeContentsBag="1.2.840.113549.1.12.10.1.6",t["1.2.840.113549.1.5.13"]="pkcs5PBES2",t.pkcs5PBES2="1.2.840.113549.1.5.13",t["1.2.840.113549.1.5.12"]="pkcs5PBKDF2",t.pkcs5PBKDF2="1.2.840.113549.1.5.12",t["1.2.840.113549.1.12.1.1"]="pbeWithSHAAnd128BitRC4",t.pbeWithSHAAnd128BitRC4="1.2.840.113549.1.12.1.1",t["1.2.840.113549.1.12.1.2"]="pbeWithSHAAnd40BitRC4",t.pbeWithSHAAnd40BitRC4="1.2.840.113549.1.12.1.2",t["1.2.840.113549.1.12.1.3"]="pbeWithSHAAnd3-KeyTripleDES-CBC",t["pbeWithSHAAnd3-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.3",t["1.2.840.113549.1.12.1.4"]="pbeWithSHAAnd2-KeyTripleDES-CBC",t["pbeWithSHAAnd2-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.4",t["1.2.840.113549.1.12.1.5"]="pbeWithSHAAnd128BitRC2-CBC",t["pbeWithSHAAnd128BitRC2-CBC"]="1.2.840.113549.1.12.1.5",t["1.2.840.113549.1.12.1.6"]="pbewithSHAAnd40BitRC2-CBC",t["pbewithSHAAnd40BitRC2-CBC"]="1.2.840.113549.1.12.1.6",t["1.2.840.113549.2.7"]="hmacWithSHA1",t.hmacWithSHA1="1.2.840.113549.2.7",t["1.2.840.113549.2.8"]="hmacWithSHA224",t.hmacWithSHA224="1.2.840.113549.2.8",t["1.2.840.113549.2.9"]="hmacWithSHA256",t.hmacWithSHA256="1.2.840.113549.2.9",t["1.2.840.113549.2.10"]="hmacWithSHA384",t.hmacWithSHA384="1.2.840.113549.2.10",t["1.2.840.113549.2.11"]="hmacWithSHA512",t.hmacWithSHA512="1.2.840.113549.2.11",t["1.2.840.113549.3.7"]="des-EDE3-CBC",t["des-EDE3-CBC"]="1.2.840.113549.3.7",t["2.16.840.1.101.3.4.1.2"]="aes128-CBC",t["aes128-CBC"]="2.16.840.1.101.3.4.1.2",t["2.16.840.1.101.3.4.1.22"]="aes192-CBC",t["aes192-CBC"]="2.16.840.1.101.3.4.1.22",t["2.16.840.1.101.3.4.1.42"]="aes256-CBC",t["aes256-CBC"]="2.16.840.1.101.3.4.1.42",t["2.5.4.3"]="commonName",t.commonName="2.5.4.3",t["2.5.4.5"]="serialName",t.serialName="2.5.4.5",t["2.5.4.6"]="countryName",t.countryName="2.5.4.6",t["2.5.4.7"]="localityName",t.localityName="2.5.4.7",t["2.5.4.8"]="stateOrProvinceName",t.stateOrProvinceName="2.5.4.8",t["2.5.4.10"]="organizationName",t.organizationName="2.5.4.10",t["2.5.4.11"]="organizationalUnitName",t.organizationalUnitName="2.5.4.11",t["2.16.840.1.113730.1.1"]="nsCertType",t.nsCertType="2.16.840.1.113730.1.1",t["2.5.29.1"]="authorityKeyIdentifier",t["2.5.29.2"]="keyAttributes",t["2.5.29.3"]="certificatePolicies",t["2.5.29.4"]="keyUsageRestriction",t["2.5.29.5"]="policyMapping",t["2.5.29.6"]="subtreesConstraint",t["2.5.29.7"]="subjectAltName",t["2.5.29.8"]="issuerAltName",t["2.5.29.9"]="subjectDirectoryAttributes",t["2.5.29.10"]="basicConstraints",t["2.5.29.11"]="nameConstraints",t["2.5.29.12"]="policyConstraints",t["2.5.29.13"]="basicConstraints",t["2.5.29.14"]="subjectKeyIdentifier",t.subjectKeyIdentifier="2.5.29.14",t["2.5.29.15"]="keyUsage",t.keyUsage="2.5.29.15",t["2.5.29.16"]="privateKeyUsagePeriod",t["2.5.29.17"]="subjectAltName",t.subjectAltName="2.5.29.17",t["2.5.29.18"]="issuerAltName",t.issuerAltName="2.5.29.18",t["2.5.29.19"]="basicConstraints",t.basicConstraints="2.5.29.19",t["2.5.29.20"]="cRLNumber",t["2.5.29.21"]="cRLReason",t["2.5.29.22"]="expirationDate",t["2.5.29.23"]="instructionCode",t["2.5.29.24"]="invalidityDate",t["2.5.29.25"]="cRLDistributionPoints",t["2.5.29.26"]="issuingDistributionPoint",t["2.5.29.27"]="deltaCRLIndicator",t["2.5.29.28"]="issuingDistributionPoint",t["2.5.29.29"]="certificateIssuer",t["2.5.29.30"]="nameConstraints",t["2.5.29.31"]="cRLDistributionPoints",t.cRLDistributionPoints="2.5.29.31",t["2.5.29.32"]="certificatePolicies",t.certificatePolicies="2.5.29.32",t["2.5.29.33"]="policyMappings",t["2.5.29.34"]="policyConstraints",t["2.5.29.35"]="authorityKeyIdentifier",t.authorityKeyIdentifier="2.5.29.35",t["2.5.29.36"]="policyConstraints",t["2.5.29.37"]="extKeyUsage",t.extKeyUsage="2.5.29.37",t["2.5.29.46"]="freshestCRL",t["2.5.29.54"]="inhibitAnyPolicy",t["1.3.6.1.4.1.11129.2.4.2"]="timestampList",t.timestampList="1.3.6.1.4.1.11129.2.4.2",t["1.3.6.1.5.5.7.1.1"]="authorityInfoAccess",t.authorityInfoAccess="1.3.6.1.5.5.7.1.1",t["1.3.6.1.5.5.7.3.1"]="serverAuth",t.serverAuth="1.3.6.1.5.5.7.3.1",t["1.3.6.1.5.5.7.3.2"]="clientAuth",t.clientAuth="1.3.6.1.5.5.7.3.2",t["1.3.6.1.5.5.7.3.3"]="codeSigning",t.codeSigning="1.3.6.1.5.5.7.3.3",t["1.3.6.1.5.5.7.3.4"]="emailProtection",t.emailProtection="1.3.6.1.5.5.7.3.4",t["1.3.6.1.5.5.7.3.8"]="timeStamping",t.timeStamping="1.3.6.1.5.5.7.3.8"}var i="oids";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/oids",["require","module"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1=e.asn1||{};t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(t,n,i,r){if(e.util.isArray(r)){for(var a=[],s=0;s<r.length;++s)void 0!==r[s]&&a.push(r[s]);r=a}return{tagClass:t,type:n,constructed:i,composed:i||e.util.isArray(r),value:r}};var n=t.getBerValueLength=function(e){var t=e.getByte();if(128!==t){var n,i=128&t;return n=i?e.getInt((127&t)<<3):t}};t.fromDer=function(i,r){if(void 0===r&&(r=!0),"string"==typeof i&&(i=e.util.createBuffer(i)),i.length()<2){var a=new Error("Too few bytes to parse DER.");throw a.bytes=i.length(),a}var s=i.getByte(),o=192&s,l=31&s,u=n(i);if(i.length()<u){if(r){var a=new Error("Too few bytes to read ASN.1 value.");throw a.detail=i.length()+" < "+u,a}u=i.length()}var c,f=32===(32&s),d=f;if(!d&&o===t.Class.UNIVERSAL&&l===t.Type.BITSTRING&&u>1){var p=i.read,h=i.getByte();if(0===h){s=i.getByte();var g=192&s;if(g===t.Class.UNIVERSAL||g===t.Class.CONTEXT_SPECIFIC)try{var y=n(i);d=y===u-(i.read-p),d&&(++p,--u)}catch(m){}}i.read=p}if(d)if(c=[],void 0===u)for(;;){if(i.bytes(2)===String.fromCharCode(0,0)){i.getBytes(2);break}c.push(t.fromDer(i,r))}else for(var v=i.length();u>0;)c.push(t.fromDer(i,r)),u-=v-i.length(),v=i.length();else{if(void 0===u){if(r)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=i.length()}if(l===t.Type.BMPSTRING){c="";for(var C=0;C<u;C+=2)c+=String.fromCharCode(i.getInt16())}else c=i.getBytes(u)}return t.create(o,l,f,c)},t.toDer=function(n){var i=e.util.createBuffer(),r=n.tagClass|n.type,a=e.util.createBuffer();if(n.composed){n.constructed?r|=32:a.putByte(0);for(var s=0;s<n.value.length;++s)void 0!==n.value[s]&&a.putBuffer(t.toDer(n.value[s]))}else if(n.type===t.Type.BMPSTRING)for(var s=0;s<n.value.length;++s)a.putInt16(n.value.charCodeAt(s));else n.type===t.Type.INTEGER&&n.value.length>1&&(0===n.value.charCodeAt(0)&&0===(128&n.value.charCodeAt(1))||255===n.value.charCodeAt(0)&&128===(128&n.value.charCodeAt(1)))?a.putBytes(n.value.substr(1)):a.putBytes(n.value);if(i.putByte(r),a.length()<=127)i.putByte(127&a.length());else{var o=a.length(),l="";do l+=String.fromCharCode(255&o),o>>>=8;while(o>0);i.putByte(128|l.length);for(var s=l.length-1;s>=0;--s)i.putByte(l.charCodeAt(s))}return i.putBuffer(a),i},t.oidToDer=function(t){var n=t.split("."),i=e.util.createBuffer();i.putByte(40*parseInt(n[0],10)+parseInt(n[1],10));for(var r,a,s,o,l=2;l<n.length;++l){r=!0,a=[],s=parseInt(n[l],10);do o=127&s,s>>>=7,r||(o|=128),a.push(o),r=!1;while(s>0);for(var u=a.length-1;u>=0;--u)i.putByte(a[u])}return i},t.derToOid=function(t){var n;"string"==typeof t&&(t=e.util.createBuffer(t));var i=t.getByte();n=Math.floor(i/40)+"."+i%40;for(var r=0;t.length()>0;)i=t.getByte(),r<<=7,128&i?r+=127&i:(n+="."+(r+i),r=0);return n},t.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var i=parseInt(e.substr(2,2),10)-1,r=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var l=e.charAt(10),u=10;"+"!==l&&"-"!==l&&(o=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(n,i,r),t.setUTCHours(a,s,o,0),u&&(l=e.charAt(u),"+"===l||"-"===l)){var c=parseInt(e.substr(u+1,2),10),f=parseInt(e.substr(u+4,2),10),d=60*c+f;d*=6e4,"+"===l?t.setTime(+t-d):t.setTime(+t+d)}return t},t.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),i=parseInt(e.substr(4,2),10)-1,r=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),l=0,u=0,c=!1;"Z"===e.charAt(e.length-1)&&(c=!0);var f=e.length-5,d=e.charAt(f);if("+"===d||"-"===d){var p=parseInt(e.substr(f+1,2),10),h=parseInt(e.substr(f+4,2),10);u=60*p+h,u*=6e4,"+"===d&&(u*=-1),c=!0}return"."===e.charAt(14)&&(l=1e3*parseFloat(e.substr(14),10)),c?(t.setUTCFullYear(n,i,r),t.setUTCHours(a,s,o,l),t.setTime(+t+u)):(t.setFullYear(n,i,r),t.setHours(a,s,o,l)),t},t.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",n=[];n.push((""+e.getUTCFullYear()).substr(2)),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var i=0;i<n.length;++i)n[i].length<2&&(t+="0"),t+=n[i];return t+="Z"},t.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",n=[];n.push(""+e.getUTCFullYear()),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var i=0;i<n.length;++i)n[i].length<2&&(t+="0"),t+=n[i];return t+="Z"},t.integerToDer=function(t){var n=e.util.createBuffer();if(t>=-128&&t<128)return n.putSignedInt(t,8);if(t>=-32768&&t<32768)return n.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return n.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return n.putSignedInt(t,32);var i=new Error("Integer too large; max is 32-bits.");throw i.integer=t,i},t.derToInteger=function(t){"string"==typeof t&&(t=e.util.createBuffer(t));var n=8*t.length();if(n>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(n)},t.validate=function(n,i,r,a){var s=!1;if(n.tagClass!==i.tagClass&&"undefined"!=typeof i.tagClass||n.type!==i.type&&"undefined"!=typeof i.type)a&&(n.tagClass!==i.tagClass&&a.push("["+i.name+'] Expected tag class "'+i.tagClass+'", got "'+n.tagClass+'"'),n.type!==i.type&&a.push("["+i.name+'] Expected type "'+i.type+'", got "'+n.type+'"'));else if(n.constructed===i.constructed||"undefined"==typeof i.constructed){if(s=!0,i.value&&e.util.isArray(i.value))for(var o=0,l=0;s&&l<i.value.length;++l)s=i.value[l].optional||!1,n.value[o]&&(s=t.validate(n.value[o],i.value[l],r,a),s?++o:i.value[l].optional&&(s=!0)),!s&&a&&a.push("["+i.name+'] Tag class "'+i.tagClass+'", type "'+i.type+'" expected value length "'+i.value.length+'", got "'+n.value.length+'"');s&&r&&(i.capture&&(r[i.capture]=n.value),i.captureAsn1&&(r[i.captureAsn1]=n))}else a&&a.push("["+i.name+'] Expected constructed "'+i.constructed+'", got "'+n.constructed+'"');return s};var i=/[^\\u0000-\\u00ff]/;t.prettyPrint=function(n,r,a){var s="";r=r||0,a=a||2,r>0&&(s+="\n");for(var o="",l=0;l<r*a;++l)o+=" ";switch(s+=o+"Tag: ",n.tagClass){case t.Class.UNIVERSAL:s+="Universal:";break;case t.Class.APPLICATION:s+="Application:";break;case t.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case t.Class.PRIVATE:s+="Private:"}if(n.tagClass===t.Class.UNIVERSAL)switch(s+=n.type,n.type){case t.Type.NONE:s+=" (None)";break;case t.Type.BOOLEAN:s+=" (Boolean)";break;case t.Type.BITSTRING:s+=" (Bit string)";break;case t.Type.INTEGER:s+=" (Integer)";break;case t.Type.OCTETSTRING:s+=" (Octet string)";break;case t.Type.NULL:s+=" (Null)";break;case t.Type.OID:s+=" (Object Identifier)";break;case t.Type.ODESC:s+=" (Object Descriptor)";break;case t.Type.EXTERNAL:s+=" (External or Instance of)";break;case t.Type.REAL:s+=" (Real)";break;case t.Type.ENUMERATED:s+=" (Enumerated)";break;case t.Type.EMBEDDED:s+=" (Embedded PDV)";break;case t.Type.UTF8:s+=" (UTF8)";break;case t.Type.ROID:s+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:s+=" (Sequence)";break;case t.Type.SET:s+=" (Set)";break;case t.Type.PRINTABLESTRING:s+=" (Printable String)";break;case t.Type.IA5String:s+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:s+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case t.Type.BMPSTRING:s+=" (BMP String)"}else s+=n.type;if(s+="\n",s+=o+"Constructed: "+n.constructed+"\n",n.composed){for(var u=0,c="",l=0;l<n.value.length;++l)void 0!==n.value[l]&&(u+=1,c+=t.prettyPrint(n.value[l],r+1,a),l+1<n.value.length&&(c+=","));s+=o+"Sub values: "+u+c}else{if(s+=o+"Value: ",n.type===t.Type.OID){var f=t.derToOid(n.value);s+=f,e.pki&&e.pki.oids&&f in e.pki.oids&&(s+=" ("+e.pki.oids[f]+") ")}if(n.type===t.Type.INTEGER)try{s+=t.derToInteger(n.value)}catch(d){s+="0x"+e.util.bytesToHex(n.value)}else n.type===t.Type.OCTETSTRING?(i.test(n.value)||(s+="("+n.value+") "),s+="0x"+e.util.bytesToHex(n.value)):s+=n.type===t.Type.UTF8?e.util.decodeUtf8(n.value):n.type===t.Type.PRINTABLESTRING||n.type===t.Type.IA5String?n.value:i.test(n.value)?"0x"+e.util.bytesToHex(n.value):0===n.value.length?"[null]":n.value}return s}}var i="asn1";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/asn1",["require","module","./util","./oids"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(){r=String.fromCharCode(128),r+=e.util.fillString(String.fromCharCode(0),64),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],s=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],o=new Array(64);for(var t=0;t<64;++t)o[t]=Math.floor(4294967296*Math.abs(Math.sin(t+1)));l=!0}function n(e,t,n){for(var i,r,l,u,c,f,d,p,h=n.length();h>=64;){for(r=e.h0,l=e.h1,u=e.h2,c=e.h3,p=0;p<16;++p)t[p]=n.getInt32Le(),f=c^l&(u^c),i=r+f+o[p]+t[p],d=s[p],r=c,c=u,u=l,l+=i<<d|i>>>32-d;for(;p<32;++p)f=u^c&(l^u),i=r+f+o[p]+t[a[p]],d=s[p],r=c,c=u,u=l,l+=i<<d|i>>>32-d;for(;p<48;++p)f=l^u^c,i=r+f+o[p]+t[a[p]],d=s[p],r=c,c=u,u=l,l+=i<<d|i>>>32-d;for(;p<64;++p)f=u^(l|~c),i=r+f+o[p]+t[a[p]],d=s[p],r=c,c=u,u=l,l+=i<<d|i>>>32-d;e.h0=e.h0+r|0,e.h1=e.h1+l|0,e.h2=e.h2+u|0,e.h3=e.h3+c|0,h-=64}}var i=e.md5=e.md5||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.md5=e.md.algorithms.md5=i,i.create=function(){l||t();var i=null,a=e.util.createBuffer(),s=new Array(16),o={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var t=o.messageLengthSize/4,n=0;n<t;++n)o.fullMessageLength.push(0);return a=e.util.createBuffer(),i={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},o},o.start(),o.update=function(t,r){"utf8"===r&&(t=e.util.encodeUtf8(t));var l=t.length;o.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var u=o.fullMessageLength.length-1;u>=0;--u)o.fullMessageLength[u]+=l[1],l[1]=l[0]+(o.fullMessageLength[u]/4294967296>>>0),o.fullMessageLength[u]=o.fullMessageLength[u]>>>0,l[0]=l[1]/4294967296>>>0;return a.putBytes(t),n(i,s,a),(a.read>2048||0===a.length())&&a.compact(),o},o.digest=function(){var t=e.util.createBuffer();t.putBytes(a.bytes());var l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,u=l&o.blockLength-1;t.putBytes(r.substr(0,o.blockLength-u));for(var c,f=0,d=o.fullMessageLength.length-1;d>=0;--d)c=8*o.fullMessageLength[d]+f,f=c/4294967296>>>0,t.putInt32Le(c>>>0);var p={h0:i.h0,h1:i.h1,h2:i.h2,h3:i.h3};n(p,s,t);var h=e.util.createBuffer();return h.putInt32Le(p.h0),h.putInt32Le(p.h1),h.putInt32Le(p.h2),h.putInt32Le(p.h3),h},o};var r=null,a=null,s=null,o=null,l=!1}var i="md5";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/md5",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(){r=String.fromCharCode(128),r+=e.util.fillString(String.fromCharCode(0),64),a=!0}function n(e,t,n){for(var i,r,a,s,o,l,u,c,f=n.length();f>=64;){for(r=e.h0,a=e.h1,s=e.h2,o=e.h3,l=e.h4,c=0;c<16;++c)i=n.getInt32(),t[c]=i,u=o^a&(s^o),i=(r<<5|r>>>27)+u+l+1518500249+i,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=r,r=i;for(;c<20;++c)i=t[c-3]^t[c-8]^t[c-14]^t[c-16],i=i<<1|i>>>31,t[c]=i,u=o^a&(s^o),i=(r<<5|r>>>27)+u+l+1518500249+i,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=r,r=i;for(;c<32;++c)i=t[c-3]^t[c-8]^t[c-14]^t[c-16],i=i<<1|i>>>31,t[c]=i,u=a^s^o,i=(r<<5|r>>>27)+u+l+1859775393+i,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=r,r=i;for(;c<40;++c)i=t[c-6]^t[c-16]^t[c-28]^t[c-32],i=i<<2|i>>>30,t[c]=i,u=a^s^o,i=(r<<5|r>>>27)+u+l+1859775393+i,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=r,r=i;for(;c<60;++c)i=t[c-6]^t[c-16]^t[c-28]^t[c-32],i=i<<2|i>>>30,t[c]=i,u=a&s|o&(a^s),i=(r<<5|r>>>27)+u+l+2400959708+i,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=r,r=i;for(;c<80;++c)i=t[c-6]^t[c-16]^t[c-28]^t[c-32],i=i<<2|i>>>30,t[c]=i,u=a^s^o,i=(r<<5|r>>>27)+u+l+3395469782+i,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=r,r=i;e.h0=e.h0+r|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+l|0,f-=64}}var i=e.sha1=e.sha1||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha1=e.md.algorithms.sha1=i,i.create=function(){a||t();var i=null,s=e.util.createBuffer(),o=new Array(80),l={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength64=[];for(var t=l.messageLengthSize/4,n=0;n<t;++n)l.fullMessageLength.push(0);return s=e.util.createBuffer(),i={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},l},l.start(),l.update=function(t,r){"utf8"===r&&(t=e.util.encodeUtf8(t));var a=t.length;l.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=l.fullMessageLength.length-1;u>=0;--u)l.fullMessageLength[u]+=a[1],a[1]=a[0]+(l.fullMessageLength[u]/4294967296>>>0),l.fullMessageLength[u]=l.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return s.putBytes(t),n(i,o,s),(s.read>2048||0===s.length())&&s.compact(),l},l.digest=function(){var t=e.util.createBuffer();t.putBytes(s.bytes());var a=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,u=a&l.blockLength-1;t.putBytes(r.substr(0,l.blockLength-u));for(var c,f,d=8*l.fullMessageLength[0],p=0;p<l.fullMessageLength.length-1;++p)c=8*l.fullMessageLength[p+1],f=c/4294967296>>>0,d+=f,t.putInt32(d>>>0),d=c>>>0;t.putInt32(d);var h={h0:i.h0,h1:i.h1,h2:i.h2,h3:i.h3,h4:i.h4};n(h,o,t);var g=e.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g},l};var r=null,a=!1}var i="sha1";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/sha1",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(){r=String.fromCharCode(128),r+=e.util.fillString(String.fromCharCode(0),64),s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=!0}function n(e,t,n){for(var i,r,a,o,l,u,c,f,d,p,h,g,y,m,v,C=n.length();C>=64;){for(c=0;c<16;++c)t[c]=n.getInt32();for(;c<64;++c)i=t[c-2],i=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,r=t[c-15],r=(r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3,t[c]=i+t[c-7]+r+t[c-16]|0;for(f=e.h0,d=e.h1,p=e.h2,h=e.h3,g=e.h4,y=e.h5,m=e.h6,v=e.h7,c=0;c<64;++c)o=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),l=m^g&(y^m),a=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),u=f&d|p&(f^d),i=v+o+l+s[c]+t[c],r=a+u,v=m,m=y,y=g,g=h+i>>>0,h=p,p=d,d=f,f=i+r>>>0;e.h0=e.h0+f|0,e.h1=e.h1+d|0,e.h2=e.h2+p|0,e.h3=e.h3+h|0,e.h4=e.h4+g|0,e.h5=e.h5+y|0,e.h6=e.h6+m|0,e.h7=e.h7+v|0,C-=64}}var i=e.sha256=e.sha256||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha256=e.md.algorithms.sha256=i,i.create=function(){a||t();var i=null,s=e.util.createBuffer(),o=new Array(64),l={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength64=[];for(var t=l.messageLengthSize/4,n=0;n<t;++n)l.fullMessageLength.push(0);return s=e.util.createBuffer(),i={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},l},l.start(),l.update=function(t,r){"utf8"===r&&(t=e.util.encodeUtf8(t));var a=t.length;l.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=l.fullMessageLength.length-1;u>=0;--u)l.fullMessageLength[u]+=a[1],a[1]=a[0]+(l.fullMessageLength[u]/4294967296>>>0),l.fullMessageLength[u]=l.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return s.putBytes(t),n(i,o,s),(s.read>2048||0===s.length())&&s.compact(),l},l.digest=function(){var t=e.util.createBuffer();t.putBytes(s.bytes());var a=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,u=a&l.blockLength-1;t.putBytes(r.substr(0,l.blockLength-u));for(var c,f,d=8*l.fullMessageLength[0],p=0;p<l.fullMessageLength.length-1;++p)c=8*l.fullMessageLength[p+1],f=c/4294967296>>>0,d+=f,t.putInt32(d>>>0),d=c>>>0;t.putInt32(d);var h={h0:i.h0,h1:i.h1,h2:i.h2,h3:i.h3,h4:i.h4,h5:i.h5,h6:i.h6,h7:i.h7};n(h,o,t);var g=e.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g.putInt32(h.h5),g.putInt32(h.h6),g.putInt32(h.h7),g},l};var r=null,a=!1,s=null}var i="sha256";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/sha256",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(){a=String.fromCharCode(128),a+=e.util.fillString(String.fromCharCode(0),128),o=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],
l={},l["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],l["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],l["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],l["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],s=!0}function n(e,t,n){for(var i,r,a,s,l,u,c,f,d,p,h,g,y,m,v,C,b,E,S,T,w,A,k,I,B,_,N,R,x,D,L,O,P,F,U,$=n.length();$>=128;){for(x=0;x<16;++x)t[x][0]=n.getInt32()>>>0,t[x][1]=n.getInt32()>>>0;for(;x<80;++x)O=t[x-2],D=O[0],L=O[1],i=((D>>>19|L<<13)^(L>>>29|D<<3)^D>>>6)>>>0,r=((D<<13|L>>>19)^(L<<3|D>>>29)^(D<<26|L>>>6))>>>0,F=t[x-15],D=F[0],L=F[1],a=((D>>>1|L<<31)^(D>>>8|L<<24)^D>>>7)>>>0,s=((D<<31|L>>>1)^(D<<24|L>>>8)^(D<<25|L>>>7))>>>0,P=t[x-7],U=t[x-16],L=r+P[1]+s+U[1],t[x][0]=i+P[0]+a+U[0]+(L/4294967296>>>0)>>>0,t[x][1]=L>>>0;for(y=e[0][0],m=e[0][1],v=e[1][0],C=e[1][1],b=e[2][0],E=e[2][1],S=e[3][0],T=e[3][1],w=e[4][0],A=e[4][1],k=e[5][0],I=e[5][1],B=e[6][0],_=e[6][1],N=e[7][0],R=e[7][1],x=0;x<80;++x)c=((w>>>14|A<<18)^(w>>>18|A<<14)^(A>>>9|w<<23))>>>0,f=((w<<18|A>>>14)^(w<<14|A>>>18)^(A<<23|w>>>9))>>>0,d=(B^w&(k^B))>>>0,p=(_^A&(I^_))>>>0,l=((y>>>28|m<<4)^(m>>>2|y<<30)^(m>>>7|y<<25))>>>0,u=((y<<4|m>>>28)^(m<<30|y>>>2)^(m<<25|y>>>7))>>>0,h=(y&v|b&(y^v))>>>0,g=(m&C|E&(m^C))>>>0,L=R+f+p+o[x][1]+t[x][1],i=N+c+d+o[x][0]+t[x][0]+(L/4294967296>>>0)>>>0,r=L>>>0,L=u+g,a=l+h+(L/4294967296>>>0)>>>0,s=L>>>0,N=B,R=_,B=k,_=I,k=w,I=A,L=T+r,w=S+i+(L/4294967296>>>0)>>>0,A=L>>>0,S=b,T=E,b=v,E=C,v=y,C=m,L=r+s,y=i+a+(L/4294967296>>>0)>>>0,m=L>>>0;L=e[0][1]+m,e[0][0]=e[0][0]+y+(L/4294967296>>>0)>>>0,e[0][1]=L>>>0,L=e[1][1]+C,e[1][0]=e[1][0]+v+(L/4294967296>>>0)>>>0,e[1][1]=L>>>0,L=e[2][1]+E,e[2][0]=e[2][0]+b+(L/4294967296>>>0)>>>0,e[2][1]=L>>>0,L=e[3][1]+T,e[3][0]=e[3][0]+S+(L/4294967296>>>0)>>>0,e[3][1]=L>>>0,L=e[4][1]+A,e[4][0]=e[4][0]+w+(L/4294967296>>>0)>>>0,e[4][1]=L>>>0,L=e[5][1]+I,e[5][0]=e[5][0]+k+(L/4294967296>>>0)>>>0,e[5][1]=L>>>0,L=e[6][1]+_,e[6][0]=e[6][0]+B+(L/4294967296>>>0)>>>0,e[6][1]=L>>>0,L=e[7][1]+R,e[7][0]=e[7][0]+N+(L/4294967296>>>0)>>>0,e[7][1]=L>>>0,$-=128}}var i=e.sha512=e.sha512||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha512=e.md.algorithms.sha512=i;var r=e.sha384=e.sha512.sha384=e.sha512.sha384||{};r.create=function(){return i.create("SHA-384")},e.md.sha384=e.md.algorithms.sha384=r,e.sha512.sha256=e.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},e.md["sha512/256"]=e.md.algorithms["sha512/256"]=e.sha512.sha256,e.sha512.sha224=e.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},e.md["sha512/224"]=e.md.algorithms["sha512/224"]=e.sha512.sha224,i.create=function(i){if(s||t(),"undefined"==typeof i&&(i="SHA-512"),!(i in l))throw new Error("Invalid SHA-512 algorithm: "+i);for(var r=l[i],o=null,u=e.util.createBuffer(),c=new Array(80),f=0;f<80;++f)c[f]=new Array(2);var d={algorithm:i.replace("-","").toLowerCase(),blockLength:128,digestLength:64,messageLength:0,fullMessageLength:null,messageLengthSize:16};return d.start=function(){d.messageLength=0,d.fullMessageLength=d.messageLength128=[];for(var t=d.messageLengthSize/4,n=0;n<t;++n)d.fullMessageLength.push(0);u=e.util.createBuffer(),o=new Array(r.length);for(var n=0;n<r.length;++n)o[n]=r[n].slice(0);return d},d.start(),d.update=function(t,i){"utf8"===i&&(t=e.util.encodeUtf8(t));var r=t.length;d.messageLength+=r,r=[r/4294967296>>>0,r>>>0];for(var a=d.fullMessageLength.length-1;a>=0;--a)d.fullMessageLength[a]+=r[1],r[1]=r[0]+(d.fullMessageLength[a]/4294967296>>>0),d.fullMessageLength[a]=d.fullMessageLength[a]>>>0,r[0]=r[1]/4294967296>>>0;return u.putBytes(t),n(o,c,u),(u.read>2048||0===u.length())&&u.compact(),d},d.digest=function(){var t=e.util.createBuffer();t.putBytes(u.bytes());var r=d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize,s=r&d.blockLength-1;t.putBytes(a.substr(0,d.blockLength-s));for(var l,f,p=8*d.fullMessageLength[0],h=0;h<d.fullMessageLength.length-1;++h)l=8*d.fullMessageLength[h+1],f=l/4294967296>>>0,p+=f,t.putInt32(p>>>0),p=l>>>0;t.putInt32(p);for(var g=new Array(o.length),h=0;h<o.length;++h)g[h]=o[h].slice(0);n(g,c,t);var y,m=e.util.createBuffer();y="SHA-512"===i?g.length:"SHA-384"===i?g.length-2:g.length-4;for(var h=0;h<y;++h)m.putInt32(g[h][0]),h===y-1&&"SHA-512/224"===i||m.putInt32(g[h][1]);return m},d};var a=null,s=!1,o=null,l=null}var i="sha512";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/sha512",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.md=e.md||{},e.md.algorithms={md5:e.md5,sha1:e.sha1,sha256:e.sha256},e.md.md5=e.md5,e.md.sha1=e.sha1,e.md.sha256=e.sha256}var i="md";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/md",["require","module","./md5","./sha1","./sha256","./sha512"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.hmac=e.hmac||{};t.create=function(){var t=null,n=null,i=null,r=null,a={};return a.start=function(a,s){if(null!==a)if("string"==typeof a){if(a=a.toLowerCase(),!(a in e.md.algorithms))throw new Error('Unknown hash algorithm "'+a+'"');n=e.md.algorithms[a].create()}else n=a;if(null===s)s=t;else{if("string"==typeof s)s=e.util.createBuffer(s);else if(e.util.isArray(s)){var o=s;s=e.util.createBuffer();for(var l=0;l<o.length;++l)s.putByte(o[l])}var u=s.length();u>n.blockLength&&(n.start(),n.update(s.bytes()),s=n.digest()),i=e.util.createBuffer(),r=e.util.createBuffer(),u=s.length();for(var l=0;l<u;++l){var o=s.at(l);i.putByte(54^o),r.putByte(92^o)}if(u<n.blockLength)for(var o=n.blockLength-u,l=0;l<o;++l)i.putByte(54),r.putByte(92);t=s,i=i.bytes(),r=r.bytes()}n.start(),n.update(i)},a.update=function(e){n.update(e)},a.getMac=function(){var e=n.digest().bytes();return n.start(),n.update(r),n.update(e),n.digest()},a.digest=a.getMac,a}}var i="hmac";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/hmac",["require","module","./md","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e){for(var t=e.name+": ",n=[],i=function(e,t){return" "+t},r=0;r<e.values.length;++r)n.push(e.values[r].replace(/^(\S+\r\n)/,i));t+=n.join(",")+"\r\n";for(var a=0,s=-1,r=0;r<t.length;++r,++a)if(a>65&&s!==-1){var o=t[s];","===o?(++s,t=t.substr(0,s)+"\r\n "+t.substr(s)):t=t.substr(0,s)+"\r\n"+o+t.substr(s+1),a=r-s-1,s=-1,++r}else" "!==t[r]&&"\t"!==t[r]&&","!==t[r]||(s=r);return t}function n(e){return e.replace(/^\s+/,"")}var i=e.pem=e.pem||{};i.encode=function(n,i){i=i||{};var r,a="-----BEGIN "+n.type+"-----\r\n";if(n.procType&&(r={name:"Proc-Type",values:[String(n.procType.version),n.procType.type]},a+=t(r)),n.contentDomain&&(r={name:"Content-Domain",values:[n.contentDomain]},a+=t(r)),n.dekInfo&&(r={name:"DEK-Info",values:[n.dekInfo.algorithm]},n.dekInfo.parameters&&r.values.push(n.dekInfo.parameters),a+=t(r)),n.headers)for(var s=0;s<n.headers.length;++s)a+=t(n.headers[s]);return n.procType&&(a+="\r\n"),a+=e.util.encode64(n.body,i.maxline||64)+"\r\n",a+="-----END "+n.type+"-----\r\n"},i.decode=function(t){for(var i,r=[],a=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/;;){if(i=a.exec(t),!i)break;var l={type:i[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:e.util.decode64(i[3])};if(r.push(l),i[2]){for(var u=i[2].split(o),c=0;i&&c<u.length;){for(var f=u[c].replace(/\s+$/,""),d=c+1;d<u.length;++d){var p=u[d];if(!/\s/.test(p[0]))break;f+=p,c=d}if(i=f.match(s)){for(var h={name:i[1],values:[]},g=i[2].split(","),y=0;y<g.length;++y)h.values.push(n(g[y]));if(l.procType)if(l.contentDomain||"Content-Domain"!==h.name)if(l.dekInfo||"DEK-Info"!==h.name)l.headers.push(h);else{if(0===h.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:g[0],parameters:g[1]||null}}else l.contentDomain=g[0]||"";else{if("Proc-Type"!==h.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==h.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:g[0],type:g[1]}}}++c}if("ENCRYPTED"===l.procType&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}}var i="pem";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pem",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,n){var i=function(){return new e.des.Algorithm(t,n)};e.cipher.registerAlgorithm(t,i)}function n(e){for(var t,n=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],i=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],a=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=e.length()>8?3:1,m=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],C=0,b=0;b<y;b++){var E=e.getInt32(),S=e.getInt32();t=252645135&(E>>>4^S),S^=t,E^=t<<4,t=65535&(S>>>-16^E),E^=t,S^=t<<-16,t=858993459&(E>>>2^S),S^=t,E^=t<<2,t=65535&(S>>>-16^E),E^=t,S^=t<<-16,t=1431655765&(E>>>1^S),S^=t,E^=t<<1,t=16711935&(S>>>8^E),E^=t,S^=t<<8,t=1431655765&(E>>>1^S),S^=t,E^=t<<1,t=E<<8|S>>>20&240,E=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=t;for(var T=0;T<v.length;++T){v[T]?(E=E<<2|E>>>26,S=S<<2|S>>>26):(E=E<<1|E>>>27,S=S<<1|S>>>27),E&=-15,S&=-15;var w=n[E>>>28]|i[E>>>24&15]|r[E>>>20&15]|a[E>>>16&15]|s[E>>>12&15]|o[E>>>8&15]|l[E>>>4&15],A=u[S>>>28]|c[S>>>24&15]|f[S>>>20&15]|d[S>>>16&15]|p[S>>>12&15]|h[S>>>8&15]|g[S>>>4&15];t=65535&(A>>>16^w),m[C++]=w^t,m[C++]=A^t<<16}}return m}function i(e,t,n,i){var r,p=32===e.length?3:9;r=3===p?i?[30,-2,-2]:[0,32,2]:i?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var h,g=t[0],y=t[1];h=252645135&(g>>>4^y),y^=h,g^=h<<4,h=65535&(g>>>16^y),y^=h,g^=h<<16,h=858993459&(y>>>2^g),g^=h,y^=h<<2,h=16711935&(y>>>8^g),g^=h,y^=h<<8,h=1431655765&(g>>>1^y),y^=h,g^=h<<1,g=g<<1|g>>>31,y=y<<1|y>>>31;for(var m=0;m<p;m+=3){for(var v=r[m+1],C=r[m+2],b=r[m];b!=v;b+=C){var E=y^e[b],S=(y>>>4|y<<28)^e[b+1];h=g,g=y,y=h^(s[E>>>24&63]|l[E>>>16&63]|c[E>>>8&63]|d[63&E]|a[S>>>24&63]|o[S>>>16&63]|u[S>>>8&63]|f[63&S])}h=g,g=y,y=h}g=g>>>1|g<<31,y=y>>>1|y<<31,h=1431655765&(g>>>1^y),y^=h,g^=h<<1,h=16711935&(y>>>8^g),g^=h,y^=h<<8,h=858993459&(y>>>2^g),g^=h,y^=h<<2,h=65535&(g>>>16^y),y^=h,g^=h<<16,h=252645135&(g>>>4^y),y^=h,g^=h<<4,n[0]=g,n[1]=y}function r(t){t=t||{};var n,i=(t.mode||"CBC").toUpperCase(),r="DES-"+i;n=t.decrypt?e.cipher.createDecipher(r,t.key):e.cipher.createCipher(r,t.key);var a=n.start;return n.start=function(t,i){var r=null;i instanceof e.util.ByteBuffer&&(r=i,i={}),i=i||{},i.output=r,i.iv=t,a.call(n,i)},n}e.des=e.des||{},e.des.startEncrypting=function(e,t,n,i){var a=r({key:e,output:n,decrypt:!1,mode:i||(null===t?"ECB":"CBC")});return a.start(t),a},e.des.createEncryptionCipher=function(e,t){return r({key:e,output:null,decrypt:!1,mode:t})},e.des.startDecrypting=function(e,t,n,i){var a=r({key:e,output:n,decrypt:!0,mode:i||(null===t?"ECB":"CBC")});return a.start(t),a},e.des.createDecryptionCipher=function(e,t){return r({key:e,output:null,decrypt:!0,mode:t})},e.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return i(n._keys,e,t,!1)},decrypt:function(e,t){return i(n._keys,e,t,!0)}}}),n._init=!1},e.des.Algorithm.prototype.initialize=function(t){if(!this._init){var i=e.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==i.length())throw new Error("Invalid Triple-DES key size: "+8*i.length());this._keys=n(i),this._init=!0}},t("DES-ECB",e.cipher.modes.ecb),t("DES-CBC",e.cipher.modes.cbc),t("DES-CFB",e.cipher.modes.cfb),t("DES-OFB",e.cipher.modes.ofb),t("DES-CTR",e.cipher.modes.ctr),t("3DES-ECB",e.cipher.modes.ecb),t("3DES-CBC",e.cipher.modes.cbc),t("3DES-CFB",e.cipher.modes.cfb),t("3DES-OFB",e.cipher.modes.ofb),t("3DES-CTR",e.cipher.modes.ctr);var a=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],s=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],o=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],l=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],u=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],c=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],f=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],d=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696]}var i="des";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/des",["require","module","./cipher","./cipherModes","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var n,i=e.pkcs5=e.pkcs5||{},r="undefined"!=typeof process&&process.versions&&process.versions.node;r&&!e.disableNativeCode&&(n=t("crypto")),e.pbkdf2=i.pbkdf2=function(t,i,a,s,o,l){function u(){return b>p?l(null,C):(g.start(null,null),g.update(i),g.update(e.util.int32ToBytes(b)),y=v=g.digest().getBytes(),E=2,void c())}function c(){return E<=a?(g.start(null,null),g.update(v),m=g.digest().getBytes(),y=e.util.xorBytes(y,m,f),v=m,++E,e.util.setImmediate(c)):(C+=b<p?y:y.substr(0,h),++b,void u())}if("function"==typeof o&&(l=o,o=null),r&&!e.disableNativeCode&&n.pbkdf2&&(null===o||"object"!=typeof o)&&(n.pbkdf2Sync.length>4||!o||"sha1"===o))return"string"!=typeof o&&(o="sha1"),i=new Buffer(i,"binary"),l?4===n.pbkdf2Sync.length?n.pbkdf2(t,i,a,s,function(e,t){return e?l(e):void l(null,t.toString("binary"))}):n.pbkdf2(t,i,a,s,o,function(e,t){return e?l(e):void l(null,t.toString("binary"))}):4===n.pbkdf2Sync.length?n.pbkdf2Sync(t,i,a,s).toString("binary"):n.pbkdf2Sync(t,i,a,s,o).toString("binary");if("undefined"!=typeof o&&null!==o||(o=e.md.sha1.create()),"string"==typeof o){if(!(o in e.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=e.md[o].create()}var f=o.digestLength;if(s>4294967295*f){var d=new Error("Derived key is too long.");if(l)return l(d);throw d}var p=Math.ceil(s/f),h=s-(p-1)*f,g=e.hmac.create();g.start(o,t);var y,m,v,C="";if(!l){for(var b=1;b<=p;++b){g.start(null,null),g.update(i),g.update(e.util.int32ToBytes(b)),y=v=g.digest().getBytes();for(var E=2;E<=a;++E)g.start(null,null),g.update(v),m=g.digest().getBytes(),y=e.util.xorBytes(y,m,f),v=m;C+=b<p?y:y.substr(0,h)}return C}var E,b=1;u()}}var i="pbkdf2";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pbkdf2",["require","module","./hmac","./md","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var n="undefined"!=typeof process&&process.versions&&process.versions.node,i=null;e.disableNativeCode||!n||process.versions["node-webkit"]||(i=t("crypto"));var r=e.prng=e.prng||{};r.create=function(t){function n(e){if(o.pools[0].messageLength>=32)return a(),e();var t=32-o.pools[0].messageLength<<5;o.seedFile(t,function(t,n){return t?e(t):(o.collect(n),a(),void e())})}function r(){if(o.pools[0].messageLength>=32)return a();var e=32-o.pools[0].messageLength<<5;o.collect(o.seedFileSync(e)),a()}function a(){var e=o.plugin.md.create();e.update(o.pools[0].digest().getBytes()),o.pools[0].start();for(var t=1,n=1;n<32;++n)t=31===t?2147483648:t<<2,t%o.reseeds===0&&(e.update(o.pools[n].digest().getBytes()),o.pools[n].start());var i=e.digest().getBytes();e.start(),e.update(i);var r=e.digest().getBytes();o.key=o.plugin.formatKey(i),o.seed=o.plugin.formatSeed(r),o.reseeds=4294967295===o.reseeds?0:o.reseeds+1,o.generated=0}function s(t){var n=null;if("undefined"!=typeof window){var i=window.crypto||window.msCrypto;i&&i.getRandomValues&&(n=function(e){return i.getRandomValues(e)})}var r=e.util.createBuffer();if(n)for(;r.length()<t;){var a=Math.max(1,Math.min(t-r.length(),65536)/4),s=new Uint32Array(Math.floor(a));try{n(s);for(var o=0;o<s.length;++o)r.putInt32(s[o])}catch(l){if(!("undefined"!=typeof QuotaExceededError&&l instanceof QuotaExceededError))throw l}}if(r.length()<t)for(var u,c,f,d=Math.floor(65536*Math.random());r.length()<t;){c=16807*(65535&d),u=16807*(d>>16),c+=(32767&u)<<16,c+=u>>15,c=(2147483647&c)+(c>>31),d=4294967295&c;for(var o=0;o<3;++o)f=d>>>(o<<3),f^=Math.floor(256*Math.random()),r.putByte(String.fromCharCode(255&f))}return r.getBytes(t)}for(var o={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0},l=t.md,u=new Array(32),c=0;c<32;++c)u[c]=l.create();return o.pools=u,o.pool=0,o.generate=function(t,i){function r(f){if(f)return i(f);if(c.length()>=t)return i(null,c.getBytes(t));if(o.generated>1048575&&(o.key=null),null===o.key)return e.util.nextTick(function(){n(r)});var d=a(o.key,o.seed);o.generated+=d.length,c.putBytes(d),o.key=l(a(o.key,s(o.seed))),o.seed=u(a(o.key,o.seed)),e.util.setImmediate(r)}if(!i)return o.generateSync(t);var a=o.plugin.cipher,s=o.plugin.increment,l=o.plugin.formatKey,u=o.plugin.formatSeed,c=e.util.createBuffer();o.key=null,r()},o.generateSync=function(t){var n=o.plugin.cipher,i=o.plugin.increment,a=o.plugin.formatKey,s=o.plugin.formatSeed;o.key=null;for(var l=e.util.createBuffer();l.length()<t;){o.generated>1048575&&(o.key=null),null===o.key&&r();var u=n(o.key,o.seed);o.generated+=u.length,l.putBytes(u),o.key=a(n(o.key,i(o.seed))),o.seed=s(n(o.key,o.seed))}return l.getBytes(t)},i?(o.seedFile=function(e,t){i.randomBytes(e,function(e,n){return e?t(e):void t(null,n.toString())})},o.seedFileSync=function(e){return i.randomBytes(e).toString()}):(o.seedFile=function(e,t){try{t(null,s(e))}catch(n){t(n)}},o.seedFileSync=s),o.collect=function(e){for(var t=e.length,n=0;n<t;++n)o.pools[o.pool].update(e.substr(n,1)),o.pool=31===o.pool?0:o.pool+1},o.collectInt=function(e,t){for(var n="",i=0;i<t;i+=8)n+=String.fromCharCode(e>>i&255);o.collect(n)},o.registerWorker=function(e){if(e===self)o.seedFile=function(e,t){function n(e){var i=e.data;i.forge&&i.forge.prng&&(self.removeEventListener("message",n),t(i.forge.prng.err,i.forge.prng.bytes))}self.addEventListener("message",n),self.postMessage({forge:{prng:{needed:e}}})};else{var t=function(t){var n=t.data;n.forge&&n.forge.prng&&o.seedFile(n.forge.prng.needed,function(t,n){e.postMessage({forge:{prng:{err:t,bytes:n}}})})};e.addEventListener("message",t)}},o}}var i="prng";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/prng",["require","module","./md","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.random&&e.random.getBytes||!function(t){function n(){var t=e.prng.create(i);return t.getBytes=function(e,n){return t.generate(e,n)},t.getBytesSync=function(e){return t.generate(e)},t}var i={},r=new Array(4),a=e.util.createBuffer();i.formatKey=function(t){var n=e.util.createBuffer(t);return t=new Array(4),t[0]=n.getInt32(),t[1]=n.getInt32(),t[2]=n.getInt32(),t[3]=n.getInt32(),e.aes._expandKey(t,!1)},i.formatSeed=function(t){var n=e.util.createBuffer(t);return t=new Array(4),t[0]=n.getInt32(),t[1]=n.getInt32(),t[2]=n.getInt32(),t[3]=n.getInt32(),t},i.cipher=function(t,n){return e.aes._updateBlock(t,n,r,!1),a.putInt32(r[0]),a.putInt32(r[1]),a.putInt32(r[2]),a.putInt32(r[3]),a.getBytes()},i.increment=function(e){return++e[3],e},i.md=e.md.sha256;var s=n(),o="undefined"!=typeof process&&process.versions&&process.versions.node,l=null;if("undefined"!=typeof window){var u=window.crypto||window.msCrypto;u&&u.getRandomValues&&(l=function(e){return u.getRandomValues(e)})}if(e.disableNativeCode||!o&&!l){if("undefined"==typeof window||void 0===window.document,s.collectInt(+new Date,32),"undefined"!=typeof navigator){var c="";for(var f in navigator)try{"string"==typeof navigator[f]&&(c+=navigator[f])}catch(d){}s.collect(c),c=null}t&&(t().mousemove(function(e){s.collectInt(e.clientX,16),s.collectInt(e.clientY,16)}),t().keypress(function(e){s.collectInt(e.charCode,8)}))}if(e.random)for(var f in s)e.random[f]=s[f];else e.random=s;e.random.createInstance=n}("undefined"!=typeof jQuery?jQuery:null)}var i="random";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/random",["require","module","./aes","./md","./prng","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],n=[1,2,3,5],i=function(e,t){return e<<t&65535|(65535&e)>>16-t},r=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.rc2=e.rc2||{},e.rc2.expandKey=function(n,i){"string"==typeof n&&(n=e.util.createBuffer(n)),i=i||128;var r,a=n,s=n.length(),o=i,l=Math.ceil(o/8),u=255>>(7&o);for(r=s;r<128;r++)a.putByte(t[a.at(r-1)+a.at(r-s)&255]);for(a.setAt(128-l,t[a.at(128-l)&u]),r=127-l;r>=0;r--)a.setAt(r,t[a.at(r+1)^a.at(r+l)]);return a};var a=function(t,a,s){var o,l,u,c,f=!1,d=null,p=null,h=null,g=[];for(t=e.rc2.expandKey(t,a),u=0;u<64;u++)g.push(t.getInt16Le());s?(o=function(e){for(u=0;u<4;u++)e[u]+=g[c]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),e[u]=i(e[u],n[u]),c++},l=function(e){for(u=0;u<4;u++)e[u]+=g[63&e[(u+3)%4]]}):(o=function(e){for(u=3;u>=0;u--)e[u]=r(e[u],n[u]),e[u]-=g[c]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),c--},l=function(e){for(u=3;u>=0;u--)e[u]-=g[63&e[(u+3)%4]]});var y=function(e){var t=[];for(u=0;u<4;u++){var n=d.getInt16Le();null!==h&&(s?n^=h.getInt16Le():h.putInt16Le(n)),t.push(65535&n)}c=s?0:63;for(var i=0;i<e.length;i++)for(var r=0;r<e[i][0];r++)e[i][1](t);for(u=0;u<4;u++)null!==h&&(s?h.putInt16Le(t[u]):t[u]^=h.getInt16Le()),p.putInt16Le(t[u])},m=null;return m={start:function(t,n){t&&"string"==typeof t&&(t=e.util.createBuffer(t)),f=!1,d=e.util.createBuffer(),p=n||new e.util.createBuffer,
h=t,m.output=p},update:function(e){for(f||d.putBuffer(e);d.length()>=8;)y([[5,o],[1,l],[6,o],[1,l],[5,o]])},finish:function(e){var t=!0;if(s)if(e)t=e(8,d,!s);else{var n=8===d.length()?8:8-d.length();d.fillWithByte(n,n)}if(t&&(f=!0,m.update()),!s&&(t=0===d.length()))if(e)t=e(8,p,!s);else{var i=p.length(),r=p.at(i-1);r>i?t=!1:p.truncate(r)}return t}}};e.rc2.startEncrypting=function(t,n,i){var r=e.rc2.createEncryptionCipher(t,128);return r.start(n,i),r},e.rc2.createEncryptionCipher=function(e,t){return a(e,t,!0)},e.rc2.startDecrypting=function(t,n,i){var r=e.rc2.createDecryptionCipher(t,128);return r.start(n,i),r},e.rc2.createDecryptionCipher=function(e,t){return a(e,t,!1)}}var i="rc2";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/rc2",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,n){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function n(){return new t(null)}function i(e,t,n,i,r,a){for(;--a>=0;){var s=t*this.data[e++]+n.data[i]+r;r=Math.floor(s/67108864),n.data[i++]=67108863&s}return r}function r(e,t,n,i,r,a){for(var s=32767&t,o=t>>15;--a>=0;){var l=32767&this.data[e],u=this.data[e++]>>15,c=o*l+u*s;l=s*l+((32767&c)<<15)+n.data[i]+(1073741823&r),r=(l>>>30)+(c>>>15)+o*u+(r>>>30),n.data[i++]=1073741823&l}return r}function a(e,t,n,i,r,a){for(var s=16383&t,o=t>>14;--a>=0;){var l=16383&this.data[e],u=this.data[e++]>>14,c=o*l+u*s;l=s*l+((16383&c)<<14)+n.data[i]+r,r=(l>>28)+(c>>14)+o*u,n.data[i++]=268435455&l}return r}function s(e){return at.charAt(e)}function o(e,t){var n=st[e.charCodeAt(t)];return null==n?-1:n}function l(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function u(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function c(e){var t=n();return t.fromInt(e),t}function f(e,n){var i;if(16==n)i=4;else if(8==n)i=3;else if(256==n)i=8;else if(2==n)i=1;else if(32==n)i=5;else{if(4!=n)return void this.fromRadix(e,n);i=2}this.t=0,this.s=0;for(var r=e.length,a=!1,s=0;--r>=0;){var l=8==i?255&e[r]:o(e,r);l<0?"-"==e.charAt(r)&&(a=!0):(a=!1,0==s?this.data[this.t++]=l:s+i>this.DB?(this.data[this.t-1]|=(l&(1<<this.DB-s)-1)<<s,this.data[this.t++]=l>>this.DB-s):this.data[this.t-1]|=l<<s,s+=i,s>=this.DB&&(s-=this.DB))}8==i&&0!=(128&e[0])&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),a&&t.ZERO.subTo(this,this)}function d(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function p(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,i=(1<<t)-1,r=!1,a="",o=this.t,l=this.DB-o*this.DB%t;if(o-- >0)for(l<this.DB&&(n=this.data[o]>>l)>0&&(r=!0,a=s(n));o>=0;)l<t?(n=(this.data[o]&(1<<l)-1)<<t-l,n|=this.data[--o]>>(l+=this.DB-t)):(n=this.data[o]>>(l-=t)&i,l<=0&&(l+=this.DB,--o)),n>0&&(r=!0),r&&(a+=s(n));return r?a:"0"}function h(){var e=n();return t.ZERO.subTo(this,e),e}function g(){return this.s<0?this.negate():this}function y(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this.data[n]-e.data[n]))return t;return 0}function m(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function v(){return this.t<=0?0:this.DB*(this.t-1)+m(this.data[this.t-1]^this.s&this.DM)}function C(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s}function b(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s}function E(e,t){var n,i=e%this.DB,r=this.DB-i,a=(1<<r)-1,s=Math.floor(e/this.DB),o=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t.data[n+s+1]=this.data[n]>>r|o,o=(this.data[n]&a)<<i;for(n=s-1;n>=0;--n)t.data[n]=0;t.data[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function S(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return void(t.t=0);var i=e%this.DB,r=this.DB-i,a=(1<<i)-1;t.data[0]=this.data[n]>>i;for(var s=n+1;s<this.t;++s)t.data[s-n-1]|=(this.data[s]&a)<<r,t.data[s-n]=this.data[s]>>i;i>0&&(t.data[this.t-n-1]|=(this.s&a)<<r),t.t=this.t-n,t.clamp()}function T(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this.data[n]-e.data[n],t.data[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this.data[n],t.data[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e.data[n],t.data[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t.data[n++]=this.DV+i:i>0&&(t.data[n++]=i),t.t=n,t.clamp()}function w(e,n){var i=this.abs(),r=e.abs(),a=i.t;for(n.t=a+r.t;--a>=0;)n.data[a]=0;for(a=0;a<r.t;++a)n.data[a+i.t]=i.am(0,r.data[a],n,a,0,i.t);n.s=0,n.clamp(),this.s!=e.s&&t.ZERO.subTo(n,n)}function A(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e.data[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()}function k(e,i,r){var a=e.abs();if(!(a.t<=0)){var s=this.abs();if(s.t<a.t)return null!=i&&i.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=n());var o=n(),l=this.s,u=e.s,c=this.DB-m(a.data[a.t-1]);c>0?(a.lShiftTo(c,o),s.lShiftTo(c,r)):(a.copyTo(o),s.copyTo(r));var f=o.t,d=o.data[f-1];if(0!=d){var p=d*(1<<this.F1)+(f>1?o.data[f-2]>>this.F2:0),h=this.FV/p,g=(1<<this.F1)/p,y=1<<this.F2,v=r.t,C=v-f,b=null==i?n():i;for(o.dlShiftTo(C,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),t.ONE.dlShiftTo(f,b),b.subTo(o,o);o.t<f;)o.data[o.t++]=0;for(;--C>=0;){var E=r.data[--v]==d?this.DM:Math.floor(r.data[v]*h+(r.data[v-1]+y)*g);if((r.data[v]+=o.am(0,E,r,C,0,f))<E)for(o.dlShiftTo(C,b),r.subTo(b,r);r.data[v]<--E;)r.subTo(b,r)}null!=i&&(r.drShiftTo(f,i),l!=u&&t.ZERO.subTo(i,i)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),l<0&&t.ZERO.subTo(r,r)}}}function I(e){var i=n();return this.abs().divRemTo(e,null,i),this.s<0&&i.compareTo(t.ZERO)>0&&e.subTo(i,i),i}function B(e){this.m=e}function _(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function N(e){return e}function R(e){e.divRemTo(this.m,null,e)}function x(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function D(e,t){e.squareTo(t),this.reduce(t)}function L(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function O(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function P(e){var i=n();return e.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),e.s<0&&i.compareTo(t.ZERO)>0&&this.m.subTo(i,i),i}function F(e){var t=n();return e.copyTo(t),this.reduce(t),t}function U(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e.data[t],i=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e.data[n]+=this.m.am(0,i,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function $(e,t){e.squareTo(t),this.reduce(t)}function z(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function V(){return 0==(this.t>0?1&this.data[0]:this.s)}function M(e,i){if(e>4294967295||e<1)return t.ONE;var r=n(),a=n(),s=i.convert(this),o=m(e)-1;for(s.copyTo(r);--o>=0;)if(i.sqrTo(r,a),(e&1<<o)>0)i.mulTo(a,s,r);else{var l=r;r=a,a=l}return i.revert(r)}function j(e,t){var n;return n=e<256||t.isEven()?new B(t):new O(t),this.exp(e,n)}function q(){var e=n();return this.copyTo(e),e}function H(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function K(){return 0==this.t?this.s:this.data[0]<<24>>24}function Q(){return 0==this.t?this.s:this.data[0]<<16>>16}function G(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function W(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function X(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),i=Math.pow(e,t),r=c(i),a=n(),s=n(),o="";for(this.divRemTo(r,a,s);a.signum()>0;)o=(i+s.intValue()).toString(e).substr(1)+o,a.divRemTo(r,a,s);return s.intValue().toString(e)+o}function Y(e,n){this.fromInt(0),null==n&&(n=10);for(var i=this.chunkSize(n),r=Math.pow(n,i),a=!1,s=0,l=0,u=0;u<e.length;++u){var c=o(e,u);c<0?"-"==e.charAt(u)&&0==this.signum()&&(a=!0):(l=n*l+c,++s>=i&&(this.dMultiply(r),this.dAddOffset(l,0),s=0,l=0))}s>0&&(this.dMultiply(Math.pow(n,s)),this.dAddOffset(l,0)),a&&t.ZERO.subTo(this,this)}function Z(e,n,i){if("number"==typeof n)if(e<2)this.fromInt(1);else for(this.fromNumber(e,i),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),se,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var r=new Array,a=7&e;r.length=(e>>3)+1,n.nextBytes(r),a>0?r[0]&=(1<<a)-1:r[0]=0,this.fromString(r,256)}}function J(){var e=this.t,t=new Array;t[0]=this.s;var n,i=this.DB-e*this.DB%8,r=0;if(e-- >0)for(i<this.DB&&(n=this.data[e]>>i)!=(this.s&this.DM)>>i&&(t[r++]=n|this.s<<this.DB-i);e>=0;)i<8?(n=(this.data[e]&(1<<i)-1)<<8-i,n|=this.data[--e]>>(i+=this.DB-8)):(n=this.data[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==r&&(128&this.s)!=(128&n)&&++r,(r>0||n!=this.s)&&(t[r++]=n);return t}function ee(e){return 0==this.compareTo(e)}function te(e){return this.compareTo(e)<0?this:e}function ne(e){return this.compareTo(e)>0?this:e}function ie(e,t,n){var i,r,a=Math.min(e.t,this.t);for(i=0;i<a;++i)n.data[i]=t(this.data[i],e.data[i]);if(e.t<this.t){for(r=e.s&this.DM,i=a;i<this.t;++i)n.data[i]=t(this.data[i],r);n.t=this.t}else{for(r=this.s&this.DM,i=a;i<e.t;++i)n.data[i]=t(r,e.data[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function re(e,t){return e&t}function ae(e){var t=n();return this.bitwiseTo(e,re,t),t}function se(e,t){return e|t}function oe(e){var t=n();return this.bitwiseTo(e,se,t),t}function le(e,t){return e^t}function ue(e){var t=n();return this.bitwiseTo(e,le,t),t}function ce(e,t){return e&~t}function fe(e){var t=n();return this.bitwiseTo(e,ce,t),t}function de(){for(var e=n(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function pe(e){var t=n();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function he(e){var t=n();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function ge(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function ye(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+ge(this.data[e]);return this.s<0?this.t*this.DB:-1}function me(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function ve(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=me(this.data[n]^t);return e}function Ce(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)}function be(e,n){var i=t.ONE.shiftLeft(e);return this.bitwiseTo(i,n,i),i}function Ee(e){return this.changeBit(e,se)}function Se(e){return this.changeBit(e,ce)}function Te(e){return this.changeBit(e,le)}function we(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this.data[n]+e.data[n],t.data[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this.data[n],t.data[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e.data[n],t.data[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t.data[n++]=i:i<-1&&(t.data[n++]=this.DV+i),t.t=n,t.clamp()}function Ae(e){var t=n();return this.addTo(e,t),t}function ke(e){var t=n();return this.subTo(e,t),t}function Ie(e){var t=n();return this.multiplyTo(e,t),t}function Be(e){var t=n();return this.divRemTo(e,t,null),t}function _e(e){var t=n();return this.divRemTo(e,null,t),t}function Ne(e){var t=n(),i=n();return this.divRemTo(e,t,i),new Array(t,i)}function Re(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function xe(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function De(){}function Le(e){return e}function Oe(e,t,n){e.multiplyTo(t,n)}function Pe(e,t){e.squareTo(t)}function Fe(e){return this.exp(e,new De)}function Ue(e,t,n){var i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n.data[--i]=0;var r;for(r=n.t-this.t;i<r;++i)n.data[i+this.t]=this.am(0,e.data[i],n,i,0,this.t);for(r=Math.min(e.t,t);i<r;++i)this.am(0,e.data[i],n,i,0,t-i);n.clamp()}function $e(e,t,n){--t;var i=n.t=this.t+e.t-t;for(n.s=0;--i>=0;)n.data[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)n.data[this.t+i-t]=this.am(t-i,e.data[i],n,0,0,this.t+i-t);n.clamp(),n.drShiftTo(1,n)}function ze(e){this.r2=n(),this.q3=n(),t.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function Ve(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=n();return e.copyTo(t),this.reduce(t),t}function Me(e){return e}function je(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function qe(e,t){e.squareTo(t),this.reduce(t)}function He(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function Ke(e,t){var i,r,a=e.bitLength(),s=c(1);if(a<=0)return s;i=a<18?1:a<48?3:a<144?4:a<768?5:6,r=a<8?new B(t):t.isEven()?new ze(t):new O(t);var o=new Array,l=3,u=i-1,f=(1<<i)-1;if(o[1]=r.convert(this),i>1){var d=n();for(r.sqrTo(o[1],d);l<=f;)o[l]=n(),r.mulTo(d,o[l-2],o[l]),l+=2}var p,h,g=e.t-1,y=!0,v=n();for(a=m(e.data[g])-1;g>=0;){for(a>=u?p=e.data[g]>>a-u&f:(p=(e.data[g]&(1<<a+1)-1)<<u-a,g>0&&(p|=e.data[g-1]>>this.DB+a-u)),l=i;0==(1&p);)p>>=1,--l;if((a-=l)<0&&(a+=this.DB,--g),y)o[p].copyTo(s),y=!1;else{for(;l>1;)r.sqrTo(s,v),r.sqrTo(v,s),l-=2;l>0?r.sqrTo(s,v):(h=s,s=v,v=h),r.mulTo(v,o[p],s)}for(;g>=0&&0==(e.data[g]&1<<a);)r.sqrTo(s,v),h=s,s=v,v=h,--a<0&&(a=this.DB-1,--g)}return r.revert(s)}function Qe(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var i=t;t=n,n=i}var r=t.getLowestSetBit(),a=n.getLowestSetBit();if(a<0)return t;for(r<a&&(a=r),a>0&&(t.rShiftTo(a,t),n.rShiftTo(a,n));t.signum()>0;)(r=t.getLowestSetBit())>0&&t.rShiftTo(r,t),(r=n.getLowestSetBit())>0&&n.rShiftTo(r,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return a>0&&n.lShiftTo(a,n),n}function Ge(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this.data[0]%e;else for(var i=this.t-1;i>=0;--i)n=(t*n+this.data[i])%e;return n}function We(e){var n=e.isEven();if(this.isEven()&&n||0==e.signum())return t.ZERO;for(var i=e.clone(),r=this.clone(),a=c(1),s=c(0),o=c(0),l=c(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),n?(a.isEven()&&s.isEven()||(a.addTo(this,a),s.subTo(e,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),n?(o.isEven()&&l.isEven()||(o.addTo(this,o),l.subTo(e,l)),o.rShiftTo(1,o)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);i.compareTo(r)>=0?(i.subTo(r,i),n&&a.subTo(o,a),s.subTo(l,s)):(r.subTo(i,r),n&&o.subTo(a,o),l.subTo(s,l))}return 0!=r.compareTo(t.ONE)?t.ZERO:l.compareTo(e)>=0?l.subtract(e):l.signum()<0?(l.addTo(e,l),l.signum()<0?l.add(e):l):l}function Xe(e){var t,n=this.abs();if(1==n.t&&n.data[0]<=ot[ot.length-1]){for(t=0;t<ot.length;++t)if(n.data[0]==ot[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<ot.length;){for(var i=ot[t],r=t+1;r<ot.length&&i<lt;)i*=ot[r++];for(i=n.modInt(i);t<r;)if(i%ot[t++]==0)return!1}return n.millerRabin(e)}function Ye(e){var n=this.subtract(t.ONE),i=n.getLowestSetBit();if(i<=0)return!1;for(var r,a=n.shiftRight(i),s=Ze(),o=0;o<e;++o){do r=new t(this.bitLength(),s);while(r.compareTo(t.ONE)<=0||r.compareTo(n)>=0);var l=r.modPow(a,this);if(0!=l.compareTo(t.ONE)&&0!=l.compareTo(n)){for(var u=1;u++<i&&0!=l.compareTo(n);)if(l=l.modPowInt(2,this),0==l.compareTo(t.ONE))return!1;if(0!=l.compareTo(n))return!1}}return!0}function Ze(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}}}var Je,et=0xdeadbeefcafe,tt=15715070==(16777215&et);"undefined"==typeof navigator?(t.prototype.am=a,Je=28):tt&&"Microsoft Internet Explorer"==navigator.appName?(t.prototype.am=r,Je=30):tt&&"Netscape"!=navigator.appName?(t.prototype.am=i,Je=26):(t.prototype.am=a,Je=28),t.prototype.DB=Je,t.prototype.DM=(1<<Je)-1,t.prototype.DV=1<<Je;var nt=52;t.prototype.FV=Math.pow(2,nt),t.prototype.F1=nt-Je,t.prototype.F2=2*Je-nt;var it,rt,at="0123456789abcdefghijklmnopqrstuvwxyz",st=new Array;for(it="0".charCodeAt(0),rt=0;rt<=9;++rt)st[it++]=rt;for(it="a".charCodeAt(0),rt=10;rt<36;++rt)st[it++]=rt;for(it="A".charCodeAt(0),rt=10;rt<36;++rt)st[it++]=rt;B.prototype.convert=_,B.prototype.revert=N,B.prototype.reduce=R,B.prototype.mulTo=x,B.prototype.sqrTo=D,O.prototype.convert=P,O.prototype.revert=F,O.prototype.reduce=U,O.prototype.mulTo=z,O.prototype.sqrTo=$,t.prototype.copyTo=l,t.prototype.fromInt=u,t.prototype.fromString=f,t.prototype.clamp=d,t.prototype.dlShiftTo=C,t.prototype.drShiftTo=b,t.prototype.lShiftTo=E,t.prototype.rShiftTo=S,t.prototype.subTo=T,t.prototype.multiplyTo=w,t.prototype.squareTo=A,t.prototype.divRemTo=k,t.prototype.invDigit=L,t.prototype.isEven=V,t.prototype.exp=M,t.prototype.toString=p,t.prototype.negate=h,t.prototype.abs=g,t.prototype.compareTo=y,t.prototype.bitLength=v,t.prototype.mod=I,t.prototype.modPowInt=j,t.ZERO=c(0),t.ONE=c(1),De.prototype.convert=Le,De.prototype.revert=Le,De.prototype.mulTo=Oe,De.prototype.sqrTo=Pe,ze.prototype.convert=Ve,ze.prototype.revert=Me,ze.prototype.reduce=je,ze.prototype.mulTo=He,ze.prototype.sqrTo=qe;var ot=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lt=(1<<26)/ot[ot.length-1];t.prototype.chunkSize=G,t.prototype.toRadix=X,t.prototype.fromRadix=Y,t.prototype.fromNumber=Z,t.prototype.bitwiseTo=ie,t.prototype.changeBit=be,t.prototype.addTo=we,t.prototype.dMultiply=Re,t.prototype.dAddOffset=xe,t.prototype.multiplyLowerTo=Ue,t.prototype.multiplyUpperTo=$e,t.prototype.modInt=Ge,t.prototype.millerRabin=Ye,t.prototype.clone=q,t.prototype.intValue=H,t.prototype.byteValue=K,t.prototype.shortValue=Q,t.prototype.signum=W,t.prototype.toByteArray=J,t.prototype.equals=ee,t.prototype.min=te,t.prototype.max=ne,t.prototype.and=ae,t.prototype.or=oe,t.prototype.xor=ue,t.prototype.andNot=fe,t.prototype.not=de,t.prototype.shiftLeft=pe,t.prototype.shiftRight=he,t.prototype.getLowestSetBit=ye,t.prototype.bitCount=ve,t.prototype.testBit=Ce,t.prototype.setBit=Ee,t.prototype.clearBit=Se,t.prototype.flipBit=Te,t.prototype.add=Ae,t.prototype.subtract=ke,t.prototype.multiply=Ie,t.prototype.divide=Be,t.prototype.remainder=_e,t.prototype.divideAndRemainder=Ne,t.prototype.modPow=Ke,t.prototype.modInverse=We,t.prototype.pow=Fe,t.prototype.gcd=Qe,t.prototype.isProbablePrime=Xe,e.jsbn=e.jsbn||{},e.jsbn.BigInteger=t}var i="jsbn";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/jsbn",["require","module"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,n,i){i||(i=e.md.sha1.create());for(var r="",a=Math.ceil(n/i.digestLength),s=0;s<a;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);i.start(),i.update(t+o),r+=i.digest().getBytes()}return r.substring(0,n)}var n=e.pkcs1=e.pkcs1||{};n.encode_rsa_oaep=function(n,i,r){var a,s,o,l;"string"==typeof r?(a=r,s=arguments[3]||void 0,o=arguments[4]||void 0):r&&(a=r.label||void 0,s=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(l=r.mgf1.md)),o?o.start():o=e.md.sha1.create(),l||(l=o);var u=Math.ceil(n.n.bitLength()/8),c=u-2*o.digestLength-2;if(i.length>c){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=i.length,f.maxLength=c,f}a||(a=""),o.update(a,"raw");for(var d=o.digest(),p="",h=c-i.length,g=0;g<h;g++)p+="\0";var y=d.getBytes()+p+""+i;if(s){if(s.length!==o.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=s.length,f.digestLength=o.digestLength,f}}else s=e.random.getBytes(o.digestLength);var m=t(s,u-o.digestLength-1,l),v=e.util.xorBytes(y,m,y.length),C=t(v,o.digestLength,l),b=e.util.xorBytes(s,C,s.length);return"\0"+b+v},n.decode_rsa_oaep=function(n,i,r){var a,s,o;"string"==typeof r?(a=r,s=arguments[3]||void 0):r&&(a=r.label||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var l=Math.ceil(n.n.bitLength()/8);if(i.length!==l){var u=new Error("RSAES-OAEP encoded message length is invalid.");throw u.length=i.length,u.expectedLength=l,u}if(void 0===s?s=e.md.sha1.create():s.start(),o||(o=s),l<2*s.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");a||(a=""),s.update(a,"raw");for(var c=s.digest().getBytes(),f=i.charAt(0),d=i.substring(1,s.digestLength+1),p=i.substring(1+s.digestLength),h=t(p,s.digestLength,o),g=e.util.xorBytes(d,h,d.length),y=t(g,l-s.digestLength-1,o),m=e.util.xorBytes(p,y,p.length),v=m.substring(0,s.digestLength),u="\0"!==f,C=0;C<s.digestLength;++C)u|=c.charAt(C)!==v.charAt(C);for(var b=1,E=s.digestLength,S=s.digestLength;S<m.length;S++){var T=m.charCodeAt(S),w=1&T^1,A=b?65534:0;u|=T&A,b&=w,E+=b}if(u||1!==m.charCodeAt(E))throw new Error("Invalid RSAES-OAEP padding.");return m.substring(E+1)}}var i="pkcs1";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pkcs1",["require","module","./util","./random","./sha1"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,r,a){return"workers"in r?i(e,t,r,a):n(e,t,r,a)}function n(t,i,s,o){var u=r(t,i),c=0,f=a(u.bitLength());"millerRabinTests"in s&&(f=s.millerRabinTests);var d=10;"maxBlockTime"in s&&(d=s.maxBlockTime);var p=+new Date;do{if(u.bitLength()>t&&(u=r(t,i)),u.isProbablePrime(f))return o(null,u);u.dAddOffset(l[c++%8],0)}while(d<0||+new Date-p<d);e.util.setImmediate(function(){n(t,i,s,o)})}function i(t,i,a,s){function l(){function e(e){if(!h){--l;var a=e.data;if(a.found){for(var c=0;c<n.length;++c)n[c].terminate();return h=!0,s(null,new o(a.prime,16))}u.bitLength()>t&&(u=r(t,i));var p=u.toString(16);e.target.postMessage({hex:p,workLoad:f}),u.dAddOffset(d,0)}}c=Math.max(1,c);for(var n=[],a=0;a<c;++a)n[a]=new Worker(p);for(var l=c,a=0;a<c;++a)n[a].addEventListener("message",e);var h=!1}if("undefined"==typeof Worker)return n(t,i,a,s);var u=r(t,i),c=a.workers,f=a.workLoad||100,d=30*f/8,p=a.workerScript||"forge/prime.worker.js";return c===-1?e.util.estimateCores(function(e,t){e&&(t=2),c=t-1,l()}):void l()}function r(e,t){var n=new o(e,t),i=e-1;return n.testBit(i)||n.bitwiseTo(o.ONE.shiftLeft(i),c,n),n.dAddOffset(31-n.mod(u).byteValue(),0),n}function a(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}if(!e.prime){var s=e.prime=e.prime||{},o=e.jsbn.BigInteger,l=[6,4,2,4,2,4,6,2],u=new o(null);u.fromInt(30);var c=function(e,t){return e|t};s.generateProbablePrime=function(n,i,r){"function"==typeof i&&(r=i,i={}),i=i||{};var a=i.algorithm||"PRIMEINC";"string"==typeof a&&(a={name:a}),a.options=a.options||{};var s=i.prng||e.random,o={nextBytes:function(e){for(var t=s.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}};if("PRIMEINC"===a.name)return t(n,o,a.options,r);throw new Error("Invalid prime generation algorithm: "+a.name)}}}var i="prime";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/prime",["require","module","./util","./jsbn","./random"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,n,i){var r=e.util.createBuffer(),a=Math.ceil(n.n.bitLength()/8);if(t.length>a-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=a-11,s}r.putByte(0),r.putByte(i);var o,l=a-3-t.length;if(0===i||1===i){o=0===i?0:255;for(var u=0;u<l;++u)r.putByte(o)}else for(;l>0;){for(var c=0,f=e.random.getBytes(l),u=0;u<l;++u)o=f.charCodeAt(u),0===o?++c:r.putByte(o);l=c}return r.putByte(0),r.putBytes(t),r}function n(t,n,i,r){var a=Math.ceil(n.n.bitLength()/8),s=e.util.createBuffer(t),o=s.getByte(),l=s.getByte();if(0!==o||i&&0!==l&&1!==l||!i&&2!=l||i&&0===l&&"undefined"==typeof r)throw new Error("Encryption block is invalid.");var u=0;if(0===l){u=a-3-r;for(var c=0;c<u;++c)if(0!==s.getByte())throw new Error("Encryption block is invalid.")}else if(1===l)for(u=0;s.length()>1;){if(255!==s.getByte()){--s.read;break}++u}else if(2===l)for(u=0;s.length()>1;){if(0===s.getByte()){--s.read;break}++u}var f=s.getByte();if(0!==f||u!==a-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function i(t,n,i){function r(){a(t.pBits,function(e,n){return e?i(e):(t.p=n,null!==t.q?s(e,t.q):void a(t.qBits,s))})}function a(t,n){e.prime.generateProbablePrime(t,o,n)}function s(e,n){if(e)return i(e);if(t.q=n,t.p.compareTo(t.q)<0){var o=t.p;t.p=t.q,t.q=o}if(0!==t.p.subtract(u.ONE).gcd(t.e).compareTo(u.ONE))return t.p=null,void r();if(0!==t.q.subtract(u.ONE).gcd(t.e).compareTo(u.ONE))return t.q=null,void a(t.qBits,s);if(t.p1=t.p.subtract(u.ONE),t.q1=t.q.subtract(u.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(u.ONE))return t.p=t.q=null,void r();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void a(t.qBits,s);var l=t.e.modInverse(t.phi);t.keys={privateKey:f.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:f.rsa.setPublicKey(t.n,t.e)},i(null,t.keys)}"function"==typeof n&&(i=n,n={}),n=n||{};var o={algorithm:{name:n.algorithm||"PRIMEINC",options:{workers:n.workers||2,workLoad:n.workLoad||100,workerScript:n.workerScript}}};"prng"in n&&(o.prng=n.prng),r()}function r(t){var n=t.toString(16);n[0]>="8"&&(n="00"+n);var i=e.util.hexToBytes(n);return i.length>1&&(0===i.charCodeAt(0)&&0===(128&i.charCodeAt(1))||255===i.charCodeAt(0)&&128===(128&i.charCodeAt(1)))?i.substr(1):i}function a(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function s(e){return"undefined"!=typeof window&&"object"==typeof window.crypto&&"object"==typeof window.crypto.subtle&&"function"==typeof window.crypto.subtle[e]}function o(e){return"undefined"!=typeof window&&"object"==typeof window.msCrypto&&"object"==typeof window.msCrypto.subtle&&"function"==typeof window.msCrypto.subtle[e]}function l(t){for(var n=e.util.hexToBytes(t.toString(16)),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}if("undefined"==typeof u)var u=e.jsbn.BigInteger;var c=e.asn1;e.pki=e.pki||{},e.pki.rsa=e.rsa=e.rsa||{};var f=e.pki,d=[6,4,2,4,2,4,6,2],p={name:"PrivateKeyInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},h={name:"RSAPrivateKey",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},g={name:"RSAPublicKey",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},y=e.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:c.Class.UNIVERSAL,
type:c.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},m=function(e){var t;if(!(e.algorithm in f.oids)){var n=new Error("Unknown message digest algorithm.");throw n.algorithm=e.algorithm,n}t=f.oids[e.algorithm];var i=c.oidToDer(t).getBytes(),r=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[]),a=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[]);a.value.push(c.create(c.Class.UNIVERSAL,c.Type.OID,!1,i)),a.value.push(c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,""));var s=c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,e.digest().getBytes());return r.value.push(a),r.value.push(s),c.toDer(r).getBytes()},v=function(t,n,i){if(i)return t.modPow(n.e,n.n);if(!n.p||!n.q)return t.modPow(n.d,n.n);n.dP||(n.dP=n.d.mod(n.p.subtract(u.ONE))),n.dQ||(n.dQ=n.d.mod(n.q.subtract(u.ONE))),n.qInv||(n.qInv=n.q.modInverse(n.p));var r;do r=new u(e.util.bytesToHex(e.random.getBytes(n.n.bitLength()/8)),16);while(r.compareTo(n.n)>=0||!r.gcd(n.n).equals(u.ONE));t=t.multiply(r.modPow(n.e,n.n)).mod(n.n);for(var a=t.mod(n.p).modPow(n.dP,n.p),s=t.mod(n.q).modPow(n.dQ,n.q);a.compareTo(s)<0;)a=a.add(n.p);var o=a.subtract(s).multiply(n.qInv).mod(n.p).multiply(n.q).add(s);return o=o.multiply(r.modInverse(n.n)).mod(n.n)};f.rsa.encrypt=function(n,i,r){var a,s=r,o=Math.ceil(i.n.bitLength()/8);r!==!1&&r!==!0?(s=2===r,a=t(n,i,r)):(a=e.util.createBuffer(),a.putBytes(n));for(var l=new u(a.toHex(),16),c=v(l,i,s),f=c.toString(16),d=e.util.createBuffer(),p=o-Math.ceil(f.length/2);p>0;)d.putByte(0),--p;return d.putBytes(e.util.hexToBytes(f)),d.getBytes()},f.rsa.decrypt=function(t,i,r,a){var s=Math.ceil(i.n.bitLength()/8);if(t.length!==s){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=s,o}var l=new u(e.util.createBuffer(t).toHex(),16);if(l.compareTo(i.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=v(l,i,r),f=c.toString(16),d=e.util.createBuffer(),p=s-Math.ceil(f.length/2);p>0;)d.putByte(0),--p;return d.putBytes(e.util.hexToBytes(f)),a!==!1?n(d.getBytes(),i,r):d.getBytes()},f.rsa.createKeyPairGenerationState=function(t,n,i){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048,i=i||{};var r,a=i.prng||e.random,s={nextBytes:function(e){for(var t=a.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}},o=i.algorithm||"PRIMEINC";if("PRIMEINC"!==o)throw new Error("Invalid key generation algorithm: "+o);return r={algorithm:o,state:0,bits:t,rng:s,eInt:n||65537,e:new u(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},r.e.fromInt(r.eInt),r},f.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var n=new u(null);n.fromInt(30);for(var i,r=0,s=function(e,t){return e|t},o=+new Date,l=0;null===e.keys&&(t<=0||l<t);){if(0===e.state){var c=null===e.p?e.pBits:e.qBits,p=c-1;0===e.pqState?(e.num=new u(c,e.rng),e.num.testBit(p)||e.num.bitwiseTo(u.ONE.shiftLeft(p),s,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),r=0,++e.pqState):1===e.pqState?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(a(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(d[r++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(u.ONE).gcd(e.e).compareTo(u.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(u.ONE),e.q1=e.q.subtract(u.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(u.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var h=e.e.modInverse(e.phi);e.keys={privateKey:f.rsa.setPrivateKey(e.n,e.e,h,e.p,e.q,h.mod(e.p1),h.mod(e.q1),e.q.modInverse(e.p)),publicKey:f.rsa.setPublicKey(e.n,e.e)}}i=+new Date,l+=i-o,o=i}return null!==e.keys},f.rsa.generateKeyPair=function(t,n,r,a){if(1===arguments.length?"object"==typeof t?(r=t,t=void 0):"function"==typeof t&&(a=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof n?(a=n,n=void 0):"number"!=typeof n&&(r=n,n=void 0):(r=t,a=n,t=void 0,n=void 0):3===arguments.length&&("number"==typeof n?"function"==typeof r&&(a=r,r=void 0):(a=r,r=n,n=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===n&&(n=r.e||65537),!e.disableNativeCode&&a&&t>=256&&t<=16384&&(65537===n||3===n)){if(s("generateKey")&&s("exportKey"))return window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:l(n),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(e){return window.crypto.subtle.exportKey("pkcs8",e.privateKey)})["catch"](function(e){a(e)}).then(function(t){if(t){var n=f.privateKeyFromAsn1(c.fromDer(e.util.createBuffer(t)));a(null,{privateKey:n,publicKey:f.setRsaPublicKey(n.n,n.e)})}});if(o("generateKey")&&o("exportKey")){var u=window.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:l(n),hash:{name:"SHA-256"}},!0,["sign","verify"]);return u.oncomplete=function(t){var n=t.target.result,i=window.msCrypto.subtle.exportKey("pkcs8",n.privateKey);i.oncomplete=function(t){var n=t.target.result,i=f.privateKeyFromAsn1(c.fromDer(e.util.createBuffer(n)));a(null,{privateKey:i,publicKey:f.setRsaPublicKey(i.n,i.e)})},i.onerror=function(e){a(e)}},void(u.onerror=function(e){a(e)})}}var d=f.rsa.createKeyPairGenerationState(t,n,r);return a?void i(d,r,a):(f.rsa.stepKeyPairGenerationState(d,0),d.keys)},f.setRsaPublicKey=f.rsa.setPublicKey=function(i,r){var a={n:i,e:r};return a.encrypt=function(n,i,r){if("string"==typeof i?i=i.toUpperCase():void 0===i&&(i="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===i)i={encode:function(e,n,i){return t(e,n,2).getBytes()}};else if("RSA-OAEP"===i||"RSAES-OAEP"===i)i={encode:function(t,n){return e.pkcs1.encode_rsa_oaep(n,t,r)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(e){return e}};else if("string"==typeof i)throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,a,!0);return f.rsa.encrypt(s,a,!0)},a.verify=function(e,t,i){"string"==typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===i?i={verify:function(e,t){t=n(t,a,!0);var i=c.fromDer(t);return e===i.value[1].value}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(e,t){return t=n(t,a,!0),e===t}});var r=f.rsa.decrypt(t,a,!0,!1);return i.verify(e,r,a.n.bitLength())},a},f.setRsaPrivateKey=f.rsa.setPrivateKey=function(t,i,r,a,s,o,l,u){var c={n:t,e:i,d:r,p:a,q:s,dP:o,dQ:l,qInv:u};return c.decrypt=function(t,i,r){"string"==typeof i?i=i.toUpperCase():void 0===i&&(i="RSAES-PKCS1-V1_5");var a=f.rsa.decrypt(t,c,!1,!1);if("RSAES-PKCS1-V1_5"===i)i={decode:n};else if("RSA-OAEP"===i||"RSAES-OAEP"===i)i={decode:function(t,n){return e.pkcs1.decode_rsa_oaep(n,t,r)}};else{if(["RAW","NONE","NULL",null].indexOf(i)===-1)throw new Error('Unsupported encryption scheme: "'+i+'".');i={decode:function(e){return e}}}return i.decode(a,c,!1)},c.sign=function(e,t){var n=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:m},n=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},n=1);var i=t.encode(e,c.n.bitLength());return f.rsa.encrypt(i,c,n)},c},f.wrapRsaPrivateKey=function(e){return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,c.integerToDer(0).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(f.oids.rsaEncryption).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")]),c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,c.toDer(e).getBytes())])},f.privateKeyFromAsn1=function(t){var n={},i=[];if(c.validate(t,p,n,i)&&(t=c.fromDer(e.util.createBuffer(n.privateKey))),n={},i=[],!c.validate(t,h,n,i)){var r=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw r.errors=i,r}var a,s,o,l,d,g,y,m;return a=e.util.createBuffer(n.privateKeyModulus).toHex(),s=e.util.createBuffer(n.privateKeyPublicExponent).toHex(),o=e.util.createBuffer(n.privateKeyPrivateExponent).toHex(),l=e.util.createBuffer(n.privateKeyPrime1).toHex(),d=e.util.createBuffer(n.privateKeyPrime2).toHex(),g=e.util.createBuffer(n.privateKeyExponent1).toHex(),y=e.util.createBuffer(n.privateKeyExponent2).toHex(),m=e.util.createBuffer(n.privateKeyCoefficient).toHex(),f.setRsaPrivateKey(new u(a,16),new u(s,16),new u(o,16),new u(l,16),new u(d,16),new u(g,16),new u(y,16),new u(m,16))},f.privateKeyToAsn1=f.privateKeyToRSAPrivateKey=function(e){return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,c.integerToDer(0).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,r(e.n)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,r(e.e)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,r(e.d)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,r(e.p)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,r(e.q)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,r(e.dP)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,r(e.dQ)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,r(e.qInv))])},f.publicKeyFromAsn1=function(t){var n={},i=[];if(c.validate(t,y,n,i)){var r=c.derToOid(n.publicKeyOid);if(r!==f.oids.rsaEncryption){var a=new Error("Cannot read public key. Unknown OID.");throw a.oid=r,a}t=n.rsaPublicKey}if(i=[],!c.validate(t,g,n,i)){var a=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw a.errors=i,a}var s=e.util.createBuffer(n.publicKeyModulus).toHex(),o=e.util.createBuffer(n.publicKeyExponent).toHex();return f.setRsaPublicKey(new u(s,16),new u(o,16))},f.publicKeyToAsn1=f.publicKeyToSubjectPublicKeyInfo=function(e){return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(f.oids.rsaEncryption).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")]),c.create(c.Class.UNIVERSAL,c.Type.BITSTRING,!1,[f.publicKeyToRSAPublicKey(e)])])},f.publicKeyToRSAPublicKey=function(e){return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,r(e.n)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,r(e.e))])}}var i="rsa";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/rsa",["require","module","./asn1","./jsbn","./oids","./pkcs1","./prime","./random","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t){return e.start().update(t).digest().getBytes()}function n(e){var t;if(e){if(t=o.oids[s.derToOid(e)],!t){var n=new Error("Unsupported PRF OID.");throw n.oid=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}}else t="hmacWithSHA1";return i(t)}function i(t){var n=e.md;switch(t){case"hmacWithSHA224":n=e.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var i=new Error("Unsupported PRF algorithm.");throw i.algorithm=t,i.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],i}return n[t].create()}function r(t,n,i,r){var a=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,t),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n.getBytes())]);return"hmacWithSHA1"!==r&&a.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,e.util.hexToBytes(i.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.oids[r]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])),a}if("undefined"==typeof a)var a=e.jsbn.BigInteger;var s=e.asn1,o=e.pki=e.pki||{};o.pbe=e.pbe=e.pbe||{};var l=o.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},f={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};o.encryptPrivateKeyInfo=function(t,n,a){a=a||{},a.saltSize=a.saltSize||8,a.count=a.count||2048,a.algorithm=a.algorithm||"aes128",a.prfAlgorithm=a.prfAlgorithm||"sha1";var u,c,f,d=e.random.getBytesSync(a.saltSize),p=a.count,h=s.integerToDer(p);if(0===a.algorithm.indexOf("aes")||"des"===a.algorithm){var g,y,m;switch(a.algorithm){case"aes128":u=16,g=16,y=l["aes128-CBC"],m=e.aes.createEncryptionCipher;break;case"aes192":u=24,g=16,y=l["aes192-CBC"],m=e.aes.createEncryptionCipher;break;case"aes256":u=32,g=16,y=l["aes256-CBC"],m=e.aes.createEncryptionCipher;break;case"des":u=8,g=8,y=l.desCBC,m=e.des.createEncryptionCipher;break;default:var v=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw v.algorithm=a.algorithm,v}var C="hmacWith"+a.prfAlgorithm.toUpperCase(),b=i(C),E=e.pkcs5.pbkdf2(n,d,p,u,b),S=e.random.getBytesSync(g),T=m(E);T.start(S),T.update(s.toDer(t)),T.finish(),f=T.output.getBytes();var w=r(d,h,u,C);c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(l.pkcs5PBES2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(l.pkcs5PBKDF2).getBytes()),w]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(y).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,S)])])])}else{if("3des"!==a.algorithm){var v=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw v.algorithm=a.algorithm,v}u=24;var A=new e.util.ByteBuffer(d),E=o.pbe.generatePkcs12Key(n,A,1,p,u),S=o.pbe.generatePkcs12Key(n,A,2,p,u),T=e.des.createEncryptionCipher(E);T.start(S),T.update(s.toDer(t)),T.finish(),f=T.output.getBytes(),c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(l["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,d),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,h.getBytes())])])}var k=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[c,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,f)]);return k},o.decryptPrivateKeyInfo=function(t,n){var i=null,r={},a=[];if(!s.validate(t,u,r,a)){var l=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=a,l}var c=s.derToOid(r.encryptionOid),f=o.pbe.getCipher(c,r.encryptionParams,n),d=e.util.createBuffer(r.encryptedData);return f.update(d),f.finish()&&(i=s.fromDer(f.output)),i},o.encryptedPrivateKeyToPem=function(t,n){var i={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(t).getBytes()};return e.pem.encode(i,{maxline:n})},o.encryptedPrivateKeyFromPem=function(t){var n=e.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==n.type){var i=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(n.body)},o.encryptRsaPrivateKey=function(t,n,i){if(i=i||{},!i.legacy){var r=o.wrapRsaPrivateKey(o.privateKeyToAsn1(t));return r=o.encryptPrivateKeyInfo(r,n,i),o.encryptedPrivateKeyToPem(r)}var a,l,u,c;switch(i.algorithm){case"aes128":a="AES-128-CBC",u=16,l=e.random.getBytesSync(16),c=e.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",u=24,l=e.random.getBytesSync(16),c=e.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",u=32,l=e.random.getBytesSync(16),c=e.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",u=24,l=e.random.getBytesSync(8),c=e.des.createEncryptionCipher;break;case"des":a="DES-CBC",u=8,l=e.random.getBytesSync(8),c=e.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+i.algorithm+'".');throw f.algorithm=i.algorithm,f}var d=e.pbe.opensslDeriveBytes(n,l.substr(0,8),u),p=c(d);p.start(l),p.update(s.toDer(o.privateKeyToAsn1(t))),p.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:e.util.bytesToHex(l).toUpperCase()},body:p.output.getBytes()};return e.pem.encode(h)},o.decryptRsaPrivateKey=function(t,n){var i=null,r=e.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==r.type&&"PRIVATE KEY"!==r.type&&"RSA PRIVATE KEY"!==r.type){var a=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw a.headerType=a,a}if(r.procType&&"ENCRYPTED"===r.procType.type){var l,u;switch(r.dekInfo.algorithm){case"DES-CBC":l=8,u=e.des.createDecryptionCipher;break;case"DES-EDE3-CBC":l=24,u=e.des.createDecryptionCipher;break;case"AES-128-CBC":l=16,u=e.aes.createDecryptionCipher;break;case"AES-192-CBC":l=24,u=e.aes.createDecryptionCipher;break;case"AES-256-CBC":l=32,u=e.aes.createDecryptionCipher;break;case"RC2-40-CBC":l=5,u=function(t){return e.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":l=8,u=function(t){return e.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":l=16,u=function(t){return e.rc2.createDecryptionCipher(t,128)};break;default:var a=new Error('Could not decrypt private key; unsupported encryption algorithm "'+r.dekInfo.algorithm+'".');throw a.algorithm=r.dekInfo.algorithm,a}var c=e.util.hexToBytes(r.dekInfo.parameters),f=e.pbe.opensslDeriveBytes(n,c.substr(0,8),l),d=u(f);if(d.start(c),d.update(e.util.createBuffer(r.body)),!d.finish())return i;i=d.output.getBytes()}else i=r.body;return i="ENCRYPTED PRIVATE KEY"===r.type?o.decryptPrivateKeyInfo(s.fromDer(i),n):s.fromDer(i),null!==i&&(i=o.privateKeyFromAsn1(i)),i},o.pbe.generatePkcs12Key=function(t,n,i,r,a,s){var o,l;"undefined"!=typeof s&&null!==s||(s=e.md.sha1.create());var u=s.digestLength,c=s.blockLength,f=new e.util.ByteBuffer,d=new e.util.ByteBuffer;if(null!==t&&void 0!==t){for(l=0;l<t.length;l++)d.putInt16(t.charCodeAt(l));d.putInt16(0)}var p=d.length(),h=n.length(),g=new e.util.ByteBuffer;g.fillWithByte(i,c);var y=c*Math.ceil(h/c),m=new e.util.ByteBuffer;for(l=0;l<y;l++)m.putByte(n.at(l%h));var v=c*Math.ceil(p/c),C=new e.util.ByteBuffer;for(l=0;l<v;l++)C.putByte(d.at(l%p));var b=m;b.putBuffer(C);for(var E=Math.ceil(a/u),S=1;S<=E;S++){var T=new e.util.ByteBuffer;T.putBytes(g.bytes()),T.putBytes(b.bytes());for(var w=0;w<r;w++)s.start(),s.update(T.getBytes()),T=s.digest();var A=new e.util.ByteBuffer;for(l=0;l<c;l++)A.putByte(T.at(l%u));var k=Math.ceil(h/c)+Math.ceil(p/c),I=new e.util.ByteBuffer;for(o=0;o<k;o++){var B=new e.util.ByteBuffer(b.getBytes(c)),_=511;for(l=A.length()-1;l>=0;l--)_>>=8,_+=A.at(l)+B.at(l),B.setAt(l,255&_);I.putBuffer(B)}b=I,f.putBuffer(T)}return f.truncate(f.length()-a),f},o.pbe.getCipher=function(e,t,n){switch(e){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(e,t,n);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(e,t,n);default:var i=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw i.oid=e,i.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],i}},o.pbe.getCipherForPBES2=function(t,i,r){var a={},l=[];if(!s.validate(i,c,a,l)){var u=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=l,u}if(t=s.derToOid(a.kdfOid),t!==o.oids.pkcs5PBKDF2){var u=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw u.oid=t,u.supportedOids=["pkcs5PBKDF2"],u}if(t=s.derToOid(a.encOid),t!==o.oids["aes128-CBC"]&&t!==o.oids["aes192-CBC"]&&t!==o.oids["aes256-CBC"]&&t!==o.oids["des-EDE3-CBC"]&&t!==o.oids.desCBC){var u=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw u.oid=t,u.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],u}var f=a.kdfSalt,d=e.util.createBuffer(a.kdfIterationCount);d=d.getInt(d.length()<<3);var p,h;switch(o.oids[t]){case"aes128-CBC":p=16,h=e.aes.createDecryptionCipher;break;case"aes192-CBC":p=24,h=e.aes.createDecryptionCipher;break;case"aes256-CBC":p=32,h=e.aes.createDecryptionCipher;break;case"des-EDE3-CBC":p=24,h=e.des.createDecryptionCipher;break;case"desCBC":p=8,h=e.des.createDecryptionCipher}var g=n(a.prfOid),y=e.pkcs5.pbkdf2(r,f,d,p,g),m=a.encIv,v=h(y);return v.start(m),v},o.pbe.getCipherForPKCS12PBE=function(t,i,r){var a={},l=[];if(!s.validate(i,f,a,l)){var u=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=l,u}var c=e.util.createBuffer(a.salt),d=e.util.createBuffer(a.iterations);d=d.getInt(d.length()<<3);var p,h,g;switch(t){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:p=24,h=8,g=e.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:p=5,h=8,g=function(t,n){var i=e.rc2.createDecryptionCipher(t,40);return i.start(n,null),i};break;default:var u=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw u.oid=t,u}var y=n(a.prfOid),m=o.pbe.generatePkcs12Key(r,c,1,d,p,y);y.start();var v=o.pbe.generatePkcs12Key(r,c,2,d,h,y);return g(m,v)},o.pbe.opensslDeriveBytes=function(n,i,r,a){"undefined"!=typeof a&&null!==a||(a=e.md.md5.create()),null===i&&(i="");for(var s=[t(a,n+i)],o=16,l=1;o<r;++l,o+=16)s.push(t(a,s[l-1]+n+i));return s.join("").substr(0,r)}}var i="pbe";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pbe",["require","module","./aes","./asn1","./des","./md","./oids","./pem","./pbkdf2","./random","./rc2","./rsa","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1,n=e.pkcs7asn1=e.pkcs7asn1||{};e.pkcs7=e.pkcs7||{},e.pkcs7.asn1=n;var i={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};n.contentInfoValidator=i;var r={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};n.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(r)},n.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(r)};var a={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};n.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},i,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[a]}]},n.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}}var i="pkcs7asn1";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pkcs7asn1",["require","module","./asn1","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.mgf=e.mgf||{};var t=e.mgf.mgf1=e.mgf1=e.mgf1||{};t.create=function(t){var n={generate:function(n,i){for(var r=new e.util.ByteBuffer,a=Math.ceil(i/t.digestLength),s=0;s<a;s++){var o=new e.util.ByteBuffer;o.putInt32(s),t.start(),t.update(n+o.getBytes()),r.putBuffer(t.digest())}return r.truncate(r.length()-i),r.getBytes()}};return n}}var i="mgf1";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/mgf1",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.mgf=e.mgf||{},
e.mgf.mgf1=e.mgf1}var i="mgf";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/mgf",["require","module","./mgf1"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.pss=e.pss||{};t.create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var n=t.md,i=t.mgf,r=n.digestLength,a=t.salt||null;"string"==typeof a&&(a=e.util.createBuffer(a));var s;if("saltLength"in t)s=t.saltLength;else{if(null===a)throw new Error("Salt length not specified or specific salt not given.");s=a.length()}if(null!==a&&a.length()!==s)throw new Error("Given salt length does not match length of given salt.");var o=t.prng||e.random,l={};return l.encode=function(t,l){var u,c=l-1,f=Math.ceil(c/8),d=t.digest().getBytes();if(f<r+s+2)throw new Error("Message is too long to encrypt.");var p;p=null===a?o.getBytesSync(s):a.bytes();var h=new e.util.ByteBuffer;h.fillWithByte(0,8),h.putBytes(d),h.putBytes(p),n.start(),n.update(h.getBytes());var g=n.digest().getBytes(),y=new e.util.ByteBuffer;y.fillWithByte(0,f-s-r-2),y.putByte(1),y.putBytes(p);var m=y.getBytes(),v=f-r-1,C=i.generate(g,v),b="";for(u=0;u<v;u++)b+=String.fromCharCode(m.charCodeAt(u)^C.charCodeAt(u));var E=65280>>8*f-c&255;return b=String.fromCharCode(b.charCodeAt(0)&~E)+b.substr(1),b+g+String.fromCharCode(188)},l.verify=function(t,a,o){var l,u=o-1,c=Math.ceil(u/8);if(a=a.substr(-c),c<r+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==a.charCodeAt(c-1))throw new Error("Encoded message does not end in 0xBC.");var f=c-r-1,d=a.substr(0,f),p=a.substr(f,r),h=65280>>8*c-u&255;if(0!==(d.charCodeAt(0)&h))throw new Error("Bits beyond keysize not zero as expected.");var g=i.generate(p,f),y="";for(l=0;l<f;l++)y+=String.fromCharCode(d.charCodeAt(l)^g.charCodeAt(l));y=String.fromCharCode(y.charCodeAt(0)&~h)+y.substr(1);var m=c-r-s-2;for(l=0;l<m;l++)if(0!==y.charCodeAt(l))throw new Error("Leftmost octets not zero as expected");if(1!==y.charCodeAt(m))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var v=y.substr(-s),C=new e.util.ByteBuffer;C.fillWithByte(0,8),C.putBytes(t),C.putBytes(v),n.start(),n.update(C.getBytes());var b=n.digest().getBytes();return p===b},l}}var i="pss";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pss",["require","module","./random","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t){"string"==typeof t&&(t={shortName:t});for(var n,i=null,r=0;null===i&&r<e.attributes.length;++r)n=e.attributes[r],t.type&&t.type===n.type?i=n:t.name&&t.name===n.name?i=n:t.shortName&&t.shortName===n.shortName&&(i=n);return i}function n(t){for(var n,i,r=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),a=t.attributes,s=0;s<a.length;++s){n=a[s];var l=n.value,u=o.Type.PRINTABLESTRING;"valueTagClass"in n&&(u=n.valueTagClass,u===o.Type.UTF8&&(l=e.util.encodeUtf8(l))),i=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(n.type).getBytes()),o.create(o.Class.UNIVERSAL,u,!1,l)])]),r.value.push(i)}return r}function i(e){for(var t,n=0;n<e.length;++n){if(t=e[n],"undefined"==typeof t.name&&(t.type&&t.type in l.oids?t.name=l.oids[t.type]:t.shortName&&t.shortName in c&&(t.name=l.oids[c[t.shortName]])),"undefined"==typeof t.type){if(!(t.name&&t.name in l.oids)){var i=new Error("Attribute type not specified.");throw i.attribute=t,i}t.type=l.oids[t.name]}if("undefined"==typeof t.shortName&&t.name&&t.name in c&&(t.shortName=c[t.name]),t.type===u.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=o.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var a=0;a<t.extensions.length;++a)t.value.push(l.certificateExtensionToAsn1(r(t.extensions[a])))}if("undefined"==typeof t.value){var i=new Error("Attribute value not specified.");throw i.attribute=t,i}}}function r(t,i){if(i=i||{},"undefined"==typeof t.name&&t.id&&t.id in l.oids&&(t.name=l.oids[t.id]),"undefined"==typeof t.id){if(!(t.name&&t.name in l.oids)){var r=new Error("Extension ID not specified.");throw r.extension=t,r}t.id=l.oids[t.name]}if("undefined"!=typeof t.value)return t;if("keyUsage"===t.name){var a=0,s=0,c=0;t.digitalSignature&&(s|=128,a=7),t.nonRepudiation&&(s|=64,a=6),t.keyEncipherment&&(s|=32,a=5),t.dataEncipherment&&(s|=16,a=4),t.keyAgreement&&(s|=8,a=3),t.keyCertSign&&(s|=4,a=2),t.cRLSign&&(s|=2,a=1),t.encipherOnly&&(s|=1,a=0),t.decipherOnly&&(c|=128,a=7);var f=String.fromCharCode(a);0!==c?f+=String.fromCharCode(s)+String.fromCharCode(c):0!==s&&(f+=String.fromCharCode(s)),t.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,f)}else if("basicConstraints"===t.name)t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);var d=t.value.value;for(var p in t)t[p]===!0&&(p in u?d.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(u[p]).getBytes())):p.indexOf(".")!==-1&&d.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(p).getBytes())))}else if("nsCertType"===t.name){var a=0,s=0;t.client&&(s|=128,a=7),t.server&&(s|=64,a=6),t.email&&(s|=32,a=5),t.objsign&&(s|=16,a=4),t.reserved&&(s|=8,a=3),t.sslCA&&(s|=4,a=2),t.emailCA&&(s|=2,a=1),t.objCA&&(s|=1,a=0);var f=String.fromCharCode(a);0!==s&&(f+=String.fromCharCode(s)),t.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,f)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);for(var h,g=0;g<t.altNames.length;++g){h=t.altNames[g];var f=h.value;if(7===h.type&&h.ip){if(f=e.util.bytesFromIP(h.ip),null===f){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else 8===h.type&&(f=h.oid?o.oidToDer(o.oidToDer(h.oid)):o.oidToDer(f));t.value.value.push(o.create(o.Class.CONTEXT_SPECIFIC,h.type,!1,f))}}else if("subjectKeyIdentifier"===t.name&&i.cert){var y=i.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=y.toHex(),t.value=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,y.getBytes())}else if("authorityKeyIdentifier"===t.name&&i.cert){t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);var d=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?i.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;d.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var v=[o.create(o.Class.CONTEXT_SPECIFIC,4,!0,[n(t.authorityCertIssuer===!0?i.cert.issuer:t.authorityCertIssuer)])];d.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,v))}if(t.serialNumber){var C=e.util.hexToBytes(t.serialNumber===!0?i.cert.serialNumber:t.serialNumber);d.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!1,C))}}else if("cRLDistributionPoints"===t.name){t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);for(var h,d=t.value.value,b=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),E=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]),g=0;g<t.altNames.length;++g){h=t.altNames[g];var f=h.value;if(7===h.type&&h.ip){if(f=e.util.bytesFromIP(h.ip),null===f){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else 8===h.type&&(f=h.oid?o.oidToDer(o.oidToDer(h.oid)):o.oidToDer(f));E.value.push(o.create(o.Class.CONTEXT_SPECIFIC,h.type,!1,f))}b.value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[E])),d.push(b)}if("undefined"==typeof t.value){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function a(e,t){switch(e){case u["RSASSA-PSS"]:var n=[];return void 0!==t.hash.algorithmOid&&n.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&n.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.mgf.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.mgf.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&n.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.saltLength).getBytes())])),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,n);default:return o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")}}function s(t){var n=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return n;for(var i=t.attributes,r=0;r<i.length;++r){var a=i[r],s=a.value,l=o.Type.UTF8;"valueTagClass"in a&&(l=a.valueTagClass),l===o.Type.UTF8&&(s=e.util.encodeUtf8(s));var u=!1;"valueConstructed"in a&&(u=a.valueConstructed);var c=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.type).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,l,u,s)])]);n.value.push(c)}return n}var o=e.asn1,l=e.pki=e.pki||{},u=l.oids,c={};c.CN=u.commonName,c.commonName="CN",c.C=u.countryName,c.countryName="C",c.L=u.localityName,c.localityName="L",c.ST=u.stateOrProvinceName,c.stateOrProvinceName="ST",c.O=u.organizationName,c.organizationName="O",c.OU=u.organizationalUnitName,c.organizationalUnitName="OU",c.E=u.emailAddress,c.emailAddress="E";var f=e.pki.rsa.publicKeyValidator,d={name:"Certificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},f,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},p={name:"rsapss",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},h={name:"CertificationRequestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},f,{name:"CertificationRequestInfo.attributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0}]}]}]},g={name:"CertificationRequest",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[h,{name:"CertificationRequest.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,capture:"csrSignature"}]};l.RDNAttributesAsArray=function(e,t){for(var n,i,r,a=[],s=0;s<e.value.length;++s){n=e.value[s];for(var l=0;l<n.value.length;++l)r={},i=n.value[l],r.type=o.derToOid(i.value[0].value),r.value=i.value[1].value,r.valueTagClass=i.value[1].type,r.type in u&&(r.name=u[r.type],r.name in c&&(r.shortName=c[r.name])),t&&(t.update(r.type),t.update(r.value)),a.push(r)}return a},l.CRIAttributesAsArray=function(e){for(var t=[],n=0;n<e.length;++n)for(var i=e[n],r=o.derToOid(i.value[0].value),a=i.value[1].value,s=0;s<a.length;++s){var f={};if(f.type=r,f.value=a[s].value,f.valueTagClass=a[s].type,f.type in u&&(f.name=u[f.type],f.name in c&&(f.shortName=c[f.name])),f.type===u.extensionRequest){f.extensions=[];for(var d=0;d<f.value.length;++d)f.extensions.push(l.certificateExtensionFromAsn1(f.value[d]))}t.push(f)}return t};var y=function(e,t,n){var i={};if(e!==u["RSASSA-PSS"])return i;n&&(i={hash:{algorithmOid:u.sha1},mgf:{algorithmOid:u.mgf1,hash:{algorithmOid:u.sha1}},saltLength:20});var r={},a=[];if(!o.validate(t,p,r,a)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=a,s}return void 0!==r.hashOid&&(i.hash=i.hash||{},i.hash.algorithmOid=o.derToOid(r.hashOid)),void 0!==r.maskGenOid&&(i.mgf=i.mgf||{},i.mgf.algorithmOid=o.derToOid(r.maskGenOid),i.mgf.hash=i.mgf.hash||{},i.mgf.hash.algorithmOid=o.derToOid(r.maskGenHashOid)),void 0!==r.saltLength&&(i.saltLength=r.saltLength.charCodeAt(0)),i};l.certificateFromPem=function(t,n,i){var r=e.pem.decode(t)[0];if("CERTIFICATE"!==r.type&&"X509 CERTIFICATE"!==r.type&&"TRUSTED CERTIFICATE"!==r.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=r.type,a}if(r.procType&&"ENCRYPTED"===r.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=o.fromDer(r.body,i);return l.certificateFromAsn1(s,n)},l.certificateToPem=function(t,n){var i={type:"CERTIFICATE",body:o.toDer(l.certificateToAsn1(t)).getBytes()};return e.pem.encode(i,{maxline:n})},l.publicKeyFromPem=function(t){var n=e.pem.decode(t)[0];if("PUBLIC KEY"!==n.type&&"RSA PUBLIC KEY"!==n.type){var i=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var r=o.fromDer(n.body);return l.publicKeyFromAsn1(r)},l.publicKeyToPem=function(t,n){var i={type:"PUBLIC KEY",body:o.toDer(l.publicKeyToAsn1(t)).getBytes()};return e.pem.encode(i,{maxline:n})},l.publicKeyToRSAPublicKeyPem=function(t,n){var i={type:"RSA PUBLIC KEY",body:o.toDer(l.publicKeyToRSAPublicKey(t)).getBytes()};return e.pem.encode(i,{maxline:n})},l.getPublicKeyFingerprint=function(t,n){n=n||{};var i,r=n.md||e.md.sha1.create(),a=n.type||"RSAPublicKey";switch(a){case"RSAPublicKey":i=o.toDer(l.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=o.toDer(l.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+n.type+'".')}r.start(),r.update(i);var s=r.digest();if("hex"===n.encoding){var u=s.toHex();return n.delimiter?u.match(/.{2}/g).join(n.delimiter):u}if("binary"===n.encoding)return s.getBytes();if(n.encoding)throw new Error('Unknown encoding "'+n.encoding+'".');return s},l.certificationRequestFromPem=function(t,n,i){var r=e.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==r.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=r.type,a}if(r.procType&&"ENCRYPTED"===r.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=o.fromDer(r.body,i);return l.certificationRequestFromAsn1(s,n)},l.certificationRequestToPem=function(t,n){var i={type:"CERTIFICATE REQUEST",body:o.toDer(l.certificationRequestToAsn1(t)).getBytes()};return e.pem.encode(i,{maxline:n})},l.createCertificate=function(){var n={};return n.version=2,n.serialNumber="00",n.signatureOid=null,n.signature=null,n.siginfo={},n.siginfo.algorithmOid=null,n.validity={},n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.issuer={},n.issuer.getField=function(e){return t(n.issuer,e)},n.issuer.addField=function(e){i([e]),n.issuer.attributes.push(e)},n.issuer.attributes=[],n.issuer.hash=null,n.subject={},n.subject.getField=function(e){return t(n.subject,e)},n.subject.addField=function(e){i([e]),n.subject.attributes.push(e)},n.subject.attributes=[],n.subject.hash=null,n.extensions=[],n.publicKey=null,n.md=null,n.setSubject=function(e,t){i(e),n.subject.attributes=e,delete n.subject.uniqueId,t&&(n.subject.uniqueId=t),n.subject.hash=null},n.setIssuer=function(e,t){i(e),n.issuer.attributes=e,delete n.issuer.uniqueId,t&&(n.issuer.uniqueId=t),n.issuer.hash=null},n.setExtensions=function(e){for(var t=0;t<e.length;++t)r(e[t],{cert:n});n.extensions=e},n.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var t,i=null,r=0;null===i&&r<n.extensions.length;++r)t=n.extensions[r],e.id&&t.id===e.id?i=t:e.name&&t.name===e.name&&(i=t);return i},n.sign=function(t,i){n.md=i||e.md.sha1.create();var r=u[n.md.algorithm+"WithRSAEncryption"];if(!r){var a=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw a.algorithm=n.md.algorithm,a}n.signatureOid=n.siginfo.algorithmOid=r,n.tbsCertificate=l.getTBSCertificate(n);var s=o.toDer(n.tbsCertificate);n.md.update(s.getBytes()),n.signature=t.sign(n.md)},n.verify=function(t){var i=!1;if(!n.issued(t)){var r=t.issuer,a=n.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=r.attributes,s.actualIssuer=a.attributes,s}var c=t.md;if(null===c){if(t.signatureOid in u){var f=u[t.signatureOid];switch(f){case"sha1WithRSAEncryption":c=e.md.sha1.create();break;case"md5WithRSAEncryption":c=e.md.md5.create();break;case"sha256WithRSAEncryption":c=e.md.sha256.create();break;case"sha512WithRSAEncryption":c=e.md.sha512.create();break;case"RSASSA-PSS":c=e.md.sha256.create()}}if(null===c){var s=new Error("Could not compute certificate digest. Unknown signature OID.");throw s.signatureOid=t.signatureOid,s}var d=t.tbsCertificate||l.getTBSCertificate(t),p=o.toDer(d);c.update(p.getBytes())}if(null!==c){var h;switch(t.signatureOid){case u.sha1WithRSAEncryption:h=void 0;break;case u["RSASSA-PSS"]:var g,y;if(g=u[t.signatureParameters.mgf.hash.algorithmOid],void 0===g||void 0===e.md[g]){var s=new Error("Unsupported MGF hash function.");throw s.oid=t.signatureParameters.mgf.hash.algorithmOid,s.name=g,s}if(y=u[t.signatureParameters.mgf.algorithmOid],void 0===y||void 0===e.mgf[y]){var s=new Error("Unsupported MGF function.");throw s.oid=t.signatureParameters.mgf.algorithmOid,s.name=y,s}if(y=e.mgf[y].create(e.md[g].create()),g=u[t.signatureParameters.hash.algorithmOid],void 0===g||void 0===e.md[g])throw{message:"Unsupported RSASSA-PSS hash function.",oid:t.signatureParameters.hash.algorithmOid,name:g};h=e.pss.create(e.md[g].create(),y,t.signatureParameters.saltLength)}i=n.publicKey.verify(c.digest().getBytes(),t.signature,h)}return i},n.isIssuer=function(e){var t=!1,i=n.issuer,r=e.subject;if(i.hash&&r.hash)t=i.hash===r.hash;else if(i.attributes.length===r.attributes.length){t=!0;for(var a,s,o=0;t&&o<i.attributes.length;++o)a=i.attributes[o],s=r.attributes[o],a.type===s.type&&a.value===s.value||(t=!1)}return t},n.issued=function(e){return e.isIssuer(n)},n.generateSubjectKeyIdentifier=function(){return l.getPublicKeyFingerprint(n.publicKey,{type:"RSAPublicKey"})},n.verifySubjectKeyIdentifier=function(){for(var t=u.subjectKeyIdentifier,i=0;i<n.extensions.length;++i){var r=n.extensions[i];if(r.id===t){var a=n.generateSubjectKeyIdentifier().getBytes();return e.util.hexToBytes(r.subjectKeyIdentifier)===a}}return!1},n},l.certificateFromAsn1=function(n,r){var a={},s=[];if(!o.validate(n,d,a,s)){var c=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw c.errors=s,c}if("string"!=typeof a.certSignature){for(var f="\0",p=0;p<a.certSignature.length;++p)f+=o.toDer(a.certSignature[p]).getBytes();a.certSignature=f}var h=o.derToOid(a.publicKeyOid);if(h!==l.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var g=l.createCertificate();g.version=a.certVersion?a.certVersion.charCodeAt(0):0;var m=e.util.createBuffer(a.certSerialNumber);g.serialNumber=m.toHex(),g.signatureOid=e.asn1.derToOid(a.certSignatureOid),g.signatureParameters=y(g.signatureOid,a.certSignatureParams,!0),g.siginfo.algorithmOid=e.asn1.derToOid(a.certinfoSignatureOid),g.siginfo.parameters=y(g.siginfo.algorithmOid,a.certinfoSignatureParams,!1);var v=e.util.createBuffer(a.certSignature);++v.read,g.signature=v.getBytes();var C=[];if(void 0!==a.certValidity1UTCTime&&C.push(o.utcTimeToDate(a.certValidity1UTCTime)),void 0!==a.certValidity2GeneralizedTime&&C.push(o.generalizedTimeToDate(a.certValidity2GeneralizedTime)),void 0!==a.certValidity3UTCTime&&C.push(o.utcTimeToDate(a.certValidity3UTCTime)),void 0!==a.certValidity4GeneralizedTime&&C.push(o.generalizedTimeToDate(a.certValidity4GeneralizedTime)),C.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(C.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(g.validity.notBefore=C[0],g.validity.notAfter=C[1],g.tbsCertificate=a.tbsCertificate,r){if(g.md=null,g.signatureOid in u){var h=u[g.signatureOid];switch(h){case"sha1WithRSAEncryption":g.md=e.md.sha1.create();break;case"md5WithRSAEncryption":g.md=e.md.md5.create();break;case"sha256WithRSAEncryption":g.md=e.md.sha256.create();break;case"sha512WithRSAEncryption":g.md=e.md.sha512.create();break;case"RSASSA-PSS":g.md=e.md.sha256.create()}}if(null===g.md){var c=new Error("Could not compute certificate digest. Unknown signature OID.");throw c.signatureOid=g.signatureOid,c}var b=o.toDer(g.tbsCertificate);g.md.update(b.getBytes())}var E=e.md.sha1.create();g.issuer.getField=function(e){return t(g.issuer,e)},g.issuer.addField=function(e){i([e]),g.issuer.attributes.push(e)},g.issuer.attributes=l.RDNAttributesAsArray(a.certIssuer,E),a.certIssuerUniqueId&&(g.issuer.uniqueId=a.certIssuerUniqueId),g.issuer.hash=E.digest().toHex();var S=e.md.sha1.create();return g.subject.getField=function(e){return t(g.subject,e)},g.subject.addField=function(e){i([e]),g.subject.attributes.push(e)},g.subject.attributes=l.RDNAttributesAsArray(a.certSubject,S),a.certSubjectUniqueId&&(g.subject.uniqueId=a.certSubjectUniqueId),g.subject.hash=S.digest().toHex(),a.certExtensions?g.extensions=l.certificateExtensionsFromAsn1(a.certExtensions):g.extensions=[],g.publicKey=l.publicKeyFromAsn1(a.subjectPublicKeyInfo),g},l.certificateExtensionsFromAsn1=function(e){for(var t=[],n=0;n<e.value.length;++n)for(var i=e.value[n],r=0;r<i.value.length;++r)t.push(l.certificateExtensionFromAsn1(i.value[r]));return t},l.certificateExtensionFromAsn1=function(t){var n={};if(n.id=o.derToOid(t.value[0].value),n.critical=!1,t.value[1].type===o.Type.BOOLEAN?(n.critical=0!==t.value[1].value.charCodeAt(0),n.value=t.value[2].value):n.value=t.value[1].value,n.id in u)if(n.name=u[n.id],"keyUsage"===n.name){var i=o.fromDer(n.value),r=0,a=0;i.value.length>1&&(r=i.value.charCodeAt(1),a=i.value.length>2?i.value.charCodeAt(2):0),n.digitalSignature=128===(128&r),n.nonRepudiation=64===(64&r),n.keyEncipherment=32===(32&r),n.dataEncipherment=16===(16&r),n.keyAgreement=8===(8&r),n.keyCertSign=4===(4&r),n.cRLSign=2===(2&r),n.encipherOnly=1===(1&r),n.decipherOnly=128===(128&a)}else if("basicConstraints"===n.name){var i=o.fromDer(n.value);i.value.length>0&&i.value[0].type===o.Type.BOOLEAN?n.cA=0!==i.value[0].value.charCodeAt(0):n.cA=!1;var s=null;i.value.length>0&&i.value[0].type===o.Type.INTEGER?s=i.value[0].value:i.value.length>1&&(s=i.value[1].value),null!==s&&(n.pathLenConstraint=o.derToInteger(s))}else if("extKeyUsage"===n.name)for(var i=o.fromDer(n.value),l=0;l<i.value.length;++l){var c=o.derToOid(i.value[l].value);c in u?n[u[c]]=!0:n[c]=!0}else if("nsCertType"===n.name){var i=o.fromDer(n.value),r=0;i.value.length>1&&(r=i.value.charCodeAt(1)),n.client=128===(128&r),n.server=64===(64&r),n.email=32===(32&r),n.objsign=16===(16&r),n.reserved=8===(8&r),n.sslCA=4===(4&r),n.emailCA=2===(2&r),n.objCA=1===(1&r)}else if("subjectAltName"===n.name||"issuerAltName"===n.name){n.altNames=[];for(var f,i=o.fromDer(n.value),d=0;d<i.value.length;++d){f=i.value[d];var p={type:f.type,value:f.value};switch(n.altNames.push(p),f.type){case 1:case 2:case 6:break;case 7:p.ip=e.util.bytesToIP(f.value);break;case 8:p.oid=o.derToOid(f.value)}}}else if("subjectKeyIdentifier"===n.name){var i=o.fromDer(n.value);n.subjectKeyIdentifier=e.util.bytesToHex(i.value)}return n},l.certificationRequestFromAsn1=function(n,r){var a={},s=[];if(!o.validate(n,g,a,s)){var c=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw c.errors=s,c}if("string"!=typeof a.csrSignature){for(var f="\0",d=0;d<a.csrSignature.length;++d)f+=o.toDer(a.csrSignature[d]).getBytes();a.csrSignature=f}var p=o.derToOid(a.publicKeyOid);if(p!==l.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var h=l.createCertificationRequest();h.version=a.csrVersion?a.csrVersion.charCodeAt(0):0,h.signatureOid=e.asn1.derToOid(a.csrSignatureOid),h.signatureParameters=y(h.signatureOid,a.csrSignatureParams,!0),h.siginfo.algorithmOid=e.asn1.derToOid(a.csrSignatureOid),h.siginfo.parameters=y(h.siginfo.algorithmOid,a.csrSignatureParams,!1);var m=e.util.createBuffer(a.csrSignature);if(++m.read,h.signature=m.getBytes(),h.certificationRequestInfo=a.certificationRequestInfo,r){if(h.md=null,h.signatureOid in u){var p=u[h.signatureOid];switch(p){case"sha1WithRSAEncryption":h.md=e.md.sha1.create();break;case"md5WithRSAEncryption":h.md=e.md.md5.create();break;case"sha256WithRSAEncryption":h.md=e.md.sha256.create();break;case"sha512WithRSAEncryption":h.md=e.md.sha512.create();break;case"RSASSA-PSS":h.md=e.md.sha256.create()}}if(null===h.md){var c=new Error("Could not compute certification request digest. Unknown signature OID.");throw c.signatureOid=h.signatureOid,c}var v=o.toDer(h.certificationRequestInfo);h.md.update(v.getBytes())}var C=e.md.sha1.create();return h.subject.getField=function(e){return t(h.subject,e)},h.subject.addField=function(e){i([e]),h.subject.attributes.push(e)},h.subject.attributes=l.RDNAttributesAsArray(a.certificationRequestInfoSubject,C),h.subject.hash=C.digest().toHex(),h.publicKey=l.publicKeyFromAsn1(a.subjectPublicKeyInfo),h.getAttribute=function(e){return t(h,e);
},h.addAttribute=function(e){i([e]),h.attributes.push(e)},h.attributes=l.CRIAttributesAsArray(a.certificationRequestInfoAttributes||[]),h},l.createCertificationRequest=function(){var n={};return n.version=0,n.signatureOid=null,n.signature=null,n.siginfo={},n.siginfo.algorithmOid=null,n.subject={},n.subject.getField=function(e){return t(n.subject,e)},n.subject.addField=function(e){i([e]),n.subject.attributes.push(e)},n.subject.attributes=[],n.subject.hash=null,n.publicKey=null,n.attributes=[],n.getAttribute=function(e){return t(n,e)},n.addAttribute=function(e){i([e]),n.attributes.push(e)},n.md=null,n.setSubject=function(e){i(e),n.subject.attributes=e,n.subject.hash=null},n.setAttributes=function(e){i(e),n.attributes=e},n.sign=function(t,i){n.md=i||e.md.sha1.create();var r=u[n.md.algorithm+"WithRSAEncryption"];if(!r){var a=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw a.algorithm=n.md.algorithm,a}n.signatureOid=n.siginfo.algorithmOid=r,n.certificationRequestInfo=l.getCertificationRequestInfo(n);var s=o.toDer(n.certificationRequestInfo);n.md.update(s.getBytes()),n.signature=t.sign(n.md)},n.verify=function(){var t=!1,i=n.md;if(null===i){if(n.signatureOid in u){var r=u[n.signatureOid];switch(r){case"sha1WithRSAEncryption":i=e.md.sha1.create();break;case"md5WithRSAEncryption":i=e.md.md5.create();break;case"sha256WithRSAEncryption":i=e.md.sha256.create();break;case"sha512WithRSAEncryption":i=e.md.sha512.create();break;case"RSASSA-PSS":i=e.md.sha256.create()}}if(null===i){var a=new Error("Could not compute certification request digest. Unknown signature OID.");throw a.signatureOid=n.signatureOid,a}var s=n.certificationRequestInfo||l.getCertificationRequestInfo(n),c=o.toDer(s);i.update(c.getBytes())}if(null!==i){var f;switch(n.signatureOid){case u.sha1WithRSAEncryption:break;case u["RSASSA-PSS"]:var d,p;if(d=u[n.signatureParameters.mgf.hash.algorithmOid],void 0===d||void 0===e.md[d]){var a=new Error("Unsupported MGF hash function.");throw a.oid=n.signatureParameters.mgf.hash.algorithmOid,a.name=d,a}if(p=u[n.signatureParameters.mgf.algorithmOid],void 0===p||void 0===e.mgf[p]){var a=new Error("Unsupported MGF function.");throw a.oid=n.signatureParameters.mgf.algorithmOid,a.name=p,a}if(p=e.mgf[p].create(e.md[d].create()),d=u[n.signatureParameters.hash.algorithmOid],void 0===d||void 0===e.md[d]){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=n.signatureParameters.hash.algorithmOid,a.name=d,a}f=e.pss.create(e.md[d].create(),p,n.signatureParameters.saltLength)}t=n.publicKey.verify(i.digest().getBytes(),n.signature,f)}return t},n},l.getTBSCertificate=function(t){var i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,e.util.hexToBytes(t.serialNumber)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.siginfo.algorithmOid).getBytes()),a(t.siginfo.algorithmOid,t.siginfo.parameters)]),n(t.issuer),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(t.validity.notBefore)),o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(t.validity.notAfter))]),n(t.subject),l.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&i.value.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&i.value.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&i.value.push(l.certificateExtensionsToAsn1(t.extensions)),i},l.getCertificationRequestInfo=function(e){var t=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),n(e.subject),l.publicKeyToAsn1(e.publicKey),s(e)]);return t},l.distinguishedNameToAsn1=function(e){return n(e)},l.certificateToAsn1=function(e){var t=e.tbsCertificate||l.getTBSCertificate(e);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[t,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.signatureOid).getBytes()),a(e.signatureOid,e.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},l.certificateExtensionsToAsn1=function(e){var t=o.create(o.Class.CONTEXT_SPECIFIC,3,!0,[]),n=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);t.value.push(n);for(var i=0;i<e.length;++i)n.value.push(l.certificateExtensionToAsn1(e[i]));return t},l.certificateExtensionToAsn1=function(e){var t=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);t.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.id).getBytes())),e.critical&&t.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255)));var n=e.value;return"string"!=typeof e.value&&(n=o.toDer(n).getBytes()),t.value.push(o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,n)),t},l.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||l.getCertificationRequestInfo(e);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[t,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.signatureOid).getBytes()),a(e.signatureOid,e.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},l.createCaStore=function(t){function i(e){return r(e),a.certs[e.hash]||null}function r(t){if(!t.hash){var i=e.md.sha1.create();t.attributes=l.RDNAttributesAsArray(n(t),i),t.hash=i.digest().toHex()}}var a={certs:{}};if(a.getIssuer=function(e){var t=i(e.issuer);return t},a.addCertificate=function(t){if("string"==typeof t&&(t=e.pki.certificateFromPem(t)),r(t.subject),!a.hasCertificate(t))if(t.subject.hash in a.certs){var n=a.certs[t.subject.hash];e.util.isArray(n)||(n=[n]),n.push(t),a.certs[t.subject.hash]=n}else a.certs[t.subject.hash]=t},a.hasCertificate=function(t){"string"==typeof t&&(t=e.pki.certificateFromPem(t));var n=i(t.subject);if(!n)return!1;e.util.isArray(n)||(n=[n]);for(var r=o.toDer(l.certificateToAsn1(t)).getBytes(),a=0;a<n.length;++a){var s=o.toDer(l.certificateToAsn1(n[a])).getBytes();if(r===s)return!0}return!1},a.listAllCertificates=function(){var t=[];for(var n in a.certs)if(a.certs.hasOwnProperty(n)){var i=a.certs[n];if(e.util.isArray(i))for(var r=0;r<i.length;++r)t.push(i[r]);else t.push(i)}return t},a.removeCertificate=function(t){var n;if("string"==typeof t&&(t=e.pki.certificateFromPem(t)),r(t.subject),!a.hasCertificate(t))return null;var s=i(t.subject);if(!e.util.isArray(s))return n=a.certs[t.subject.hash],delete a.certs[t.subject.hash],n;for(var u=o.toDer(l.certificateToAsn1(t)).getBytes(),c=0;c<s.length;++c){var f=o.toDer(l.certificateToAsn1(s[c])).getBytes();u===f&&(n=s[c],s.splice(c,1))}return 0===s.length&&delete a.certs[t.subject.hash],n},t)for(var s=0;s<t.length;++s){var u=t[s];a.addCertificate(u)}return a},l.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},l.verifyCertificateChain=function(t,n,i){n=n.slice(0);var r=n.slice(0),a=new Date,s=!0,o=null,u=0;do{var c=n.shift(),f=null,d=!1;if((a<c.validity.notBefore||a>c.validity.notAfter)&&(o={message:"Certificate is not valid yet or has expired.",error:l.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:a}),null===o){if(f=n[0]||t.getIssuer(c),null===f&&c.isIssuer(c)&&(d=!0,f=c),f){var p=f;e.util.isArray(p)||(p=[p]);for(var h=!1;!h&&p.length>0;){f=p.shift();try{h=f.verify(c)}catch(g){}}h||(o={message:"Certificate signature is invalid.",error:l.certificateError.bad_certificate})}null!==o||f&&!d||t.hasCertificate(c)||(o={message:"Certificate is not trusted.",error:l.certificateError.unknown_ca})}if(null===o&&f&&!c.isIssuer(f)&&(o={message:"Certificate issuer is invalid.",error:l.certificateError.bad_certificate}),null===o)for(var y={keyUsage:!0,basicConstraints:!0},m=0;null===o&&m<c.extensions.length;++m){var v=c.extensions[m];!v.critical||v.name in y||(o={message:"Certificate has an unsupported critical extension.",error:l.certificateError.unsupported_certificate})}if(null===o&&(!s||0===n.length&&(!f||d))){var C=c.getExtension("basicConstraints"),b=c.getExtension("keyUsage");if(null!==b&&(b.keyCertSign&&null!==C||(o={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:l.certificateError.bad_certificate})),null!==o||null===C||C.cA||(o={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:l.certificateError.bad_certificate}),null===o&&null!==b&&"pathLenConstraint"in C){var E=u-1;E>C.pathLenConstraint&&(o={message:"Certificate basicConstraints pathLenConstraint violated.",error:l.certificateError.bad_certificate})}}var S=null===o||o.error,T=i?i(S,u,r):S;if(T!==!0)throw S===!0&&(o={message:"The application rejected the certificate.",error:l.certificateError.bad_certificate}),(T||0===T)&&("object"!=typeof T||e.util.isArray(T)?"string"==typeof T&&(o.error=T):(T.message&&(o.message=T.message),T.error&&(o.error=T.error))),o;o=null,s=!1,++u}while(n.length>0);return!0}}var i="x509";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n.pki}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/x509",["require","module","./aes","./asn1","./des","./md","./mgf","./oids","./pem","./pss","./rsa","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,n,i){for(var r=[],a=0;a<e.length;a++)for(var s=0;s<e[a].safeBags.length;s++){var o=e[a].safeBags[s];void 0!==i&&o.type!==i||(null!==t?void 0!==o.attributes[t]&&o.attributes[t].indexOf(n)>=0&&r.push(o):r.push(o))}return r}function n(t){if(t.composed||t.constructed){for(var n=e.util.createBuffer(),i=0;i<t.value.length;++i)n.putBytes(t.value[i].value);t.composed=t.constructed=!1,t.value=n.getBytes()}return t}function i(e,t,i,s){if(t=o.fromDer(t,i),t.tagClass!==o.Class.UNIVERSAL||t.type!==o.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var u=0;u<t.value.length;u++){var f=t.value[u],d={},p=[];if(!o.validate(f,c,d,p)){var h=new Error("Cannot read ContentInfo.");throw h.errors=p,h}var g={encrypted:!1},y=null,m=d.content.value[0];switch(o.derToOid(d.contentType)){case l.oids.data:if(m.tagClass!==o.Class.UNIVERSAL||m.type!==o.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");y=n(m).value;break;case l.oids.encryptedData:y=r(m,s),g.encrypted=!0;break;default:var h=new Error("Unsupported PKCS#12 contentType.");throw h.contentType=o.derToOid(d.contentType),h}g.safeBags=a(y,i,s),e.safeContents.push(g)}}function r(t,i){var r={},a=[];if(!o.validate(t,e.pkcs7.asn1.encryptedDataValidator,r,a)){var s=new Error("Cannot read EncryptedContentInfo.");throw s.errors=a,s}var u=o.derToOid(r.contentType);if(u!==l.oids.data){var s=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw s.oid=u,s}u=o.derToOid(r.encAlgorithm);var c=l.pbe.getCipher(u,r.encParameter,i),f=n(r.encryptedContentAsn1),d=e.util.createBuffer(f.value);if(c.update(d),!c.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return c.output.getBytes()}function a(e,t,n){if(!t&&0===e.length)return[];if(e=o.fromDer(e,t),e.tagClass!==o.Class.UNIVERSAL||e.type!==o.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var i=[],r=0;r<e.value.length;r++){var a=e.value[r],u={},c=[];if(!o.validate(a,d,u,c)){var f=new Error("Cannot read SafeBag.");throw f.errors=c,f}var p={type:o.derToOid(u.bagId),attributes:s(u.bagAttributes)};i.push(p);var g,y,m=u.bagValue.value[0];switch(p.type){case l.oids.pkcs8ShroudedKeyBag:if(m=l.decryptPrivateKeyInfo(m,n),null===m)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case l.oids.keyBag:try{p.key=l.privateKeyFromAsn1(m)}catch(v){p.key=null,p.asn1=m}continue;case l.oids.certBag:g=h,y=function(){if(o.derToOid(u.certId)!==l.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=o.derToOid(u.certId),e}var n=o.fromDer(u.cert,t);try{p.cert=l.certificateFromAsn1(n,!0)}catch(i){p.cert=null,p.asn1=n}};break;default:var f=new Error("Unsupported PKCS#12 SafeBag type.");throw f.oid=p.type,f}if(void 0!==g&&!o.validate(m,g,u,c)){var f=new Error("Cannot read PKCS#12 "+g.name);throw f.errors=c,f}y()}return i}function s(e){var t={};if(void 0!==e)for(var n=0;n<e.length;++n){var i={},r=[];if(!o.validate(e[n],p,i,r)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=r,a}var s=o.derToOid(i.oid);if(void 0!==l.oids[s]){t[l.oids[s]]=[];for(var u=0;u<i.values.length;++u)t[l.oids[s]].push(i.values[u].value)}}return t}var o=e.asn1,l=e.pki,u=e.pkcs12=e.pkcs12||{},c={name:"ContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},f={name:"PFX",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},c,{name:"PFX.macData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},d={name:"SafeBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},p={name:"Attribute",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,capture:"values"}]},h={name:"CertBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:o.Class.UNIVERSAL,type:o.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};u.pkcs12FromAsn1=function(r,a,s){"string"==typeof a?(s=a,a=!0):void 0===a&&(a=!0);var c={},d=[];if(!o.validate(r,f,c,d)){var p=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw p.errors=p,p}var h={version:c.version.charCodeAt(0),safeContents:[],getBags:function(n){var i,r={};return"localKeyId"in n?i=n.localKeyId:"localKeyIdHex"in n&&(i=e.util.hexToBytes(n.localKeyIdHex)),void 0===i&&!("friendlyName"in n)&&"bagType"in n&&(r[n.bagType]=t(h.safeContents,null,null,n.bagType)),void 0!==i&&(r.localKeyId=t(h.safeContents,"localKeyId",i,n.bagType)),"friendlyName"in n&&(r.friendlyName=t(h.safeContents,"friendlyName",n.friendlyName,n.bagType)),r},getBagsByFriendlyName:function(e,n){return t(h.safeContents,"friendlyName",e,n)},getBagsByLocalKeyId:function(e,n){return t(h.safeContents,"localKeyId",e,n)}};if(3!==c.version.charCodeAt(0)){var p=new Error("PKCS#12 PFX of version other than 3 not supported.");throw p.version=c.version.charCodeAt(0),p}if(o.derToOid(c.contentType)!==l.oids.data){var p=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw p.oid=o.derToOid(c.contentType),p}var g=c.content.value[0];if(g.tagClass!==o.Class.UNIVERSAL||g.type!==o.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(g=n(g),c.mac){var y=null,m=0,v=o.derToOid(c.macAlgorithm);switch(v){case l.oids.sha1:y=e.md.sha1.create(),m=20;break;case l.oids.sha256:y=e.md.sha256.create(),m=32;break;case l.oids.sha384:y=e.md.sha384.create(),m=48;break;case l.oids.sha512:y=e.md.sha512.create(),m=64;break;case l.oids.md5:y=e.md.md5.create(),m=16}if(null===y)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+v);var C=new e.util.ByteBuffer(c.macSalt),b="macIterations"in c?parseInt(e.util.bytesToHex(c.macIterations),16):1,E=u.generateKey(s,C,3,b,m,y),S=e.hmac.create();S.start(y,E),S.update(g.value);var T=S.getMac();if(T.getBytes()!==c.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return i(h,g.value,a,s),h},u.toPkcs12Asn1=function(t,n,i,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||r.encAlgorithm||"aes128","useMac"in r||(r.useMac=!0),"localKeyId"in r||(r.localKeyId=null),"generateLocalKeyId"in r||(r.generateLocalKeyId=!0);var a,s=r.localKeyId;if(null!==s)s=e.util.hexToBytes(s);else if(r.generateLocalKeyId)if(n){var c=e.util.isArray(n)?n[0]:n;"string"==typeof c&&(c=l.certificateFromPem(c));var f=e.md.sha1.create();f.update(o.toDer(l.certificateToAsn1(c)).getBytes()),s=f.digest().getBytes()}else s=e.random.getBytes(20);var d=[];null!==s&&d.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(l.oids.localKeyId).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,s)])])),"friendlyName"in r&&d.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(l.oids.friendlyName).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.BMPSTRING,!1,r.friendlyName)])])),d.length>0&&(a=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,d));var p=[],h=[];null!==n&&(h=e.util.isArray(n)?n:[n]);for(var g=[],y=0;y<h.length;++y){n=h[y],"string"==typeof n&&(n=l.certificateFromPem(n));var m=0===y?a:void 0,v=l.certificateToAsn1(n),C=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(l.oids.certBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(l.oids.x509Certificate).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(v).getBytes())])])]),m]);g.push(C)}if(g.length>0){var b=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,g),E=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(l.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(b).getBytes())])]);p.push(E)}var S=null;if(null!==t){var T=l.wrapRsaPrivateKey(l.privateKeyToAsn1(t));S=null===i?o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(l.oids.keyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[T]),a]):o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(l.oids.pkcs8ShroudedKeyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[l.encryptPrivateKeyInfo(T,i,r)]),a]);var w=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[S]),A=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(l.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(w).getBytes())])]);p.push(A)}var k,I=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,p);if(r.useMac){var f=e.md.sha1.create(),B=new e.util.ByteBuffer(e.random.getBytes(r.saltSize)),_=r.count,t=u.generateKey(i,B,3,_,20),N=e.hmac.create();N.start(f,t),N.update(o.toDer(I).getBytes());var R=N.getMac();k=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(l.oids.sha1).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,R.getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,B.getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(_).getBytes())])}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(3).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(l.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(I).getBytes())])]),k])},u.generateKey=e.pbe.generatePkcs12Key}var i="pkcs12";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pkcs12",["require","module","./asn1","./hmac","./oids","./pkcs7asn1","./pbe","./random","./rsa","./sha1","./util","./x509"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1,n=e.pki=e.pki||{};n.pemToDer=function(t){var n=e.pem.decode(t)[0];if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return e.util.createBuffer(n.body)},n.privateKeyFromPem=function(i){var r=e.pem.decode(i)[0];if("PRIVATE KEY"!==r.type&&"RSA PRIVATE KEY"!==r.type){var a=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw a.headerType=r.type,a}if(r.procType&&"ENCRYPTED"===r.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var s=t.fromDer(r.body);return n.privateKeyFromAsn1(s)},n.privateKeyToPem=function(i,r){var a={type:"RSA PRIVATE KEY",body:t.toDer(n.privateKeyToAsn1(i)).getBytes()};return e.pem.encode(a,{maxline:r})},n.privateKeyInfoToPem=function(n,i){var r={type:"PRIVATE KEY",body:t.toDer(n).getBytes()};return e.pem.encode(r,{maxline:i})}}var i="pki";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pki",["require","module","./asn1","./oids","./pbe","./pem","./pbkdf2","./pkcs12","./pss","./rsa","./util","./x509"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=function(t,n,i,r){var a=e.util.createBuffer(),s=t.length>>1,o=s+(1&t.length),l=t.substr(0,o),u=t.substr(s,o),c=e.util.createBuffer(),f=e.hmac.create();i=n+i;var d=Math.ceil(r/16),p=Math.ceil(r/20);f.start("MD5",l);var h=e.util.createBuffer();c.putBytes(i);for(var g=0;g<d;++g)f.start(null,null),f.update(c.getBytes()),c.putBuffer(f.digest()),f.start(null,null),f.update(c.bytes()+i),h.putBuffer(f.digest());f.start("SHA1",u);var y=e.util.createBuffer();c.clear(),c.putBytes(i);for(var g=0;g<p;++g)f.start(null,null),f.update(c.getBytes()),c.putBuffer(f.digest()),f.start(null,null),f.update(c.bytes()+i),y.putBuffer(f.digest());return a.putBytes(e.util.xorBytes(h.getBytes(),y.getBytes(),r)),a},n=function(t,n,i){var r=e.hmac.create();r.start("SHA1",t);var a=e.util.createBuffer();return a.putInt32(n[0]),a.putInt32(n[1]),a.putByte(i.type),a.putByte(i.version.major),a.putByte(i.version.minor),a.putInt16(i.length),a.putBytes(i.fragment.bytes()),r.update(a.getBytes()),r.digest().getBytes()},i=function(t,n,i){var r=!1;try{var a=t.deflate(n.fragment.getBytes());n.fragment=e.util.createBuffer(a),n.length=a.length,r=!0}catch(s){}return r},r=function(t,n,i){var r=!1;try{var a=t.inflate(n.fragment.getBytes());n.fragment=e.util.createBuffer(a),n.length=a.length,r=!0}catch(s){}return r},a=function(t,n){var i=0;switch(n){case 1:i=t.getByte();break;case 2:i=t.getInt16();break;case 3:i=t.getInt24();break;case 4:i=t.getInt32()}return e.util.createBuffer(t.getBytes(i))},s=function(e,t,n){e.putInt(n.length(),t<<3),e.putBuffer(n)},o={};o.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},o.SupportedVersions=[o.Versions.TLS_1_1,o.Versions.TLS_1_0],o.Version=o.SupportedVersions[0],o.MaxFragment=15360,o.ConnectionEnd={server:0,client:1},o.PRFAlgorithm={tls_prf_sha256:0},o.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},o.CipherType={stream:0,block:1,aead:2},o.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},o.CompressionMethod={none:0,deflate:1},o.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},o.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},o.Alert={},o.Alert.Level={warning:1,fatal:2},o.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},o.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},o.CipherSuites={},o.getCipherSuite=function(e){var t=null;for(var n in o.CipherSuites){var i=o.CipherSuites[n];if(i.id[0]===e.charCodeAt(0)&&i.id[1]===e.charCodeAt(1)){t=i;break}}return t},o.handleUnexpected=function(e,t){var n=!e.open&&e.entity===o.ConnectionEnd.client;n||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.unexpected_message}})},o.handleHelloRequest=function(e,t,n){!e.handshaking&&e.handshakes>0&&(o.queue(e,o.createAlert(e,{level:o.Alert.Level.warning,description:o.Alert.Description.no_renegotiation})),o.flush(e)),e.process()},o.parseHelloMessage=function(t,n,i){var r=null,s=t.entity===o.ConnectionEnd.client;if(i<38)t.error(t,{message:s?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.illegal_parameter}});else{var l=n.fragment,u=l.length();if(r={version:{major:l.getByte(),minor:l.getByte()},random:e.util.createBuffer(l.getBytes(32)),session_id:a(l,1),extensions:[]},s?(r.cipher_suite=l.getBytes(2),r.compression_method=l.getByte()):(r.cipher_suites=a(l,2),r.compression_methods=a(l,1)),u=i-(u-l.length()),u>0){for(var c=a(l,2);c.length()>0;)r.extensions.push({type:[c.getByte(),c.getByte()],data:a(c,2)});if(!s)for(var f=0;f<r.extensions.length;++f){var d=r.extensions[f];if(0===d.type[0]&&0===d.type[1])for(var p=a(d.data,2);p.length()>0;){var h=p.getByte();if(0!==h)break;t.session.extensions.server_name.serverNameList.push(a(p,2).getBytes())}}}if(t.session.version&&(r.version.major!==t.session.version.major||r.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.protocol_version}});if(s)t.session.cipherSuite=o.getCipherSuite(r.cipher_suite);else for(var g=e.util.createBuffer(r.cipher_suites.bytes());g.length()>0&&(t.session.cipherSuite=o.getCipherSuite(g.getBytes(2)),null===t.session.cipherSuite););if(null===t.session.cipherSuite)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.handshake_failure},cipherSuite:e.util.bytesToHex(r.cipher_suite)});s?t.session.compressionMethod=r.compression_method:t.session.compressionMethod=o.CompressionMethod.none}return r},o.createSecurityParameters=function(e,t){var n=e.entity===o.ConnectionEnd.client,i=t.random.bytes(),r=n?e.session.sp.client_random:i,a=n?i:o.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:o.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:r,server_random:a}},o.handleServerHello=function(e,t,n){var i=o.parseHelloMessage(e,t,n);if(!e.fail){if(!(i.version.minor<=e.version.minor))return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.protocol_version}});e.version.minor=i.version.minor,e.session.version=e.version;var r=i.session_id.bytes();r.length>0&&r===e.session.id?(e.expect=p,e.session.resuming=!0,e.session.sp.server_random=i.random.bytes()):(e.expect=u,e.session.resuming=!1,o.createSecurityParameters(e,i)),e.session.id=r,e.process()}},o.handleClientHello=function(t,n,i){var r=o.parseHelloMessage(t,n,i);if(!t.fail){var a=r.session_id.bytes(),s=null;if(t.sessionCache&&(s=t.sessionCache.getSession(a),null===s?a="":(s.version.major!==r.version.major||s.version.minor>r.version.minor)&&(s=null,a="")),0===a.length&&(a=e.random.getBytes(32)),t.session.id=a,t.session.clientHelloVersion=r.version,t.session.sp={},s)t.version=t.session.version=s.version,t.session.sp=s.sp;else{for(var l,u=1;u<o.SupportedVersions.length&&(l=o.SupportedVersions[u],!(l.minor<=r.version.minor));++u);
t.version={major:l.major,minor:l.minor},t.session.version=t.version}null!==s?(t.expect=E,t.session.resuming=!0,t.session.sp.client_random=r.random.bytes()):(t.expect=t.verifyClient!==!1?v:C,t.session.resuming=!1,o.createSecurityParameters(t,r)),t.open=!0,o.queue(t,o.createRecord(t,{type:o.ContentType.handshake,data:o.createServerHello(t)})),t.session.resuming?(o.queue(t,o.createRecord(t,{type:o.ContentType.change_cipher_spec,data:o.createChangeCipherSpec()})),t.state.pending=o.createConnectionState(t),t.state.current.write=t.state.pending.write,o.queue(t,o.createRecord(t,{type:o.ContentType.handshake,data:o.createFinished(t)}))):(o.queue(t,o.createRecord(t,{type:o.ContentType.handshake,data:o.createCertificate(t)})),t.fail||(o.queue(t,o.createRecord(t,{type:o.ContentType.handshake,data:o.createServerKeyExchange(t)})),t.verifyClient!==!1&&o.queue(t,o.createRecord(t,{type:o.ContentType.handshake,data:o.createCertificateRequest(t)})),o.queue(t,o.createRecord(t,{type:o.ContentType.handshake,data:o.createServerHelloDone(t)})))),o.flush(t),t.process()}},o.handleCertificate=function(t,n,i){if(i<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.illegal_parameter}});var r,s,l=n.fragment,u={certificate_list:a(l,3)},f=[];try{for(;u.certificate_list.length()>0;)r=a(u.certificate_list,3),s=e.asn1.fromDer(r),r=e.pki.certificateFromAsn1(s,!0),f.push(r)}catch(d){return t.error(t,{message:"Could not parse certificate list.",cause:d,send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.bad_certificate}})}var p=t.entity===o.ConnectionEnd.client;!p&&t.verifyClient!==!0||0!==f.length?0===f.length?t.expect=p?c:C:(p?t.session.serverCertificate=f[0]:t.session.clientCertificate=f[0],o.verifyCertificateChain(t,f)&&(t.expect=p?c:C)):t.error(t,{message:p?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.illegal_parameter}}),t.process()},o.handleServerKeyExchange=function(e,t,n){return n>0?e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.unsupported_certificate}}):(e.expect=f,void e.process())},o.handleClientKeyExchange=function(t,n,i){if(i<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.unsupported_certificate}});var r=n.fragment,s={enc_pre_master_secret:a(r,2).getBytes()},l=null;if(t.getPrivateKey)try{l=t.getPrivateKey(t,t.session.serverCertificate),l=e.pki.privateKeyFromPem(l)}catch(u){t.error(t,{message:"Could not get private key.",cause:u,send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.internal_error}})}if(null===l)return t.error(t,{message:"No private key set.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.internal_error}});try{var c=t.session.sp;c.pre_master_secret=l.decrypt(s.enc_pre_master_secret);var f=t.session.clientHelloVersion;if(f.major!==c.pre_master_secret.charCodeAt(0)||f.minor!==c.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(u){c.pre_master_secret=e.random.getBytes(48)}t.expect=E,null!==t.session.clientCertificate&&(t.expect=b),t.process()},o.handleCertificateRequest=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.illegal_parameter}});var i=t.fragment,r={certificate_types:a(i,1),certificate_authorities:a(i,2)};e.session.certificateRequest=r,e.expect=d,e.process()},o.handleCertificateVerify=function(t,n,i){if(i<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.illegal_parameter}});var r=n.fragment;r.read-=4;var s=r.bytes();r.read+=4;var l={signature:a(r,2).getBytes()},u=e.util.createBuffer();u.putBuffer(t.session.md5.digest()),u.putBuffer(t.session.sha1.digest()),u=u.getBytes();try{var c=t.session.clientCertificate;if(!c.publicKey.verify(u,l.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(s),t.session.sha1.update(s)}catch(f){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.handshake_failure}})}t.expect=E,t.process()},o.handleServerHelloDone=function(t,n,i){if(i>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.record_overflow}});if(null===t.serverCertificate){var r={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.insufficient_security}},a=0,s=t.verify(t,r.alert.description,a,[]);if(s!==!0)return(s||0===s)&&("object"!=typeof s||e.util.isArray(s)?"number"==typeof s&&(r.alert.description=s):(s.message&&(r.message=s.message),s.alert&&(r.alert.description=s.alert))),t.error(t,r)}null!==t.session.certificateRequest&&(n=o.createRecord(t,{type:o.ContentType.handshake,data:o.createCertificate(t)}),o.queue(t,n)),n=o.createRecord(t,{type:o.ContentType.handshake,data:o.createClientKeyExchange(t)}),o.queue(t,n),t.expect=y;var l=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&o.queue(e,o.createRecord(e,{type:o.ContentType.handshake,data:o.createCertificateVerify(e,t)})),o.queue(e,o.createRecord(e,{type:o.ContentType.change_cipher_spec,data:o.createChangeCipherSpec()})),e.state.pending=o.createConnectionState(e),e.state.current.write=e.state.pending.write,o.queue(e,o.createRecord(e,{type:o.ContentType.handshake,data:o.createFinished(e)})),e.expect=p,o.flush(e),e.process()};return null===t.session.certificateRequest||null===t.session.clientCertificate?l(t,null):void o.getClientSignature(t,l)},o.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.illegal_parameter}});var n=e.entity===o.ConnectionEnd.client;(e.session.resuming&&n||!e.session.resuming&&!n)&&(e.state.pending=o.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&n||e.session.resuming&&!n)&&(e.state.pending=null),e.expect=n?h:S,e.process()},o.handleFinished=function(n,i,r){var a=i.fragment;a.read-=4;var s=a.bytes();a.read+=4;var l=i.fragment.getBytes();a=e.util.createBuffer(),a.putBuffer(n.session.md5.digest()),a.putBuffer(n.session.sha1.digest());var u=n.entity===o.ConnectionEnd.client,c=u?"server finished":"client finished",f=n.session.sp,d=12,p=t;return a=p(f.master_secret,c,a.getBytes(),d),a.getBytes()!==l?n.error(n,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.decrypt_error}}):(n.session.md5.update(s),n.session.sha1.update(s),(n.session.resuming&&u||!n.session.resuming&&!u)&&(o.queue(n,o.createRecord(n,{type:o.ContentType.change_cipher_spec,data:o.createChangeCipherSpec()})),n.state.current.write=n.state.pending.write,n.state.pending=null,o.queue(n,o.createRecord(n,{type:o.ContentType.handshake,data:o.createFinished(n)}))),n.expect=u?g:T,n.handshaking=!1,++n.handshakes,n.peerCertificate=u?n.session.serverCertificate:n.session.clientCertificate,o.flush(n),n.isConnected=!0,n.connected(n),void n.process())},o.handleAlert=function(e,t){var n,i=t.fragment,r={level:i.getByte(),description:i.getByte()};switch(r.description){case o.Alert.Description.close_notify:n="Connection closed.";break;case o.Alert.Description.unexpected_message:n="Unexpected message.";break;case o.Alert.Description.bad_record_mac:n="Bad record MAC.";break;case o.Alert.Description.decryption_failed:n="Decryption failed.";break;case o.Alert.Description.record_overflow:n="Record overflow.";break;case o.Alert.Description.decompression_failure:n="Decompression failed.";break;case o.Alert.Description.handshake_failure:n="Handshake failure.";break;case o.Alert.Description.bad_certificate:n="Bad certificate.";break;case o.Alert.Description.unsupported_certificate:n="Unsupported certificate.";break;case o.Alert.Description.certificate_revoked:n="Certificate revoked.";break;case o.Alert.Description.certificate_expired:n="Certificate expired.";break;case o.Alert.Description.certificate_unknown:n="Certificate unknown.";break;case o.Alert.Description.illegal_parameter:n="Illegal parameter.";break;case o.Alert.Description.unknown_ca:n="Unknown certificate authority.";break;case o.Alert.Description.access_denied:n="Access denied.";break;case o.Alert.Description.decode_error:n="Decode error.";break;case o.Alert.Description.decrypt_error:n="Decrypt error.";break;case o.Alert.Description.export_restriction:n="Export restriction.";break;case o.Alert.Description.protocol_version:n="Unsupported protocol version.";break;case o.Alert.Description.insufficient_security:n="Insufficient security.";break;case o.Alert.Description.internal_error:n="Internal error.";break;case o.Alert.Description.user_canceled:n="User canceled.";break;case o.Alert.Description.no_renegotiation:n="Renegotiation not supported.";break;default:n="Unknown error."}return r.description===o.Alert.Description.close_notify?e.close():(e.error(e,{message:n,send:!1,origin:e.entity===o.ConnectionEnd.client?"server":"client",alert:r}),void e.process())},o.handleHandshake=function(t,n){var i=n.fragment,r=i.getByte(),a=i.getInt24();if(a>i.length())return t.fragmented=n,n.fragment=e.util.createBuffer(),i.read-=4,t.process();t.fragmented=null,i.read-=4;var s=i.bytes(a+4);i.read+=4,r in U[t.entity][t.expect]?(t.entity!==o.ConnectionEnd.server||t.open||t.fail||(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:e.md.md5.create(),sha1:e.md.sha1.create()}),r!==o.HandshakeType.hello_request&&r!==o.HandshakeType.certificate_verify&&r!==o.HandshakeType.finished&&(t.session.md5.update(s),t.session.sha1.update(s)),U[t.entity][t.expect][r](t,n,a)):o.handleUnexpected(t,n)},o.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},o.handleHeartbeat=function(t,n){var i=n.fragment,r=i.getByte(),a=i.getInt16(),s=i.getBytes(a);if(r===o.HeartbeatMessageType.heartbeat_request){if(t.handshaking||a>s.length)return t.process();o.queue(t,o.createRecord(t,{type:o.ContentType.heartbeat,data:o.createHeartbeat(o.HeartbeatMessageType.heartbeat_response,s)})),o.flush(t)}else if(r===o.HeartbeatMessageType.heartbeat_response){if(s!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,e.util.createBuffer(s))}t.process()};var l=0,u=1,c=2,f=3,d=4,p=5,h=6,g=7,y=8,m=0,v=1,C=2,b=3,E=4,S=5,T=6,w=o.handleUnexpected,A=o.handleChangeCipherSpec,k=o.handleAlert,I=o.handleHandshake,B=o.handleApplicationData,_=o.handleHeartbeat,N=[];N[o.ConnectionEnd.client]=[[w,k,I,w,_],[w,k,I,w,_],[w,k,I,w,_],[w,k,I,w,_],[w,k,I,w,_],[A,k,w,w,_],[w,k,I,w,_],[w,k,I,B,_],[w,k,I,w,_]],N[o.ConnectionEnd.server]=[[w,k,I,w,_],[w,k,I,w,_],[w,k,I,w,_],[w,k,I,w,_],[A,k,w,w,_],[w,k,I,w,_],[w,k,I,B,_],[w,k,I,w,_]];var R=o.handleHelloRequest,x=o.handleServerHello,D=o.handleCertificate,L=o.handleServerKeyExchange,O=o.handleCertificateRequest,P=o.handleServerHelloDone,F=o.handleFinished,U=[];U[o.ConnectionEnd.client]=[[w,w,x,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[R,w,w,w,w,w,w,w,w,w,w,D,L,O,P,w,w,w,w,w,w],[R,w,w,w,w,w,w,w,w,w,w,w,L,O,P,w,w,w,w,w,w],[R,w,w,w,w,w,w,w,w,w,w,w,w,O,P,w,w,w,w,w,w],[R,w,w,w,w,w,w,w,w,w,w,w,w,w,P,w,w,w,w,w,w],[R,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[R,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,F],[R,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[R,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w]];var $=o.handleClientHello,z=o.handleClientKeyExchange,V=o.handleCertificateVerify;U[o.ConnectionEnd.server]=[[w,$,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,D,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,z,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,V,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,F],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w]],o.generateKeys=function(e,n){var i=t,r=n.client_random+n.server_random;e.session.resuming||(n.master_secret=i(n.pre_master_secret,"master secret",r,48).bytes(),n.pre_master_secret=null),r=n.server_random+n.client_random;var a=2*n.mac_key_length+2*n.enc_key_length,s=e.version.major===o.Versions.TLS_1_0.major&&e.version.minor===o.Versions.TLS_1_0.minor;s&&(a+=2*n.fixed_iv_length);var l=i(n.master_secret,"key expansion",r,a),u={client_write_MAC_key:l.getBytes(n.mac_key_length),server_write_MAC_key:l.getBytes(n.mac_key_length),client_write_key:l.getBytes(n.enc_key_length),server_write_key:l.getBytes(n.enc_key_length)};return s&&(u.client_write_IV=l.getBytes(n.fixed_iv_length),u.server_write_IV=l.getBytes(n.fixed_iv_length)),u},o.createConnectionState=function(e){var t=e.entity===o.ConnectionEnd.client,n=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},a={read:n(),write:n()};if(a.read.update=function(e,t){return a.read.cipherFunction(t,a.read)?a.read.compressFunction(e,t,a.read)||e.error(e,{message:"Could not decompress record.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.decompression_failure}}):e.error(e,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.bad_record_mac}}),!e.fail},a.write.update=function(e,t){return a.write.compressFunction(e,t,a.write)?a.write.cipherFunction(t,a.write)||e.error(e,{message:"Could not encrypt record.",send:!1,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.internal_error}}):e.error(e,{message:"Could not compress record.",send:!1,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.internal_error}}),!e.fail},e.session){var s=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(s),s.keys=o.generateKeys(e,s),a.read.macKey=t?s.keys.server_write_MAC_key:s.keys.client_write_MAC_key,a.write.macKey=t?s.keys.client_write_MAC_key:s.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(a,e,s),s.compression_algorithm){case o.CompressionMethod.none:break;case o.CompressionMethod.deflate:a.read.compressFunction=r,a.write.compressFunction=i;break;default:throw new Error("Unsupported compression algorithm.")}}return a},o.createRandom=function(){var t=new Date,n=+t+6e4*t.getTimezoneOffset(),i=e.util.createBuffer();return i.putInt32(n),i.putBytes(e.random.getBytes(28)),i},o.createRecord=function(e,t){if(!t.data)return null;var n={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return n},o.createAlert=function(t,n){var i=e.util.createBuffer();return i.putByte(n.level),i.putByte(n.description),o.createRecord(t,{type:o.ContentType.alert,data:i})},o.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var n=e.util.createBuffer(),i=0;i<t.cipherSuites.length;++i){var r=t.cipherSuites[i];n.putByte(r.id[0]),n.putByte(r.id[1])}var a=n.length(),l=e.util.createBuffer();l.putByte(o.CompressionMethod.none);var u=l.length(),c=e.util.createBuffer();if(t.virtualHost){var f=e.util.createBuffer();f.putByte(0),f.putByte(0);var d=e.util.createBuffer();d.putByte(0),s(d,2,e.util.createBuffer(t.virtualHost));var p=e.util.createBuffer();s(p,2,d),s(f,2,p),c.putBuffer(f)}var h=c.length();h>0&&(h+=2);var g=t.session.id,y=g.length+1+2+4+28+2+a+1+u+h,m=e.util.createBuffer();return m.putByte(o.HandshakeType.client_hello),m.putInt24(y),m.putByte(t.version.major),m.putByte(t.version.minor),m.putBytes(t.session.sp.client_random),s(m,1,e.util.createBuffer(g)),s(m,2,n),s(m,1,l),h>0&&s(m,2,c),m},o.createServerHello=function(t){var n=t.session.id,i=n.length+1+2+4+28+2+1,r=e.util.createBuffer();return r.putByte(o.HandshakeType.server_hello),r.putInt24(i),r.putByte(t.version.major),r.putByte(t.version.minor),r.putBytes(t.session.sp.server_random),s(r,1,e.util.createBuffer(n)),r.putByte(t.session.cipherSuite.id[0]),r.putByte(t.session.cipherSuite.id[1]),r.putByte(t.session.compressionMethod),r},o.createCertificate=function(t){var n=t.entity===o.ConnectionEnd.client,i=null;if(t.getCertificate){var r;r=n?t.session.certificateRequest:t.session.extensions.server_name.serverNameList,i=t.getCertificate(t,r)}var a=e.util.createBuffer();if(null!==i)try{e.util.isArray(i)||(i=[i]);for(var l=null,u=0;u<i.length;++u){var c=e.pem.decode(i[u])[0];if("CERTIFICATE"!==c.type&&"X509 CERTIFICATE"!==c.type&&"TRUSTED CERTIFICATE"!==c.type){var f=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw f.headerType=c.type,f}if(c.procType&&"ENCRYPTED"===c.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var d=e.util.createBuffer(c.body);null===l&&(l=e.asn1.fromDer(d.bytes(),!1));var p=e.util.createBuffer();s(p,3,d),a.putBuffer(p)}i=e.pki.certificateFromAsn1(l),n?t.session.clientCertificate=i:t.session.serverCertificate=i}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.bad_certificate}})}var g=3+a.length(),y=e.util.createBuffer();return y.putByte(o.HandshakeType.certificate),y.putInt24(g),s(y,3,a),y},o.createClientKeyExchange=function(t){var n=e.util.createBuffer();n.putByte(t.session.clientHelloVersion.major),n.putByte(t.session.clientHelloVersion.minor),n.putBytes(e.random.getBytes(46));var i=t.session.sp;i.pre_master_secret=n.getBytes();var r=t.session.serverCertificate.publicKey;n=r.encrypt(i.pre_master_secret);var a=n.length+2,s=e.util.createBuffer();return s.putByte(o.HandshakeType.client_key_exchange),s.putInt24(a),s.putInt16(n.length),s.putBytes(n),s},o.createServerKeyExchange=function(t){var n=0,i=e.util.createBuffer();return n>0&&(i.putByte(o.HandshakeType.server_key_exchange),i.putInt24(n)),i},o.getClientSignature=function(t,n){var i=e.util.createBuffer();i.putBuffer(t.session.md5.digest()),i.putBuffer(t.session.sha1.digest()),i=i.getBytes(),t.getSignature=t.getSignature||function(t,n,i){var r=null;if(t.getPrivateKey)try{r=t.getPrivateKey(t,t.session.clientCertificate),r=e.pki.privateKeyFromPem(r)}catch(a){t.error(t,{message:"Could not get private key.",cause:a,send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.internal_error}})}null===r?t.error(t,{message:"No private key set.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.internal_error}}):n=r.sign(n,null),i(t,n)},t.getSignature(t,i,n)},o.createCertificateVerify=function(t,n){var i=n.length+2,r=e.util.createBuffer();return r.putByte(o.HandshakeType.certificate_verify),r.putInt24(i),r.putInt16(n.length),r.putBytes(n),r},o.createCertificateRequest=function(t){var n=e.util.createBuffer();n.putByte(1);var i=e.util.createBuffer();for(var r in t.caStore.certs){var a=t.caStore.certs[r],l=e.pki.distinguishedNameToAsn1(a.subject),u=e.asn1.toDer(l);i.putInt16(u.length()),i.putBuffer(u)}var c=1+n.length()+2+i.length(),f=e.util.createBuffer();return f.putByte(o.HandshakeType.certificate_request),f.putInt24(c),s(f,1,n),s(f,2,i),f},o.createServerHelloDone=function(t){var n=e.util.createBuffer();return n.putByte(o.HandshakeType.server_hello_done),n.putInt24(0),n},o.createChangeCipherSpec=function(){var t=e.util.createBuffer();return t.putByte(1),t},o.createFinished=function(n){var i=e.util.createBuffer();i.putBuffer(n.session.md5.digest()),i.putBuffer(n.session.sha1.digest());var r=n.entity===o.ConnectionEnd.client,a=n.session.sp,s=12,l=t,u=r?"client finished":"server finished";i=l(a.master_secret,u,i.getBytes(),s);var c=e.util.createBuffer();return c.putByte(o.HandshakeType.finished),c.putInt24(i.length()),c.putBuffer(i),c},o.createHeartbeat=function(t,n,i){"undefined"==typeof i&&(i=n.length);var r=e.util.createBuffer();r.putByte(t),r.putInt16(i),r.putBytes(n);var a=r.length(),s=Math.max(16,a-i-3);return r.putBytes(e.random.getBytes(s)),r},o.queue=function(t,n){if(n&&(0!==n.fragment.length()||n.type!==o.ContentType.handshake&&n.type!==o.ContentType.alert&&n.type!==o.ContentType.change_cipher_spec)){if(n.type===o.ContentType.handshake){var i=n.fragment.bytes();t.session.md5.update(i),t.session.sha1.update(i),i=null}var r;if(n.fragment.length()<=o.MaxFragment)r=[n];else{r=[];for(var a=n.fragment.bytes();a.length>o.MaxFragment;)r.push(o.createRecord(t,{type:n.type,data:e.util.createBuffer(a.slice(0,o.MaxFragment))})),a=a.slice(o.MaxFragment);a.length>0&&r.push(o.createRecord(t,{type:n.type,data:e.util.createBuffer(a)}))}for(var s=0;s<r.length&&!t.fail;++s){var l=r[s],u=t.state.current.write;u.update(t,l)&&t.records.push(l)}}},o.flush=function(e){for(var t=0;t<e.records.length;++t){var n=e.records[t];e.tlsData.putByte(n.type),e.tlsData.putByte(n.version.major),e.tlsData.putByte(n.version.minor),e.tlsData.putInt16(n.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var M=function(t){switch(t){case!0:return!0;case e.pki.certificateError.bad_certificate:return o.Alert.Description.bad_certificate;case e.pki.certificateError.unsupported_certificate:return o.Alert.Description.unsupported_certificate;case e.pki.certificateError.certificate_revoked:return o.Alert.Description.certificate_revoked;case e.pki.certificateError.certificate_expired:return o.Alert.Description.certificate_expired;case e.pki.certificateError.certificate_unknown:return o.Alert.Description.certificate_unknown;case e.pki.certificateError.unknown_ca:return o.Alert.Description.unknown_ca;default:return o.Alert.Description.bad_certificate}},j=function(t){switch(t){case!0:return!0;case o.Alert.Description.bad_certificate:return e.pki.certificateError.bad_certificate;case o.Alert.Description.unsupported_certificate:return e.pki.certificateError.unsupported_certificate;case o.Alert.Description.certificate_revoked:return e.pki.certificateError.certificate_revoked;case o.Alert.Description.certificate_expired:return e.pki.certificateError.certificate_expired;case o.Alert.Description.certificate_unknown:return e.pki.certificateError.certificate_unknown;case o.Alert.Description.unknown_ca:return e.pki.certificateError.unknown_ca;default:return e.pki.certificateError.bad_certificate}};o.verifyCertificateChain=function(t,n){try{e.pki.verifyCertificateChain(t.caStore,n,function(n,i,r){var a=(M(n),t.verify(t,n,i,r));if(a!==!0){if("object"==typeof a&&!e.util.isArray(a)){var s=new Error("The application rejected the certificate.");throw s.send=!0,s.alert={level:o.Alert.Level.fatal,description:o.Alert.Description.bad_certificate},a.message&&(s.message=a.message),a.alert&&(s.alert.description=a.alert),s}a!==n&&(a=j(a))}return a})}catch(i){var r=i;("object"!=typeof r||e.util.isArray(r))&&(r={send:!0,alert:{level:o.Alert.Level.fatal,description:M(i)}}),"send"in r||(r.send=!0),"alert"in r||(r.alert={level:o.Alert.Level.fatal,description:M(r.error)}),t.error(t,r)}return!t.fail},o.createSessionCache=function(t,n){var i=null;if(t&&t.getSession&&t.setSession&&t.order)i=t;else{i={},i.cache=t||{},i.capacity=Math.max(n||100,1),i.order=[];for(var r in t)i.order.length<=n?i.order.push(r):delete t[r];i.getSession=function(t){var n=null,r=null;if(t?r=e.util.bytesToHex(t):i.order.length>0&&(r=i.order[0]),null!==r&&r in i.cache){n=i.cache[r],delete i.cache[r];for(var a in i.order)if(i.order[a]===r){i.order.splice(a,1);break}}return n},i.setSession=function(t,n){if(i.order.length===i.capacity){var r=i.order.shift();delete i.cache[r]}var r=e.util.bytesToHex(t);i.order.push(r),i.cache[r]=n}}return i},o.createConnection=function(t){var n=null;n=t.caStore?e.util.isArray(t.caStore)?e.pki.createCaStore(t.caStore):t.caStore:e.pki.createCaStore();var i=t.cipherSuites||null;if(null===i){i=[];for(var r in o.CipherSuites)i.push(o.CipherSuites[r])}var a=t.server?o.ConnectionEnd.server:o.ConnectionEnd.client,s=t.sessionCache?o.createSessionCache(t.sessionCache):null,u={version:{major:o.Version.major,minor:o.Version.minor},entity:a,sessionId:t.sessionId,caStore:n,sessionCache:s,cipherSuites:i,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(e,t,n,i){return t},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:e.util.createBuffer(),tlsData:e.util.createBuffer(),data:e.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(e,n){n.origin=n.origin||(e.entity===o.ConnectionEnd.client?"client":"server"),n.send&&(o.queue(e,o.createAlert(e,n.alert)),o.flush(e));var i=n.fatal!==!1;i&&(e.fail=!0),t.error(e,n),i&&e.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};u.reset=function(e){u.version={major:o.Version.major,minor:o.Version.minor},u.record=null,u.session=null,u.peerCertificate=null,u.state={pending:null,current:null},u.expect=u.entity===o.ConnectionEnd.client?l:m,u.fragmented=null,u.records=[],u.open=!1,u.handshakes=0,u.handshaking=!1,u.isConnected=!1,u.fail=!(e||"undefined"==typeof e),u.input.clear(),u.tlsData.clear(),u.data.clear(),u.state.current=o.createConnectionState(u)},u.reset();var c=function(e,t){var n=t.type-o.ContentType.change_cipher_spec,i=N[e.entity][e.expect];n in i?i[n](e,t):o.handleUnexpected(e,t)},f=function(t){var n=0,i=t.input,r=i.length();if(r<5)n=5-r;else{t.record={type:i.getByte(),version:{major:i.getByte(),minor:i.getByte()},length:i.getInt16(),fragment:e.util.createBuffer(),ready:!1};var a=t.record.version.major===t.version.major;a&&t.session&&t.session.version&&(a=t.record.version.minor===t.version.minor),a||t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.protocol_version}})}return n},d=function(e){var t=0,n=e.input,i=n.length();if(i<e.record.length)t=e.record.length-i;else{e.record.fragment.putBytes(n.getBytes(e.record.length)),n.compact();var r=e.state.current.read;r.update(e,e.record)&&(null!==e.fragmented&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:"Invalid fragmented record.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.unexpected_message}})),e.record.ready=!0)}return t};return u.handshake=function(t){if(u.entity!==o.ConnectionEnd.client)u.error(u,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(u.handshaking)u.error(u,{message:"Handshake already in progress.",fatal:!1});else{u.fail&&!u.open&&0===u.handshakes&&(u.fail=!1),u.handshaking=!0,t=t||"";var n=null;t.length>0&&(u.sessionCache&&(n=u.sessionCache.getSession(t)),null===n&&(t="")),0===t.length&&u.sessionCache&&(n=u.sessionCache.getSession(),null!==n&&(t=n.id)),u.session={id:t,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:e.md.md5.create(),sha1:e.md.sha1.create()},n&&(u.version=n.version,u.session.sp=n.sp),u.session.sp.client_random=o.createRandom().getBytes(),u.open=!0,o.queue(u,o.createRecord(u,{type:o.ContentType.handshake,data:o.createClientHello(u)})),o.flush(u)}},u.process=function(e){var t=0;return e&&u.input.putBytes(e),u.fail||(null!==u.record&&u.record.ready&&u.record.fragment.isEmpty()&&(u.record=null),null===u.record&&(t=f(u)),u.fail||null===u.record||u.record.ready||(t=d(u)),!u.fail&&null!==u.record&&u.record.ready&&c(u,u.record)),t},u.prepare=function(t){return o.queue(u,o.createRecord(u,{type:o.ContentType.application_data,data:e.util.createBuffer(t)})),o.flush(u)},u.prepareHeartbeatRequest=function(t,n){return t instanceof e.util.ByteBuffer&&(t=t.bytes()),"undefined"==typeof n&&(n=t.length),u.expectedHeartbeatPayload=t,o.queue(u,o.createRecord(u,{type:o.ContentType.heartbeat,data:o.createHeartbeat(o.HeartbeatMessageType.heartbeat_request,t,n)})),o.flush(u)},u.close=function(e){if(!u.fail&&u.sessionCache&&u.session){var t={id:u.session.id,version:u.session.version,sp:u.session.sp};t.sp.keys=null,u.sessionCache.setSession(t.id,t)}u.open&&(u.open=!1,u.input.clear(),(u.isConnected||u.handshaking)&&(u.isConnected=u.handshaking=!1,o.queue(u,o.createAlert(u,{level:o.Alert.Level.warning,description:o.Alert.Description.close_notify})),o.flush(u)),u.closed(u)),u.reset(e)},u},e.tls=e.tls||{};for(var q in o)"function"!=typeof o[q]&&(e.tls[q]=o[q]);e.tls.prf_tls1=t,e.tls.hmac_sha1=n,e.tls.createSessionCache=o.createSessionCache,e.tls.createConnection=o.createConnection}var i="tls";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/tls",["require","module","./asn1","./hmac","./md","./pem","./pki","./random","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,i,r){var s=i.entity===e.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:e.cipher.createDecipher("AES-CBC",s?r.keys.server_write_key:r.keys.client_write_key),iv:s?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:e.cipher.createCipher("AES-CBC",s?r.keys.client_write_key:r.keys.server_write_key),iv:s?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=a,t.write.cipherFunction=n,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=o.hmac_sha1}function n(t,n){var r=!1,a=n.macFunction(n.macKey,n.sequenceNumber,t);t.fragment.putBytes(a),n.updateSequenceNumber();var s;s=t.version.minor===o.Versions.TLS_1_0.minor?n.cipherState.init?null:n.cipherState.iv:e.random.getBytesSync(16),n.cipherState.init=!0;var l=n.cipherState.cipher;return l.start({iv:s}),t.version.minor>=o.Versions.TLS_1_1.minor&&l.output.putBytes(s),l.update(t.fragment),l.finish(i)&&(t.fragment=l.output,t.length=t.fragment.length(),r=!0),r}function i(e,t,n){if(!n){var i=e-t.length()%e;t.fillWithByte(i-1,i)}return!0}function r(e,t,n){var i=!0;if(n){for(var r=t.length(),a=t.last(),s=r-1-a;s<r-1;++s)i=i&&t.at(s)==a;i&&t.truncate(a+1)}return i}function a(t,n){var i=!1;++l;var a;a=t.version.minor===o.Versions.TLS_1_0.minor?n.cipherState.init?null:n.cipherState.iv:t.fragment.getBytes(16),n.cipherState.init=!0;var u=n.cipherState.cipher;u.start({iv:a}),u.update(t.fragment),i=u.finish(r);var c=n.macLength,f=e.random.getBytesSync(c),d=u.output.length();d>=c?(t.fragment=u.output.getBytes(d-c),f=u.output.getBytes(c)):t.fragment=u.output.getBytes(),t.fragment=e.util.createBuffer(t.fragment),t.length=t.fragment.length();var p=n.macFunction(n.macKey,n.sequenceNumber,t);return n.updateSequenceNumber(),i=s(n.macKey,f,p)&&i}function s(t,n,i){var r=e.hmac.create();return r.start("SHA1",t),r.update(n),n=r.digest().getBytes(),r.start(null,null),r.update(i),i=r.digest().getBytes(),
n===i}var o=e.tls;o.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=o.BulkCipherAlgorithm.aes,e.cipher_type=o.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=o.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:t},o.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=o.BulkCipherAlgorithm.aes,e.cipher_type=o.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=o.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:t};var l=0}var i="aesCipherSuites";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/aesCipherSuites",["require","module","./aes","./tls"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.debug=e.debug||{},e.debug.storage={},e.debug.get=function(t,n){var i;return"undefined"==typeof t?i=e.debug.storage:t in e.debug.storage&&(i="undefined"==typeof n?e.debug.storage[t]:e.debug.storage[t][n]),i},e.debug.set=function(t,n,i){t in e.debug.storage||(e.debug.storage[t]={}),e.debug.storage[t][n]=i},e.debug.clear=function(t,n){"undefined"==typeof t?e.debug.storage={}:t in e.debug.storage&&("undefined"==typeof n?delete e.debug.storage[t]:delete e.debug.storage[t][n])}}var i="debug";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/debug",["require","module"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,n,i,r){t.generate=function(t,a){for(var s=new e.util.ByteBuffer,o=Math.ceil(a/r)+i,l=new e.util.ByteBuffer,u=i;u<o;++u){l.putInt32(u),n.start(),n.update(t+l.getBytes());var c=n.digest();s.putBytes(c.getBytes(r))}return s.truncate(s.length()-a),s.getBytes()}}e.kem=e.kem||{};var n=e.jsbn.BigInteger;e.kem.rsa={},e.kem.rsa.create=function(t,i){i=i||{};var r=i.prng||e.random,a={};return a.encrypt=function(i,a){var s,o=Math.ceil(i.n.bitLength()/8);do s=new n(e.util.bytesToHex(r.getBytesSync(o)),16).mod(i.n);while(s.equals(n.ZERO));s=e.util.hexToBytes(s.toString(16));var l=o-s.length;l>0&&(s=e.util.fillString(String.fromCharCode(0),l)+s);var u=i.encrypt(s,"NONE"),c=t.generate(s,a);return{encapsulation:u,key:c}},a.decrypt=function(e,n,i){var r=e.decrypt(n,"NONE");return t.generate(r,i)},a},e.kem.kdf1=function(e,n){t(this,e,0,n||e.digestLength)},e.kem.kdf2=function(e,n){t(this,e,1,n||e.digestLength)}}var i="kem";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/kem",["require","module","./util","./random","./jsbn"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.log=e.log||{},e.log.levels=["none","error","warning","info","debug","verbose","max"];var t={},n=[],i=null;e.log.LEVEL_LOCKED=2,e.log.NO_LEVEL_CHECK=4,e.log.INTERPOLATE=8;for(var r=0;r<e.log.levels.length;++r){var a=e.log.levels[r];t[a]={index:r,name:a.toUpperCase()}}e.log.logMessage=function(i){for(var r=t[i.level].index,a=0;a<n.length;++a){var s=n[a];if(s.flags&e.log.NO_LEVEL_CHECK)s.f(i);else{var o=t[s.level].index;r<=o&&s.f(s,i)}}},e.log.prepareStandard=function(e){"standard"in e||(e.standard=t[e.level].name+" ["+e.category+"] "+e.message)},e.log.prepareFull=function(t){if(!("full"in t)){var n=[t.message];n=n.concat([]||t.arguments),t.full=e.util.format.apply(this,n)}},e.log.prepareStandardFull=function(t){"standardFull"in t||(e.log.prepareStandard(t),t.standardFull=t.standard)};for(var s=["error","warning","info","debug","verbose"],r=0;r<s.length;++r)!function(t){e.log[t]=function(n,i){var r=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:t,category:n,message:i,arguments:r};e.log.logMessage(a)}}(s[r]);if(e.log.makeLogger=function(t){var n={flags:0,f:t};return e.log.setLevel(n,"none"),n},e.log.setLevel=function(t,n){var i=!1;if(t&&!(t.flags&e.log.LEVEL_LOCKED))for(var r=0;r<e.log.levels.length;++r){var a=e.log.levels[r];if(n==a){t.level=n,i=!0;break}}return i},e.log.lock=function(t,n){"undefined"==typeof n||n?t.flags|=e.log.LEVEL_LOCKED:t.flags&=~e.log.LEVEL_LOCKED},e.log.addLogger=function(e){n.push(e)},"undefined"!=typeof console&&"log"in console){var o;if(console.error&&console.warn&&console.info&&console.debug){var l={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},u=function(t,n){e.log.prepareStandard(n);var i=l[n.level],r=[n.standard];r=r.concat(n.arguments.slice()),i.apply(console,r)};o=e.log.makeLogger(u)}else{var u=function(t,n){e.log.prepareStandardFull(n),console.log(n.standardFull)};o=e.log.makeLogger(u)}e.log.setLevel(o,"debug"),e.log.addLogger(o),i=o}else console={log:function(){}};if(null!==i){var c=e.util.getQueryVariables();if("console.level"in c&&e.log.setLevel(i,c["console.level"].slice(-1)[0]),"console.lock"in c){var f=c["console.lock"].slice(-1)[0];"true"==f&&e.log.lock(i)}}e.log.consoleLogger=i}var i="log";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/log",["require","module","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t){var n={},i=[];if(!f.validate(t,d.asn1.recipientInfoValidator,n,i)){var r=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw r.errors=i,r}return{version:n.version.charCodeAt(0),issuer:e.pki.RDNAttributesAsArray(n.issuer),serialNumber:e.util.createBuffer(n.serial).toHex(),encryptedContent:{algorithm:f.derToOid(n.encAlgorithm),parameter:n.encParameter.value,content:n.encKey}}}function n(t){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(t.version).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:t.issuer}),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,e.util.hexToBytes(t.serialNumber))]),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.encryptedContent.algorithm).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")]),f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function i(e){for(var n=[],i=0;i<e.length;++i)n.push(t(e[i]));return n}function r(e){for(var t=[],i=0;i<e.length;++i)t.push(n(e[i]));return t}function a(t){var n=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(t.version).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:t.issuer}),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,e.util.hexToBytes(t.serialNumber))]),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.digestAlgorithm).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&n.value.push(t.authenticatedAttributesAsn1),n.value.push(f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.signatureAlgorithm).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")])),n.value.push(f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var i=f.create(f.Class.CONTEXT_SPECIFIC,1,!0,[]),r=0;r<t.unauthenticatedAttributes.length;++r){var a=t.unauthenticatedAttributes[r];i.values.push(o(a))}n.value.push(i)}return n}function s(e){for(var t=[],n=0;n<e.length;++n)t.push(a(e[n]));return t}function o(t){var n;if(t.type===e.pki.oids.contentType)n=f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.value).getBytes());else if(t.type===e.pki.oids.messageDigest)n=f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===e.pki.oids.signingTime){var i=new Date("1950-01-01T00:00:00Z"),r=new Date("2050-01-01T00:00:00Z"),a=t.value;if("string"==typeof a){var s=Date.parse(a);a=isNaN(s)?13===a.length?f.utcTimeToDate(a):f.generalizedTimeToDate(a):new Date(s)}n=a>=i&&a<r?f.create(f.Class.UNIVERSAL,f.Type.UTCTIME,!1,f.dateToUtcTime(a)):f.create(f.Class.UNIVERSAL,f.Type.GENERALIZEDTIME,!1,f.dateToGeneralizedTime(a))}return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.type).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SET,!0,[n])])}function l(t){return[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e.pki.oids.data).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.algorithm).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,t.parameter.getBytes())]),f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,t.content.getBytes())])]}function u(t,n,i){var r={},a=[];if(!f.validate(n,i,r,a)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var o=f.derToOid(r.contentType);if(o!==e.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(r.encryptedContent){var l="";if(e.util.isArray(r.encryptedContent))for(var u=0;u<r.encryptedContent.length;++u){if(r.encryptedContent[u].type!==f.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=r.encryptedContent[u].value}else l=r.encryptedContent;t.encryptedContent={algorithm:f.derToOid(r.encAlgorithm),parameter:e.util.createBuffer(r.encParameter.value),content:e.util.createBuffer(l)}}if(r.content){var l="";if(e.util.isArray(r.content))for(var u=0;u<r.content.length;++u){if(r.content[u].type!==f.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=r.content[u].value}else l=r.content;t.content=e.util.createBuffer(l)}return t.version=r.version.charCodeAt(0),t.rawCapture=r,r}function c(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var n;switch(t.encryptedContent.algorithm){case e.pki.oids["aes128-CBC"]:case e.pki.oids["aes192-CBC"]:case e.pki.oids["aes256-CBC"]:n=e.aes.createDecryptionCipher(t.encryptedContent.key);break;case e.pki.oids.desCBC:case e.pki.oids["des-EDE3-CBC"]:n=e.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(n.start(t.encryptedContent.parameter),n.update(t.encryptedContent.content),!n.finish())throw new Error("Symmetric decryption failed.");t.content=n.output}}var f=e.asn1,d=e.pkcs7=e.pkcs7||{};d.messageFromPem=function(t){var n=e.pem.decode(t)[0];if("PKCS7"!==n.type){var i=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var r=f.fromDer(n.body);return d.messageFromAsn1(r)},d.messageToPem=function(t,n){var i={type:"PKCS7",body:f.toDer(t.toAsn1()).getBytes()};return e.pem.encode(i,{maxline:n})},d.messageFromAsn1=function(t){var n={},i=[];if(!f.validate(t,d.asn1.contentInfoValidator,n,i)){var r=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw r.errors=i,r}var a,s=f.derToOid(n.contentType);switch(s){case e.pki.oids.envelopedData:a=d.createEnvelopedData();break;case e.pki.oids.encryptedData:a=d.createEncryptedData();break;case e.pki.oids.signedData:a=d.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+s+" is not (yet) supported.")}return a.fromAsn1(n.content.value[0]),a},d.createSignedData=function(){function t(){for(var t={},n=0;n<i.signers.length;++n){var r=i.signers[n],a=r.digestAlgorithm;a in t||(t[a]=e.md[e.pki.oids[a]].create()),0===r.authenticatedAttributes.length?r.md=t[a]:r.md=e.md[e.pki.oids[a]].create()}i.digestAlgorithmIdentifiers=[];for(var a in t)i.digestAlgorithmIdentifiers.push(f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(a).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")]));return t}function n(t){if(i.contentInfo.value.length<2)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var n=f.derToOid(i.contentInfo.value[0].value),r=i.contentInfo.value[1];r=r.value[0];var a=f.toDer(r);a.getByte(),f.getBerValueLength(a),a=a.getBytes();for(var l in t)t[l].start().update(a);for(var u=new Date,c=0;c<i.signers.length;++c){var d=i.signers[c];if(0===d.authenticatedAttributes.length){if(n!==e.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=f.create(f.Class.UNIVERSAL,f.Type.SET,!0,[]),h=0;h<d.authenticatedAttributes.length;++h){var g=d.authenticatedAttributes[h];g.type===e.pki.oids.messageDigest?g.value=t[d.digestAlgorithm].digest():g.type===e.pki.oids.signingTime&&(g.value||(g.value=u)),p.value.push(o(g)),d.authenticatedAttributesAsn1.value.push(o(g))}a=f.toDer(p).getBytes(),d.md.start().update(a)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}i.signerInfos=s(i.signers)}var i=null;return i={type:e.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){u(i,t,d.asn1.signedDataValidator),i.certificates=[],i.crls=[],i.digestAlgorithmIdentifiers=[],i.contentInfo=null,i.signerInfos=[];for(var n=i.rawCapture.certificates.value,r=0;r<n.length;++r)i.certificates.push(e.pki.certificateFromAsn1(n[r]))},toAsn1:function(){i.contentInfo||i.sign();for(var t=[],n=0;n<i.certificates.length;++n)t.push(e.pki.certificateToAsn1(i.certificates[n]));var r=[],a=f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(i.version).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SET,!0,i.digestAlgorithmIdentifiers),i.contentInfo])]);return t.length>0&&a.value[0].value.push(f.create(f.Class.CONTEXT_SPECIFIC,0,!0,t)),r.length>0&&a.value[0].value.push(f.create(f.Class.CONTEXT_SPECIFIC,1,!0,r)),a.value[0].value.push(f.create(f.Class.UNIVERSAL,f.Type.SET,!0,i.signerInfos)),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(i.type).getBytes()),a])},addSigner:function(t){var n=t.issuer,r=t.serialNumber;if(t.certificate){var a=t.certificate;"string"==typeof a&&(a=e.pki.certificateFromPem(a)),n=a.issuer.attributes,r=a.serialNumber}var s=t.key;if(!s)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof s&&(s=e.pki.privateKeyFromPem(s));var o=t.digestAlgorithm||e.pki.oids.sha1;switch(o){case e.pki.oids.sha1:case e.pki.oids.sha256:case e.pki.oids.sha384:case e.pki.oids.sha512:case e.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+o)}var l=t.authenticatedAttributes||[];if(l.length>0){for(var u=!1,c=!1,f=0;f<l.length;++f){var d=l[f];if(u||d.type!==e.pki.oids.contentType){if(c||d.type!==e.pki.oids.messageDigest);else if(c=!0,u)break}else if(u=!0,c)break}if(!u||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}i.signers.push({key:s,version:1,issuer:n,serialNumber:r,digestAlgorithm:o,signatureAlgorithm:e.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:l,unauthenticatedAttributes:[]})},sign:function(){if(("object"!=typeof i.content||null===i.contentInfo)&&(i.contentInfo=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e.pki.oids.data).getBytes())]),"content"in i)){var r;i.content instanceof e.util.ByteBuffer?r=i.content.bytes():"string"==typeof i.content&&(r=e.util.encodeUtf8(i.content)),i.contentInfo.value.push(f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,r)]))}if(0!==i.signers.length){var a=t();n(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=e.pki.certificateFromPem(t)),i.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},d.createEncryptedData=function(){var t=null;return t={type:e.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(e){u(t,e,d.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),c(t)}}},d.createEnvelopedData=function(){var t=null;return t={type:e.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(e){var n=u(t,e,d.asn1.envelopedDataValidator);t.recipients=i(n.recipientInfos.value)},toAsn1:function(){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.type).getBytes()),f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(t.version).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SET,!0,r(t.recipients)),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,l(t.encryptedContent))])])])},findRecipient:function(e){for(var n=e.issuer.attributes,i=0;i<t.recipients.length;++i){var r=t.recipients[i],a=r.issuer;if(r.serialNumber===e.serialNumber&&a.length===n.length){for(var s=!0,o=0;o<n.length;++o)if(a[o].type!==n[o].type||a[o].value!==n[o].value){s=!1;break}if(s)return r}}return null},decrypt:function(n,i){if(void 0===t.encryptedContent.key&&void 0!==n&&void 0!==i)switch(n.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:case e.pki.oids.desCBC:var r=i.decrypt(n.encryptedContent.content);t.encryptedContent.key=e.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+n.encryptedContent.algorithm)}c(t)},addRecipient:function(n){t.recipients.push({version:0,issuer:n.issuer.attributes,serialNumber:n.serialNumber,encryptedContent:{algorithm:e.pki.oids.rsaEncryption,key:n.publicKey}})},encrypt:function(n,i){if(void 0===t.encryptedContent.content){i=i||t.encryptedContent.algorithm,n=n||t.encryptedContent.key;var r,a,s;switch(i){case e.pki.oids["aes128-CBC"]:r=16,a=16,s=e.aes.createEncryptionCipher;break;case e.pki.oids["aes192-CBC"]:r=24,a=16,s=e.aes.createEncryptionCipher;break;case e.pki.oids["aes256-CBC"]:r=32,a=16,s=e.aes.createEncryptionCipher;break;case e.pki.oids["des-EDE3-CBC"]:r=24,a=8,s=e.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+i)}if(void 0===n)n=e.util.createBuffer(e.random.getBytes(r));else if(n.length()!=r)throw new Error("Symmetric key has wrong length; got "+n.length()+" bytes, expected "+r+".");t.encryptedContent.algorithm=i,t.encryptedContent.key=n,t.encryptedContent.parameter=e.util.createBuffer(e.random.getBytes(a));var o=s(n);if(o.start(t.encryptedContent.parameter.copy()),o.update(t.content),!o.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=o.output}for(var l=0;l<t.recipients.length;++l){var u=t.recipients[l];if(void 0===u.encryptedContent.content)switch(u.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}}}}var i="pkcs7";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/pkcs7",["require","module","./aes","./asn1","./des","./oids","./pem","./pkcs7asn1","./random","./util","./x509"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,n){var i=n.toString(16);i[0]>="8"&&(i="00"+i);var r=e.util.hexToBytes(i);t.putInt32(r.length),t.putBytes(r)}function n(e,t){e.putInt32(t.length),e.putString(t)}function i(){for(var t=e.md.sha1.create(),n=arguments.length,i=0;i<n;++i)t.update(arguments[i]);return t.digest()}var r=e.ssh=e.ssh||{};r.privateKeyToPutty=function(r,a,s){s=s||"",a=a||"";var o="ssh-rsa",l=""===a?"none":"aes256-cbc",u="PuTTY-User-Key-File-2: "+o+"\r\n";u+="Encryption: "+l+"\r\n",u+="Comment: "+s+"\r\n";var c=e.util.createBuffer();n(c,o),t(c,r.e),t(c,r.n);var f=e.util.encode64(c.bytes(),64),d=Math.floor(f.length/66)+1;u+="Public-Lines: "+d+"\r\n",u+=f;var p=e.util.createBuffer();t(p,r.d),t(p,r.p),t(p,r.q),t(p,r.qInv);var h;if(a){var g=p.length()+16-1;g-=g%16;var y=i(p.bytes());y.truncate(y.length()-g+p.length()),p.putBuffer(y);var m=e.util.createBuffer();m.putBuffer(i("\0\0\0\0",a)),m.putBuffer(i("\0\0\0",a));var v=e.aes.createEncryptionCipher(m.truncate(8),"CBC");v.start(e.util.createBuffer().fillWithByte(0,16)),v.update(p.copy()),v.finish();var C=v.output;C.truncate(16),h=e.util.encode64(C.bytes(),64)}else h=e.util.encode64(p.bytes(),64);d=Math.floor(h.length/66)+1,u+="\r\nPrivate-Lines: "+d+"\r\n",u+=h;var b=i("putty-private-key-file-mac-key",a),E=e.util.createBuffer();n(E,o),n(E,l),n(E,s),E.putInt32(c.length()),E.putBuffer(c),E.putInt32(p.length()),E.putBuffer(p);var S=e.hmac.create();return S.start("sha1",b),S.update(E.bytes()),u+="\r\nPrivate-MAC: "+S.digest().toHex()+"\r\n"},r.publicKeyToOpenSSH=function(i,r){var a="ssh-rsa";r=r||"";var s=e.util.createBuffer();return n(s,a),t(s,i.e),t(s,i.n),a+" "+e.util.encode64(s.bytes())+" "+r},r.privateKeyToOpenSSH=function(t,n){return n?e.pki.encryptRsaPrivateKey(t,n,{legacy:!0,algorithm:"aes128"}):e.pki.privateKeyToPem(t)},r.getPublicKeyFingerprint=function(i,r){r=r||{};var a=r.md||e.md.md5.create(),s="ssh-rsa",o=e.util.createBuffer();n(o,s),t(o,i.e),t(o,i.n),a.start(),a.update(o.getBytes());var l=a.digest();if("hex"===r.encoding){var u=l.toHex();return r.delimiter?u.match(/.{2}/g).join(r.delimiter):u}if("binary"===r.encoding)return l.getBytes();if(r.encoding)throw new Error('Unknown encoding "'+r.encoding+'".');return l}}var i="ssh";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/ssh",["require","module","./aes","./hmac","./md5","./sha1","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t="forge.task",n=0,i={},r=0;e.debug.set(t,"tasks",i);var a={};e.debug.set(t,"queues",a);var s="?",o=30,l=20,u="ready",c="running",f="blocked",d="sleeping",p="done",h="error",g="stop",y="start",m="block",v="unblock",C="sleep",b="wakeup",E="cancel",S="fail",T={};T[u]={},T[u][g]=u,T[u][y]=c,T[u][E]=p,T[u][S]=h,T[c]={},T[c][g]=u,T[c][y]=c,T[c][m]=f,T[c][v]=c,T[c][C]=d,T[c][b]=c,T[c][E]=p,T[c][S]=h,T[f]={},T[f][g]=f,T[f][y]=f,T[f][m]=f,T[f][v]=f,T[f][C]=f,T[f][b]=f,T[f][E]=p,T[f][S]=h,T[d]={},T[d][g]=d,T[d][y]=d,T[d][m]=d,T[d][v]=d,T[d][C]=d,T[d][b]=d,T[d][E]=p,T[d][S]=h,T[p]={},T[p][g]=p,T[p][y]=p,T[p][m]=p,T[p][v]=p,T[p][C]=p,T[p][b]=p,T[p][E]=p,T[p][S]=h,T[h]={},T[h][g]=h,T[h][y]=h,T[h][m]=h,T[h][v]=h,T[h][C]=h,T[h][b]=h,T[h][E]=h,T[h][S]=h;var w=function(a){this.id=-1,this.name=a.name||s,this.parent=a.parent||null,this.run=a.run,this.subtasks=[],this.error=!1,this.state=u,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=r++,i[this.id]=this,n>=1&&e.log.verbose(t,"[%s][%s] init",this.id,this.name,this)};w.prototype.debug=function(n){n=n||"",e.log.debug(t,n,"[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",a)},w.prototype.next=function(e,t){"function"==typeof e&&(t=e,e=this.name);var n=new w({run:t,name:e,parent:this});return n.state=c,n.type=this.type,n.successCallback=this.successCallback||null,n.failureCallback=this.failureCallback||null,this.subtasks.push(n),this},w.prototype.parallel=function(t,n){return e.util.isArray(t)&&(n=t,t=this.name),this.next(t,function(i){var r=i;r.block(n.length);for(var a=function(t,i){e.task.start({type:t,run:function(e){n[i](e)},success:function(e){r.unblock()},failure:function(e){r.unblock()}})},s=0;s<n.length;s++){var o=t+"__parallel-"+i.id+"-"+s,l=s;a(o,l)}})},w.prototype.stop=function(){this.state=T[this.state][g]},w.prototype.start=function(){this.error=!1,this.state=T[this.state][y],this.state===c&&(this.start=new Date,this.run(this),k(this,0))},w.prototype.block=function(e){e="undefined"==typeof e?1:e,this.blocks+=e,this.blocks>0&&(this.state=T[this.state][m])},w.prototype.unblock=function(e){return e="undefined"==typeof e?1:e,this.blocks-=e,0===this.blocks&&this.state!==p&&(this.state=c,k(this,0)),this.blocks},w.prototype.sleep=function(e){e="undefined"==typeof e?0:e,this.state=T[this.state][C];var t=this;this.timeoutId=setTimeout(function(){t.timeoutId=null,t.state=c,k(t,0)},e)},w.prototype.wait=function(e){e.wait(this)},w.prototype.wakeup=function(){this.state===d&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=c,k(this,0))},w.prototype.cancel=function(){this.state=T[this.state][E],this.permitsNeeded=0,null!==this.timeoutId&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},w.prototype.fail=function(e){if(this.error=!0,I(this,!0),e)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,k(e,0);else{if(null!==this.parent){for(var t=this.parent;null!==t.parent;)t.error=this.error,t.swapTime=this.swapTime,t.userData=this.userData,t=t.parent;I(t,!0)}this.failureCallback&&this.failureCallback(this)}};var A=function(e){e.error=!1,e.state=T[e.state][y],setTimeout(function(){e.state===c&&(e.swapTime=+new Date,e.run(e),k(e,0))},0)},k=function(e,t){var n=t>o||+new Date-e.swapTime>l,i=function(t){if(t++,e.state===c)if(n&&(e.swapTime=+new Date),e.subtasks.length>0){var i=e.subtasks.shift();i.error=e.error,i.swapTime=e.swapTime,i.userData=e.userData,i.run(i),i.error||k(i,t)}else I(e),e.error||null!==e.parent&&(e.parent.error=e.error,e.parent.swapTime=e.swapTime,e.parent.userData=e.userData,k(e.parent,t))};n?setTimeout(i,0):i(t)},I=function(r,s){r.state=p,delete i[r.id],n>=1&&e.log.verbose(t,"[%s][%s] finish",r.id,r.name,r),null===r.parent&&(r.type in a?0===a[r.type].length?e.log.error(t,"[%s][%s] task queue empty [%s]",r.id,r.name,r.type):a[r.type][0]!==r?e.log.error(t,"[%s][%s] task not first in queue [%s]",r.id,r.name,r.type):(a[r.type].shift(),0===a[r.type].length?(n>=1&&e.log.verbose(t,"[%s][%s] delete queue [%s]",r.id,r.name,r.type),delete a[r.type]):(n>=1&&e.log.verbose(t,"[%s][%s] queue start next [%s] remain:%s",r.id,r.name,r.type,a[r.type].length),a[r.type][0].start())):e.log.error(t,"[%s][%s] task queue missing [%s]",r.id,r.name,r.type),s||(r.error&&r.failureCallback?r.failureCallback(r):!r.error&&r.successCallback&&r.successCallback(r)))};e.task=e.task||{},e.task.start=function(i){var r=new w({run:i.run,name:i.name||s});r.type=i.type,r.successCallback=i.success||null,r.failureCallback=i.failure||null,r.type in a?a[i.type].push(r):(n>=1&&e.log.verbose(t,"[%s][%s] create queue [%s]",r.id,r.name,r.type),a[r.type]=[r],A(r))},e.task.cancel=function(e){e in a&&(a[e]=[a[e][0]])},e.task.createCondition=function(){var e={tasks:{}};return e.wait=function(t){t.id in e.tasks||(t.block(),e.tasks[t.id]=t)},e.notify=function(){var t=e.tasks;e.tasks={};for(var n in t)t[n].unblock()},e}}var i="task";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var r=!0;n=function(e,n){n(t,module)}}var a,s=function(t,n){n.exports=function(n){var r=a.map(function(e){return t(e)}).concat(e);if(n=n||{},n.defined=n.defined||{},n.defined[i])return n[i];n.defined[i]=!0;for(var s=0;s<r.length;++s)r[s](n);return n[i]}},o=n;(n=function(e,t){return a="string"==typeof e?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/task",["require","module","./debug","./log","./util"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){var e="forge";if("function"!=typeof n){if("object"!=typeof module||!module.exports)return void("undefined"==typeof forge&&(forge={disableNativeCode:!1}));var i=!0;n=function(e,n){n(t,module)}}var r,a=function(t,n){n.exports=function(n){var i=r.map(function(e){return t(e)});if(n=n||{},n.defined=n.defined||{},n.defined[e])return n[e];n.defined[e]=!0;for(var a=0;a<i.length;++a)"function"==typeof i[a]&&i[a](n);return n},n.exports.disableNativeCode=!1,n.exports(n.exports)},s=n;(n=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),i?(delete n,s.apply(null,Array.prototype.slice.call(arguments,0))):(n=s,n.apply(null,Array.prototype.slice.call(arguments,0)))})("js/forge",["require","module","./aes","./aesCipherSuites","./asn1","./cipher","./cipherModes","./debug","./des","./hmac","./kem","./log","./md","./mgf1","./pbkdf2","./pem","./pkcs7","./pkcs1","./pkcs12","./pki","./prime","./prng","./pss","./random","./rc2","./ssh","./task","./tls","./util"],function(){
a.apply(null,Array.prototype.slice.call(arguments,0))})}(),t("js/forge")}),$(document).foundation(),$(function(){var e=$("#encprivatekey"),t=$("#publickey"),n=$("#password"),i=$("#decrypt"),r=$("#privatekey"),a=$("#notes"),s=$("#text"),o=null,l=null;$.ajaxSettings=$.extend($.ajaxSettings,{error:function(e,t,n){console.error(n)}}),$.get("nsantos.pem",function(t){e.text(t)}),$.get("nsantos.pub",function(e){t.text(e)}),$.getJSON("notes.json",function(e){o=e,a.empty(),a.append($('<option value="">---</option>'));for(var t in o)if(o.hasOwnProperty(t)){var n=o[t];a.append($("<option></option>").val(t).html(n.title))}}),i.on("click",function(t){var i=e.text(),a=n.val();if(l=forge.pki.decryptRsaPrivateKey(i,a),null==l)return void r.empty();var s=forge.pki.privateKeyToPem(l);r.text(s)}),a.on("change",function(e){var t=$(this).val();if(null!=l&&o.hasOwnProperty(t)){var n=forge.util.decode64(o[t].note),i=l.decrypt(n);s.text(i)}else s.empty()})});
//# sourceMappingURL=site.js.map
